<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1841px" preserveAspectRatio="none" style="width:2830px;height:1841px;background:#FFFFFF;" version="1.1" viewBox="0 0 2830 1841" width="2830px" zoomAndPan="magnify"><defs><filter height="300%" id="f85qo31bnf7vv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="735" x="1049.5" y="28.708">Підпис даних форми з файловими вкладеннями через кабінет користувача</text><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="71.2656" style="stroke:#383838;stroke-width:1.0;" width="10" x="493.5" y="169.5156"/><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="1469.1641" style="stroke:#383838;stroke-width:1.0;" width="10" x="493.5" y="269.9141"/><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="1054.375" style="stroke:#383838;stroke-width:1.0;" width="10" x="1017.5" y="684.7031"/><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="914.3125" style="stroke:#383838;stroke-width:1.0;" width="10" x="1418.5" y="824.7656"/><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="349.125" style="stroke:#383838;stroke-width:1.0;" width="10" x="1786.5" y="1360.8203"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="50" x2="50" y1="123.25" y2="1757.0781"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="498" x2="498" y1="123.25" y2="1757.0781"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1022.5" x2="1022.5" y1="123.25" y2="1757.0781"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1423.5" x2="1423.5" y1="123.25" y2="1757.0781"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1791.5" x2="1791.5" y1="123.25" y2="1757.0781"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2326.5" x2="2326.5" y1="123.25" y2="1757.0781"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2553.5" x2="2553.5" y1="123.25" y2="1757.0781"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2758.5" x2="2758.5" y1="123.25" y2="1757.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="5" y="119.9482">Користувач</text><ellipse cx="50.5" cy="49.9531" fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" rx="8" ry="8" style="stroke:#383838;stroke-width:2.0;"/><path d="M50.5,57.9531 L50.5,84.9531 M37.5,65.9531 L63.5,65.9531 M50.5,84.9531 L37.5,99.9531 M50.5,84.9531 L63.5,99.9531 " fill="none" filter="url(#f85qo31bnf7vv)" style="stroke:#383838;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="5" y="1769.0732">Користувач</text><ellipse cx="50.5" cy="1782.375" fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" rx="8" ry="8" style="stroke:#383838;stroke-width:2.0;"/><path d="M50.5,1790.375 L50.5,1817.375 M37.5,1798.375 L63.5,1798.375 M50.5,1817.375 L37.5,1832.375 M50.5,1817.375 L63.5,1832.375 " fill="none" filter="url(#f85qo31bnf7vv)" style="stroke:#383838;stroke-width:2.0;"/><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="175" x="409" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="418" y="91.6514">Клієнтський додаток</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="420" y="107.9482">кабінету користувача</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="175" x="409" y="1756.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="418" y="1776.0732">Клієнтський додаток</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="420" y="1792.3701">кабінету користувача</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="130" x="955.5" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1000.5" y="91.6514">Kong</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="962.5" y="107.9482">API Management</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="130" x="955.5" y="1756.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1000.5" y="1776.0732">Kong</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="962.5" y="1792.3701">API Management</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="182" x="1330.5" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1354.5" y="91.6514">Сервіс управління</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="1341.5" y="107.9482">задачами користувача</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="182" x="1330.5" y="1756.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1354.5" y="1776.0732">Сервіс управління</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="1341.5" y="1792.3701">задачами користувача</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="262" x="1658.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248" x="1665.5" y="107.9482">Сервіс виконання бізнес-процесів</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="262" x="1658.5" y="1756.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248" x="1665.5" y="1776.0732">Сервіс виконання бізнес-процесів</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="164" x="2242.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="2249.5" y="107.9482">Сервіс КЕП операцій</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="164" x="2242.5" y="1756.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="2249.5" y="1776.0732">Сервіс КЕП операцій</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="263" x="2420.5" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="2462.5" y="91.6514">Об'єктне сховище Ceph</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="249" x="2427.5" y="107.9482">(бакет: lowcode-form-data-storage)</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="263" x="2420.5" y="1756.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="2462.5" y="1776.0732">Об'єктне сховище Ceph</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="249" x="2427.5" y="1792.3701">(бакет: lowcode-form-data-storage)</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="119" x="2697.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="2704.5" y="107.9482">Дата Фабрика</text><rect fill="#F8F8F8" filter="url(#f85qo31bnf7vv)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="119" x="2697.5" y="1756.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="2704.5" y="1776.0732">Дата Фабрика</text><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="71.2656" style="stroke:#383838;stroke-width:1.0;" width="10" x="493.5" y="169.5156"/><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="1469.1641" style="stroke:#383838;stroke-width:1.0;" width="10" x="493.5" y="269.9141"/><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="1054.375" style="stroke:#383838;stroke-width:1.0;" width="10" x="1017.5" y="684.7031"/><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="914.3125" style="stroke:#383838;stroke-width:1.0;" width="10" x="1418.5" y="824.7656"/><rect fill="#FFFFFF" filter="url(#f85qo31bnf7vv)" height="349.125" style="stroke:#383838;stroke-width:1.0;" width="10" x="1786.5" y="1360.8203"/><polygon fill="#383838" points="481.5,165.5156,491.5,169.5156,481.5,173.5156,485.5,169.5156" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="50.5" x2="487.5" y1="169.5156" y2="169.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="57.5" y="149.3169">Перехід до виконання задачі</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="424" x="57.5" y="164.4497">накладання підпису на дані форми з файловими вкладеннями</text><line style="stroke:#383838;stroke-width:1.0;" x1="503.5" x2="545.5" y1="198.6484" y2="198.6484"/><line style="stroke:#383838;stroke-width:1.0;" x1="545.5" x2="545.5" y1="198.6484" y2="211.6484"/><line style="stroke:#383838;stroke-width:1.0;" x1="504.5" x2="545.5" y1="211.6484" y2="211.6484"/><polygon fill="#383838" points="514.5,207.6484,504.5,211.6484,514.5,215.6484,510.5,211.6484" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="510.5" y="193.5825">Підготовка UI-форми для відображення</text><polygon fill="#383838" points="61.5,236.7813,51.5,240.7813,61.5,244.7813,57.5,240.7813" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="55.5" x2="497.5" y1="240.7813" y2="240.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="67.5" y="235.7153">Повернення управління</text><polygon fill="#383838" points="481.5,265.9141,491.5,269.9141,481.5,273.9141,485.5,269.9141" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="50.5" x2="487.5" y1="269.9141" y2="269.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="333" x="57.5" y="264.8481">Підтвердження виконання задачі підпису даних</text><line style="stroke:#383838;stroke-width:1.0;" x1="503.5" x2="545.5" y1="299.0469" y2="299.0469"/><line style="stroke:#383838;stroke-width:1.0;" x1="545.5" x2="545.5" y1="299.0469" y2="312.0469"/><line style="stroke:#383838;stroke-width:1.0;" x1="504.5" x2="545.5" y1="312.0469" y2="312.0469"/><polygon fill="#383838" points="514.5,308.0469,504.5,312.0469,514.5,316.0469,510.5,312.0469" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="510.5" y="293.981">Клієнтська валідація даних форми</text><line style="stroke:#383838;stroke-width:1.0;" x1="503.5" x2="545.5" y1="415.3438" y2="415.3438"/><line style="stroke:#383838;stroke-width:1.0;" x1="545.5" x2="545.5" y1="415.3438" y2="428.3438"/><line style="stroke:#383838;stroke-width:1.0;" x1="504.5" x2="545.5" y1="428.3438" y2="428.3438"/><polygon fill="#383838" points="514.5,424.3438,504.5,428.3438,514.5,432.3438,510.5,428.3438" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="376" x="510.5" y="395.145">Приведення значень полів типу "File" згідно контракту</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="510.5" y="410.2778">взаємодії з серверним додатком</text><path d="M234,325.0469 L234,486.0469 L484,486.0469 L484,335.0469 L474,325.0469 L234,325.0469 " fill="#EBEBEB" filter="url(#f85qo31bnf7vv)" style="stroke:#383838;stroke-width:1.0;"/><path d="M474,325.0469 L474,335.0469 L484,335.0469 L474,325.0469 " fill="#EBEBEB" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="240" y="342.1138">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="248" y="357.2466">"data": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="256" y="372.3794">"&lt;file_property_name&gt;": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="264" y="387.5122">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="272" y="402.645">"id": "{UUID}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="272" y="417.7778">"checksum": "{SHA256-hash}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="264" y="432.9106">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="256" y="448.0435">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="248" y="463.1763">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="240" y="478.3091">}</text><line style="stroke:#383838;stroke-width:1.0;" x1="503.5" x2="545.5" y1="531.6406" y2="531.6406"/><line style="stroke:#383838;stroke-width:1.0;" x1="545.5" x2="545.5" y1="531.6406" y2="544.6406"/><line style="stroke:#383838;stroke-width:1.0;" x1="504.5" x2="545.5" y1="544.6406" y2="544.6406"/><polygon fill="#383838" points="514.5,540.6406,504.5,544.6406,514.5,548.6406,510.5,544.6406" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="496" x="510.5" y="511.4419">Генерація цифрового підпису "signature" на JSON-документ даних форми</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="510.5" y="526.5747">з SHA256-геш та UUID документів</text><polygon fill="#383838" points="1005.5,680.7031,1015.5,684.7031,1005.5,688.7031,1009.5,684.7031" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="503.5" x2="1011.5" y1="684.7031" y2="684.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="510.5" y="619.106">Підтвердження виконання задачі підпису:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="510.5" y="634.2388">POST "/{realm}/task/{id}/sign-form"</text><ellipse cx="516" cy="644.9375" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="521.5" y="649.3716">Ідентифікатор сесії Kong</text><ellipse cx="516" cy="660.0703" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361" x="521.5" y="664.5044">Дані форми з SHA256-геш / UUID файлових вкладень</text><ellipse cx="516" cy="675.2031" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="521.5" y="679.6372">Цифровий підпис даних форми</text><path d="M234,557.6406 L234,733.6406 L484,733.6406 L484,567.6406 L474,557.6406 L234,557.6406 " fill="#EBEBEB" filter="url(#f85qo31bnf7vv)" style="stroke:#383838;stroke-width:1.0;"/><path d="M474,557.6406 L474,567.6406 L484,567.6406 L474,557.6406 " fill="#EBEBEB" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="240" y="574.7075">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="248" y="589.8403">"data": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="256" y="604.9731">"&lt;file_property_name&gt;": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="264" y="620.106">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="272" y="635.2388">"id": "{UUID}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="272" y="650.3716">"checksum": "{SHA256-hash}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="264" y="665.5044">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="256" y="680.6372">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="248" y="695.77">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="248" y="710.9028">"signature": "${signature}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="240" y="726.0356">}</text><polygon fill="#383838" points="1406.5,820.7656,1416.5,824.7656,1406.5,828.7656,1410.5,824.7656" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1027.5" x2="1412.5" y1="824.7656" y2="824.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="1034.5" y="759.1685">Підтвердження виконання задачі підпису:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="1034.5" y="774.3013">POST "/{realm}/task/{id}/sign-form"</text><ellipse cx="1040" cy="785" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1045.5" y="789.4341">X-Access-Token</text><ellipse cx="1040" cy="800.1328" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361" x="1045.5" y="804.5669">Дані форми з SHA256-геш / UUID файлових вкладень</text><ellipse cx="1040" cy="815.2656" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="1045.5" y="819.6997">Цифровий підпис даних форми</text><line style="stroke:#383838;stroke-width:1.0;" x1="1428.5" x2="1470.5" y1="869.0313" y2="869.0313"/><line style="stroke:#383838;stroke-width:1.0;" x1="1470.5" x2="1470.5" y1="869.0313" y2="882.0313"/><line style="stroke:#383838;stroke-width:1.0;" x1="1429.5" x2="1470.5" y1="882.0313" y2="882.0313"/><polygon fill="#383838" points="1439.5,878.0313,1429.5,882.0313,1439.5,886.0313,1435.5,882.0313" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="1435.5" y="848.8325">Перевірка відповідності Assignee задачі</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="1439.5" y="863.9653">поточному користувачу</text><line style="stroke:#383838;stroke-width:1.0;" x1="1428.5" x2="1470.5" y1="926.2969" y2="926.2969"/><line style="stroke:#383838;stroke-width:1.0;" x1="1470.5" x2="1470.5" y1="926.2969" y2="939.2969"/><line style="stroke:#383838;stroke-width:1.0;" x1="1429.5" x2="1470.5" y1="939.2969" y2="939.2969"/><polygon fill="#383838" points="1439.5,935.2969,1429.5,939.2969,1439.5,943.2969,1435.5,939.2969" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="1435.5" y="906.0981">Встановлення X-Access-Token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="1435.5" y="921.231">для JSON-документа даних форми</text><line style="stroke:#383838;stroke-width:1.0;" x1="1428.5" x2="1470.5" y1="968.4297" y2="968.4297"/><line style="stroke:#383838;stroke-width:1.0;" x1="1470.5" x2="1470.5" y1="968.4297" y2="981.4297"/><line style="stroke:#383838;stroke-width:1.0;" x1="1429.5" x2="1470.5" y1="981.4297" y2="981.4297"/><polygon fill="#383838" points="1439.5,977.4297,1429.5,981.4297,1439.5,985.4297,1435.5,981.4297" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="344" x="1435.5" y="963.3638">Підготовка даних до валідації цифрового підпису</text><polygon fill="#383838" points="2314.5,1006.5625,2324.5,1010.5625,2314.5,1014.5625,2318.5,1010.5625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1428.5" x2="2320.5" y1="1010.5625" y2="1010.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="1435.5" y="1005.4966">Валідація цифрового підпису ("data", "signature")</text><polygon fill="#383838" points="1439.5,1035.6953,1429.5,1039.6953,1439.5,1043.6953,1435.5,1039.6953" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1433.5" x2="2325.5" y1="1039.6953" y2="1039.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1445.5" y="1034.6294">Результат валідації</text><line style="stroke:#383838;stroke-width:1.0;" x1="1428.5" x2="1470.5" y1="1099.0938" y2="1099.0938"/><line style="stroke:#383838;stroke-width:1.0;" x1="1470.5" x2="1470.5" y1="1099.0938" y2="1112.0938"/><line style="stroke:#383838;stroke-width:1.0;" x1="1429.5" x2="1470.5" y1="1112.0938" y2="1112.0938"/><polygon fill="#383838" points="1439.5,1108.0938,1429.5,1112.0938,1439.5,1116.0938,1435.5,1112.0938" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="1435.5" y="1063.7622">Генерація ідентифікатора Ceph-документа</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="1435.5" y="1078.895">для збереження документа з підписом</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="1435.5" y="1094.0278">(processInstanceId, taskDefinitionKey)</text><polygon fill="#383838" points="2542,1240.5898,2552,1244.5898,2542,1248.5898,2546,1244.5898" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1428.5" x2="2548" y1="1244.5898" y2="1244.5898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="370" x="1435.5" y="1209.2583">Збереження JSON-документа даних форми з підписом</text><ellipse cx="1441" cy="1219.957" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="1446.5" y="1224.3911">Назва документа</text><ellipse cx="1441" cy="1235.0898" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="1446.5" y="1239.5239">JSON-документ даних форми з підписом</text><path d="M2559,1125.0938 L2559,1316.0938 L2820,1316.0938 L2820,1135.0938 L2810,1125.0938 L2559,1125.0938 " fill="#EBEBEB" filter="url(#f85qo31bnf7vv)" style="stroke:#383838;stroke-width:1.0;"/><path d="M2810,1125.0938 L2810,1135.0938 L2820,1135.0938 L2810,1125.0938 " fill="#EBEBEB" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="2565" y="1142.1606">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="2573" y="1157.2935">"data": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="2581" y="1172.4263">"&lt;file_property_name&gt;": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="2589" y="1187.5591">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="2597" y="1202.6919">"id": "{UUID}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="2597" y="1217.8247">"checksum": "{SHA256-hash}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="2589" y="1232.9575">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="2581" y="1248.0903">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="2573" y="1263.2231">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="2573" y="1278.356">"x-access-token": {X-Access-Token}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="2573" y="1293.4888">"signature": "{signature}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="2565" y="1308.6216">}</text><polygon fill="#383838" points="1439.5,1327.6875,1429.5,1331.6875,1439.5,1335.6875,1435.5,1331.6875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1433.5" x2="2553" y1="1331.6875" y2="1331.6875"/><polygon fill="#383838" points="1774.5,1356.8203,1784.5,1360.8203,1774.5,1364.8203,1778.5,1360.8203" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1428.5" x2="1780.5" y1="1360.8203" y2="1360.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1435.5" y="1355.7544">Підтвердження виконання задачі</text><polygon fill="#383838" points="2542,1401.0859,2552,1405.0859,2542,1409.0859,2546,1405.0859" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1796.5" x2="2548" y1="1405.0859" y2="1405.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="1803.5" y="1384.8872">Отримання JSON-документа даних UI-форми</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="432" x="1803.5" y="1400.02">за ідентифікатором задачі (processInstanceId, taskDefinitionKey)</text><polygon fill="#383838" points="1807.5,1430.2188,1797.5,1434.2188,1807.5,1438.2188,1803.5,1434.2188" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1801.5" x2="2553" y1="1434.2188" y2="1434.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1813.5" y="1429.1528">JSON документ з UUID документів</text><line style="stroke:#383838;stroke-width:1.0;" x1="1796.5" x2="1838.5" y1="1463.3516" y2="1463.3516"/><line style="stroke:#383838;stroke-width:1.0;" x1="1838.5" x2="1838.5" y1="1463.3516" y2="1476.3516"/><line style="stroke:#383838;stroke-width:1.0;" x1="1797.5" x2="1838.5" y1="1476.3516" y2="1476.3516"/><polygon fill="#383838" points="1807.5,1472.3516,1797.5,1476.3516,1807.5,1480.3516,1803.5,1476.3516" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="511" x="1803.5" y="1458.2856">Підготовка даних для формування запиту на збереження у Дата Фабрику</text><polygon fill="#383838" points="2747,1597.2813,2757,1601.2813,2747,1605.2813,2751,1601.2813" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1796.5" x2="2753" y1="1601.2813" y2="1601.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="1803.5" y="1550.8169">Збереження даних в реєстрі</text><ellipse cx="1809" cy="1561.5156" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1814.5" y="1565.9497">X-Access-Token</text><ellipse cx="1809" cy="1576.6484" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="1814.5" y="1581.0825">X-Digital-Signature</text><ellipse cx="1809" cy="1591.7813" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="1814.5" y="1596.2153">X-Source-Business-Process-Instance-Id</text><path d="M1527,1489.3516 L1527,1650.3516 L1777,1650.3516 L1777,1499.3516 L1767,1489.3516 L1527,1489.3516 " fill="#EBEBEB" filter="url(#f85qo31bnf7vv)" style="stroke:#383838;stroke-width:1.0;"/><path d="M1767,1489.3516 L1767,1499.3516 L1777,1499.3516 L1767,1489.3516 " fill="#EBEBEB" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1533" y="1506.4185">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="1541" y="1521.5513">"data": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="1549" y="1536.6841">"&lt;file_property_name&gt;": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1557" y="1551.8169">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1565" y="1566.9497">"id": "{UUID}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="1565" y="1582.0825">"checksum": "{SHA256-hash}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1557" y="1597.2153">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1549" y="1612.3481">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1541" y="1627.481">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1533" y="1642.6138">}</text><polygon fill="#383838" points="1807.5,1676.8125,1797.5,1680.8125,1807.5,1684.8125,1803.5,1680.8125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1801.5" x2="2758" y1="1680.8125" y2="1680.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1813.5" y="1675.7466">Результат виконання операції</text><polygon fill="#383838" points="1439.5,1705.9453,1429.5,1709.9453,1439.5,1713.9453,1435.5,1709.9453" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1433.5" x2="1790.5" y1="1709.9453" y2="1709.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="1445.5" y="1704.8794">Повернення управління</text><polygon fill="#383838" points="61.5,1735.0781,51.5,1739.0781,61.5,1743.0781,57.5,1739.0781" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="55.5" x2="1422.5" y1="1739.0781" y2="1739.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="67.5" y="1734.0122">Повернення управління користувачу</text><!--MD5=[80dde0663bb336ce44da32c5aea071c1]
@startuml
skinparam monochrome true

actor "Користувач" as user
participant "Клієнтський додаток\n кабінету користувача" as cabinet
participant "Kong \nAPI Management" as kong
participant "Сервіс управління \n задачами користувача" as user_task_mngmnt
participant "Сервіс виконання бізнес-процесів" as bpms
participant "Сервіс КЕП операцій" as dso
participant "Об'єктне сховище Ceph \n(бакет: lowcode-form-data-storage)" as form_data_ceph
participant "Дата Фабрика" as data_factory

skinparam responseMessageBelowArrow false
title Підпис даних форми з файловими вкладеннями через кабінет користувача

user -> cabinet: Перехід до виконання задачі \nнакладання підпису на дані форми з файловими вкладеннями
activate cabinet
  cabinet -> cabinet: Підготовка UI-форми для відображення
  cabinet - -> user: Повернення управління
deactivate cabinet

user -> cabinet: Підтвердження виконання задачі підпису даних
activate cabinet
  cabinet -> cabinet: Клієнтська валідація даних форми
  cabinet -> cabinet: Приведення значень полів типу "File" згідно контракту \nвзаємодії з серверним додатком
  note left
    {
      "data": {
        "<file_property_name>": [
          {
            "id": "{UUID}",
            "checksum": "{SHA256-hash}"
          }
        ]
      }
    }
  end note
  cabinet -> cabinet: Генерація цифрового підпису "signature" на JSON-документ даних форми \nз SHA256-геш та UUID документів
  cabinet -> kong: Підтвердження виконання задачі підпису: \nPOST "/{realm}/task/{id}/sign-form" \n* Ідентифікатор сесії Kong \n* Дані форми з SHA256-геш / UUID файлових вкладень\n* Цифровий підпис даних форми
  activate kong
    note left
      {
        "data": {
          "<file_property_name>": [
            {
              "id": "{UUID}",
              "checksum": "{SHA256-hash}"
            }
          ]
        },
        "signature": "${signature}"
      }
    end note
    kong -> user_task_mngmnt: Підтвердження виконання задачі підпису: \nPOST "/{realm}/task/{id}/sign-form" \n* X-Access-Token \n* Дані форми з SHA256-геш / UUID файлових вкладень\n* Цифровий підпис даних форми
    activate user_task_mngmnt
      user_task_mngmnt -> user_task_mngmnt: Перевірка відповідності Assignee задачі\n поточному користувачу
      user_task_mngmnt -> user_task_mngmnt: Встановлення X-Access-Token \nдля JSON-документа даних форми
      user_task_mngmnt -> user_task_mngmnt: Підготовка даних до валідації цифрового підпису
      user_task_mngmnt -> dso: Валідація цифрового підпису ("data", "signature")
      dso -> user_task_mngmnt: Результат валідації

      user_task_mngmnt -> user_task_mngmnt: Генерація ідентифікатора Ceph-документа \nдля збереження документа з підписом \n(processInstanceId, taskDefinitionKey)

      user_task_mngmnt -> form_data_ceph: Збереження JSON-документа даних форми з підписом  \n* Назва документа \n* JSON-документ даних форми з підписом
      note right
        {
          "data": {
            "<file_property_name>": [
              {
                "id": "{UUID}",
                "checksum": "{SHA256-hash}"
              }
            ]
          },
          "x-access-token": {X-Access-Token}
          "signature": "{signature}"
        }
      end note
      form_data_ceph - -> user_task_mngmnt

      user_task_mngmnt -> bpms: Підтвердження виконання задачі
      activate bpms
        bpms -> form_data_ceph: Отримання JSON-документа даних UI-форми \nза ідентифікатором задачі (processInstanceId, taskDefinitionKey)
        form_data_ceph - -> bpms: JSON документ з UUID документів
        bpms -> bpms: Підготовка даних для формування запиту на збереження у Дата Фабрику
        bpms -> data_factory: Збереження даних в реєстрі \n* X-Access-Token \n* X-Digital-Signature \n* X-Source-Business-Process-Instance-Id
        note left
          {
            "data": {
              "<file_property_name>": [
                {
                  "id": "{UUID}",
                  "checksum": "{SHA256-hash}"
                }
              ]
            }
          }
        end note
        data_factory - -> bpms: Результат виконання операції
      return Повернення управління
      user_task_mngmnt - -> user: Повернення управління користувачу
    deactivate
  deactivate
deactivate
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>