<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1255px" preserveAspectRatio="none" style="width:1312px;height:1255px;background:#FFFFFF;" version="1.1" viewBox="0 0 1312 1255" width="1312px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1243.3516" style="stroke:#2688D4;stroke-width:1.0;" width="190" x="260" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="263" y="18.0669">Авторизований партнер</text><rect fill="#FFFFFF" height="1243.3516" style="stroke:#2688D4;stroke-width:1.0;" width="152" x="822" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132" x="832" y="18.0669">Екосистема "Дія"</text><rect fill="#FFFFFF" height="949.7734" style="stroke:#000000;stroke-width:2.0;" width="1296" x="10" y="215.6875"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="355" x2="355" y1="89.0234" y2="1182.4609"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="898" x2="898" y1="89.0234" y2="1182.4609"/><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="108" x="301" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="329.5" y="45.1279">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="308" y="61.4248">нотифікацій</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="308" y="77.7217">користувачів</text><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="108" x="301" y="1181.4609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="329.5" y="1201.4561">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="308" y="1217.7529">нотифікацій</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="308" y="1234.0498">користувачів</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="144" x="826" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="836" y="61.4248">Сервіс розсилки</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="833" y="77.7217">push-нотифікацій</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="144" x="826" y="1181.4609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="836" y="1201.4561">Сервіс розсилки</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="833" y="1217.7529">push-нотифікацій</text><polygon fill="#2688D4" points="886,131.2891,896,135.2891,886,139.2891,890,135.2891" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="355" x2="892" y1="135.2891" y2="135.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="196" x="362" y="115.0903">Аутентифікація партнера</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="562" y="115.0903"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="362" y="130.2231">/api/v1/auth/partner/{partnerToken}</text><polygon fill="#2688D4" points="366,178.5547,356,182.5547,366,186.5547,362,182.5547" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360" x2="897" y1="182.5547" y2="182.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="372" y="177.4888">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="403" y="177.4888">- Токен авторизації: &lt;authorization token&gt;</text><path d="M903,148.2891 L903,203.2891 L1142,203.2891 L1142,158.2891 L1132,148.2891 L903,148.2891 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M1132,148.2891 L1132,158.2891 L1142,158.2891 L1132,148.2891 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="165.356">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="917" y="180.4888">"token": "&lt;authorization token&gt;"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="195.6216">}</text><path d="M10,215.6875 L639,215.6875 L639,222.6875 L629,232.6875 L10,232.6875 L10,215.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="949.7734" style="stroke:#000000;stroke-width:2.0;" width="1296" x="10" y="215.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="584" x="25" y="228.7544">Сеанс взаємодії з використанням отриманого токену авторизації - 2 години</text><polygon fill="#2688D4" points="886,313.4844,896,317.4844,886,321.4844,890,317.4844" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="355" x2="892" y1="317.4844" y2="317.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="246" x="362" y="282.1528">Створення шаблону нотифікації</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="612" y="282.1528"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="362" y="297.2856">POST /api/v1/notification/template</text><ellipse cx="367.5" cy="307.9844" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="373" y="312.4185">Authorization: "Bearer &lt;authorization token&gt;"</text><path d="M20,237.8203 L20,352.8203 L350,352.8203 L350,247.8203 L340,237.8203 L20,237.8203 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M340,237.8203 L340,247.8203 L350,247.8203 L340,237.8203 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="26" y="254.8872">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="34" y="270.02">"actionType": "message",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="34" y="285.1528">"templateType": "attention",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="34" y="300.2856">"title" : "Українське бюро кредитних історій",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="34" y="315.4185">"shortText" : "Новий кредитний договір...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="34" y="330.5513">"fullText" : "У кредитну історію надійшла..."</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="26" y="345.6841">}</text><polygon fill="#2688D4" points="366,394.0156,356,398.0156,366,402.0156,362,398.0156" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360" x2="897" y1="398.0156" y2="398.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="372" y="392.9497">201</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="403" y="392.9497">- Ідентифікатор шаблону</text><path d="M903,363.75 L903,418.75 L1220,418.75 L1220,373.75 L1210,363.75 L903,363.75 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M1210,363.75 L1210,373.75 L1220,373.75 L1210,363.75 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="380.8169">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="917" y="395.9497">"templateId": "6132008a2db328003c5d1d43"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="411.0825">}</text><polygon fill="#2688D4" points="886,565.3438,896,569.3438,886,573.3438,890,569.3438" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="355" x2="892" y1="569.3438" y2="569.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="478" x="362" y="534.0122">Реєстрація розсилки push-нотифікацій за заданим шаблоном</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="844" y="534.0122"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="362" y="549.145">POST /api/v1/notification/distribution/push</text><ellipse cx="367.5" cy="559.8438" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="373" y="564.2778">Authorization: "Bearer &lt;authorization token&gt;"</text><path d="M21,429.1484 L21,665.1484 L350,665.1484 L350,439.1484 L340,429.1484 L21,429.1484 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M340,429.1484 L340,439.1484 L350,439.1484 L340,429.1484 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="27" y="446.2153">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="43" y="461.3481">"templateId": "6132008a2db328003c5d1d43",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="43" y="476.481">"recipients": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="59" y="491.6138">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="75" y="506.7466">"rnokpp": "314...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="75" y="521.8794">"id": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="75" y="537.0122">"parameters": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="91" y="552.145">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="107" y="567.2778">"key": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="107" y="582.4106">"value": "string"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="91" y="597.5435">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="75" y="612.6763">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="59" y="627.8091">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="43" y="642.9419">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="27" y="658.0747">}</text><polygon fill="#2688D4" points="366,706.4063,356,710.4063,366,714.4063,362,710.4063" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360" x2="897" y1="710.4063" y2="710.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="372" y="705.3403">201</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="403" y="705.3403">- Ідентифікатор розсилки</text><path d="M903,676.1406 L903,731.1406 L1130,731.1406 L1130,686.1406 L1120,676.1406 L903,676.1406 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M1120,676.1406 L1120,686.1406 L1130,686.1406 L1120,676.1406 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="693.2075">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="917" y="708.3403">"distributionId": "12345678901"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="723.4731">}</text><polygon fill="#2688D4" points="886,783.9375,896,787.9375,886,791.9375,890,787.9375" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="355" x2="892" y1="787.9375" y2="787.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="362" x="362" y="752.606">Отримання статусу розсилки push-нотифікацій</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="728" y="752.606"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="401" x="362" y="767.7388">GET /api/v1/notification/distribution/push/{distributionId}/status</text><ellipse cx="367.5" cy="778.4375" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="373" y="782.8716">Authorization: "Bearer &lt;authorization token&gt;"</text><polygon fill="#2688D4" points="366,831.2031,356,835.2031,366,839.2031,362,835.2031" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360" x2="897" y1="835.2031" y2="835.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="372" y="830.1372">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="403" y="830.1372">- Статус розсилки</text><path d="M903,800.9375 L903,855.9375 L1291,855.9375 L1291,810.9375 L1281,800.9375 L903,800.9375 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M1281,800.9375 L1281,810.9375 L1291,810.9375 L1281,800.9375 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="818.0044">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="359" x="917" y="833.1372">"status": "enum ['pending', 'in-progress', 'sent', 'closed']"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="848.27">}</text><polygon fill="#2688D4" points="886,908.7344,896,912.7344,886,916.7344,890,912.7344" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="355" x2="892" y1="912.7344" y2="912.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="391" x="362" y="877.4028">Отримання результату розсилки push-нотифікацій</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="757" y="877.4028"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="362" y="892.5356">GET /api/v1/notification/distribution/push/{distributionId}</text><ellipse cx="367.5" cy="903.2344" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="373" y="907.6685">Authorization: "Bearer &lt;authorization token&gt;"</text><polygon fill="#2688D4" points="366,1001.3984,356,1005.3984,366,1009.3984,362,1005.3984" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360" x2="897" y1="1005.3984" y2="1005.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="372" y="1000.3325">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="403" y="1000.3325">- Результат розсилки</text><path d="M903,925.7344 L903,1071.7344 L1265,1071.7344 L1265,935.7344 L1255,925.7344 L903,925.7344 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M1255,925.7344 L1255,935.7344 L1265,935.7344 L1255,925.7344 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="942.8013">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="917" y="957.9341">"recipients": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="925" y="973.0669">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="933" y="988.1997">"id": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="933" y="1003.3325">"rnokpp": "314...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="933" y="1018.4653">"status": "enum ['not-found', 'sent', 'read', 'error']"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="925" y="1033.5981">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="917" y="1048.731">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="909" y="1063.8638">}</text><polygon fill="#2688D4" points="886,1124.3281,896,1128.3281,886,1132.3281,890,1128.3281" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="355" x2="892" y1="1128.3281" y2="1128.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="278" x="362" y="1092.9966">Зупинка розсилки push-нотифікацій</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="644" y="1092.9966"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="380" x="362" y="1108.1294">DELETE /api/v1/notification/distribution/push/{distributionId}</text><ellipse cx="367.5" cy="1118.8281" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="373" y="1123.2622">Authorization: "Bearer &lt;authorization token&gt;"</text><polygon fill="#2688D4" points="366,1153.4609,356,1157.4609,366,1161.4609,362,1157.4609" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360" x2="897" y1="1157.4609" y2="1157.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="372" y="1152.395">204</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311" x="403" y="1152.395">- Результат зупинки або видалення розсилки</text><!--MD5=[199f459bb7998334fd772632de6f8e74]
@startuml
skinparam shadowing false
skinparam DatabaseBackgroundColor white
skinparam DatabaseBorderColor #2688d4
skinparam QueueBackgroundColor white
skinparam QueueBorderColor #2688d4
skinparam NoteBackgroundColor white
skinparam NoteBorderColor #2688d4
skinparam ActorBackgroundColor white
skinparam ControlBackgroundColor white
skinparam ControlBorderColor #2688d4
skinparam sequence {
    ArrowColor #2688d4
    ActorBorderColor #2688d4
    LifeLineBorderColor #2688d4
    ParticipantBorderColor #2688d4
    ParticipantBackgroundColor white
    BoxBorderColor #2688d4
    BoxBackgroundColor white
}

box Авторизований партнер
participant "Сервіс \nнотифікацій \nкористувачів" as notification_service
end box

box Екосистема "Дія"
  participant "Сервіс розсилки \npush-нотифікацій" as diia_notification_service
end box

notification_service -> diia_notification_service: **Аутентифікація партнера** \n/api/v1/auth/partner/{partnerToken}
diia_notification_service - -> notification_service: **200** - Токен авторизації: <authorization token>
note right
{
  "token": "<authorization token>"
}
end note

group Сеанс взаємодії з використанням отриманого токену авторизації - 2 години
  notification_service -> diia_notification_service: **Створення шаблону нотифікації** \nPOST /api/v1/notification/template \n*Authorization: "Bearer <authorization token>"
  note left
  {
    "actionType": "message",
    "templateType": "attention",
    "title" : "Українське бюро кредитних історій",
    "shortText" : "Новий кредитний договір...",
    "fullText" : "У кредитну історію надійшла..."
  }
  end note

  diia_notification_service - -> notification_service: **201** - Ідентифікатор шаблону
  note right
  {
    "templateId": "6132008a2db328003c5d1d43"
  }
  end note

  notification_service -> diia_notification_service: **Реєстрація розсилки push-нотифікацій за заданим шаблоном** \nPOST /api/v1/notification/distribution/push \n*Authorization: "Bearer <authorization token>"
  note left
  {
      "templateId": "6132008a2db328003c5d1d43",
      "recipients": [
          {
              "rnokpp": "314...",
              "id": "string",
              "parameters": [
                  {
                      "key": "string",
                      "value": "string"
                  }
              ]
          }
      ]
  }
  end note

  diia_notification_service - -> notification_service: **201** - Ідентифікатор розсилки
  note right
  {
    "distributionId": "12345678901"
  }
  end note

  notification_service -> diia_notification_service: **Отримання статусу розсилки push-нотифікацій** \nGET /api/v1/notification/distribution/push/{distributionId}/status \n*Authorization: "Bearer <authorization token>"

  diia_notification_service - -> notification_service: **200** - Статус розсилки
  note right
  {
    "status": "enum ['pending', 'in-progress', 'sent', 'closed']"
  }
  end note

  notification_service -> diia_notification_service: **Отримання результату розсилки push-нотифікацій** \nGET /api/v1/notification/distribution/push/{distributionId} \n*Authorization: "Bearer <authorization token>"

  diia_notification_service - -> notification_service: **200** - Результат розсилки
  note right
  {
    "recipients": [
      {
        "id": "string",
        "rnokpp": "314...",
        "status": "enum ['not-found', 'sent', 'read', 'error']"
      }
    ]
  }
  end note

  notification_service -> diia_notification_service: **Зупинка розсилки push-нотифікацій** \nDELETE /api/v1/notification/distribution/push/{distributionId} \n*Authorization: "Bearer <authorization token>"
  diia_notification_service - -> notification_service: **204** - Результат зупинки або видалення розсилки
end
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>