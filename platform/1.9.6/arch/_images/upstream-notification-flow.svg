<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="736px" preserveAspectRatio="none" style="width:990px;height:736px;background:#FFFFFF;" version="1.1" viewBox="0 0 990 736" width="990px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="724.4375" style="stroke:#2688D4;stroke-width:1.0;" width="499" x="276" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="460.5" y="18.0669">Upstream Service</text><rect fill="#FFFFFF" height="579.1172" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="317.5" y="82.7266"/><rect fill="#FFFFFF" height="315.125" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="582.5" y="346.7188"/><rect fill="#FFFFFF" height="72.2656" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="705.5" y="575.5781"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="322" x2="322" y1="72.7266" y2="679.8438"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="587.5" x2="587.5" y1="72.7266" y2="679.8438"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="710" x2="710" y1="72.7266" y2="679.8438"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="905" x2="905" y1="72.7266" y2="679.8438"/><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="85" x="280" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="287" y="45.1279">Upstream</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="297.5" y="61.4248">Service</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="85" x="280" y="678.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="287" y="698.8389">Upstream</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="297.5" y="715.1357">Service</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="94" x="540.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="547.5" y="45.1279">Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="562.5" y="61.4248">Facade</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="94" x="540.5" y="678.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="547.5" y="698.8389">Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="562.5" y="715.1357">Facade</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="121" x="650" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="670.5" y="45.1279">Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="657" y="61.4248">Event Publisher</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="121" x="650" y="678.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="670.5" y="698.8389">Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="657" y="715.1357">Event Publisher</text><path d="M838,30.1328 L973,30.1328 C978,30.1328 978,51.4297 978,51.4297 C978,51.4297 978,72.7266 973,72.7266 L838,72.7266 C833,72.7266 833,51.4297 833,51.4297 C833,51.4297 833,30.1328 838,30.1328 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:2.0;"/><path d="M973,30.1328 C968,30.1328 968,51.4297 968,51.4297 C968,72.7266 973,72.7266 973,72.7266 " fill="none" style="stroke:#2688D4;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="838" y="48.1279">'user-notifications'</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="863" y="64.4248">Kafka Topic</text><path d="M838,678.8438 L973,678.8438 C978,678.8438 978,700.1406 978,700.1406 C978,700.1406 978,721.4375 973,721.4375 L838,721.4375 C833,721.4375 833,700.1406 833,700.1406 C833,700.1406 833,678.8438 838,678.8438 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:2.0;"/><path d="M973,678.8438 C968,678.8438 968,700.1406 968,700.1406 C968,721.4375 973,721.4375 973,721.4375 " fill="none" style="stroke:#2688D4;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="838" y="696.8389">'user-notifications'</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="863" y="713.1357">Kafka Topic</text><rect fill="#FFFFFF" height="579.1172" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="317.5" y="82.7266"/><rect fill="#FFFFFF" height="315.125" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="582.5" y="346.7188"/><rect fill="#FFFFFF" height="72.2656" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="705.5" y="575.5781"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="983" x="0" y="103.293"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="983" y1="103.293" y2="103.293"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="983" y1="106.293" y2="106.293"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="532" x="225.5" y="92.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="518" x="231.5" y="108.7935">Відправка повідомлення користувачу за вказаним каналом зв'язку</text><polygon fill="#2688D4" points="570.5,342.7188,580.5,346.7188,570.5,350.7188,574.5,346.7188" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="327.5" x2="576.5" y1="346.7188" y2="346.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="334.5" y="326.52">Запит на відправку повідомлення</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="334.5" y="341.6528">за вказаним каналом зв'язку</text><path d="M5,130.8594 L5,533.8594 L313,533.8594 L313,140.8594 L303,130.8594 L5,130.8594 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M303,130.8594 L303,140.8594 L313,140.8594 L303,130.8594 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="11" y="147.9263">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="19" y="163.0591">"context": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="27" y="178.1919">"system": "Low-code Platform",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="27" y="193.3247">"application": "&lt;upstream-service&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="19" y="208.4575">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="19" y="223.5903">"notification": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="27" y="238.7231">"templateName": "{notificationTemplate}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="19" y="253.856">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="19" y="268.9888">"recipients": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="27" y="284.1216">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="39" y="299.2544">"id": "&lt;user id - optional&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="39" y="314.3872">"channels": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="47" y="329.52">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="55" y="344.6528">"channel": "email",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="55" y="359.7856">"email": "&lt;Email користувача&gt;"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="47" y="374.9185">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="39" y="390.0513">],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="39" y="405.1841">"parameters": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="47" y="420.3169">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="63" y="435.4497">"key": "&lt;key&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="63" y="450.5825">"value": "&lt;value&gt;"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="47" y="465.7153">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="39" y="480.8481">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="27" y="495.981">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="19" y="511.1138">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="11" y="526.2466">}</text><polygon fill="#2688D4" points="693.5,571.5781,703.5,575.5781,693.5,579.5781,697.5,575.5781" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="592.5" x2="699.5" y1="575.5781" y2="575.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="599.5" y="555.3794">Відправка</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="599.5" y="570.5122">повідомлення</text><polygon fill="#2688D4" points="893.5,615.8438,903.5,619.8438,893.5,623.8438,897.5,619.8438" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="715.5" x2="899.5" y1="619.8438" y2="619.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="722.5" y="599.645">Публікація запиту на</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="722.5" y="614.7778">відправку повідомлення</text><polygon fill="#2688D4" points="726.5,629.8438,716.5,633.8438,726.5,637.8438,722.5,633.8438" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="720.5" x2="904.5" y1="633.8438" y2="633.8438"/><polygon fill="#2688D4" points="603.5,643.8438,593.5,647.8438,603.5,651.8438,599.5,647.8438" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="597.5" x2="709.5" y1="647.8438" y2="647.8438"/><polygon fill="#2688D4" points="333.5,657.8438,323.5,661.8438,333.5,665.8438,329.5,661.8438" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="327.5" x2="586.5" y1="661.8438" y2="661.8438"/><!--MD5=[cdfad627a223219a95c0e210dd91ad2b]
@startuml
skinparam shadowing false
skinparam DatabaseBackgroundColor white
skinparam DatabaseBorderColor #2688d4
skinparam QueueBackgroundColor white
skinparam QueueBorderColor #2688d4
skinparam NoteBackgroundColor white
skinparam NoteBorderColor #2688d4
skinparam sequence {
    ArrowColor #2688d4
    ActorBorderColor #2688d4
    LifeLineBorderColor #2688d4
    ParticipantBorderColor #2688d4
    ParticipantBackgroundColor white
    BoxBorderColor #2688d4
    BoxBackgroundColor white
}

box "Upstream Service"
    participant "Upstream \nService" as upstream_service
    participant "Notification \nFacade" as notification_facade
    participant "Notification \nEvent Publisher" as notification_kafka_publisher
end box

queue "'user-notifications'\n Kafka Topic" as user_notifications_kafka_topic

== Відправка повідомлення користувачу за вказаним каналом зв'язку==

activate upstream_service
  upstream_service -> notification_facade: Запит на відправку повідомлення \nза вказаним каналом зв'язку
  note left
   {
     "context": {
       "system": "Low-code Platform",
       "application": "<upstream-service>",
     },
     "notification": {
       "templateName": "{notificationTemplate}"
     },
     "recipients": [
       {
          "id": "<user id - optional>",
          "channels": [
            {
              "channel": "email",
              "email": "<Email користувача>"
            }
          ],
          "parameters": [
            {
                "key": "<key>",
                "value": "<value>"
            }
          ]
       }
     ]
   }
  end note
  activate notification_facade
    notification_facade -> notification_kafka_publisher: Відправка \nповідомлення
    activate notification_kafka_publisher
      notification_kafka_publisher -> user_notifications_kafka_topic: Публікація запиту на \nвідправку повідомлення
      user_notifications_kafka_topic - -> notification_kafka_publisher
      notification_kafka_publisher - -> notification_facade
    deactivate notification_kafka_publisher
    notification_facade - -> upstream_service
  deactivate notification_facade
deactivate upstream_service
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>