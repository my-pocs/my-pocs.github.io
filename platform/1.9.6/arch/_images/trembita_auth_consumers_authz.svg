<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2278px" preserveAspectRatio="none" style="width:2077px;height:2278px;background:#FFFFFF;" version="1.1" viewBox="0 0 2077 2278" width="2077px" zoomAndPan="magnify"><defs><filter height="300%" id="fcxclq11bnfos" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="756" x="657.25" y="28.708">Розмежування прав на ініціювання бізнес-процесу між зовнішніми клієнтами</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="92" x2="92" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="402.5" x2="402.5" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="578" x2="578" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="723" x2="723" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="844" x2="844" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="969.5" x2="969.5" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1360" x2="1360" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1630.5" x2="1630.5" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1884.5" x2="1884.5" y1="123.25" y2="2194.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2000.5" x2="2000.5" y1="123.25" y2="2194.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="5" y="119.9482">Розробник регламенту</text><ellipse cx="92.5" cy="49.9531" fill="#FEFECE" filter="url(#fcxclq11bnfos)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M92.5,57.9531 L92.5,84.9531 M79.5,65.9531 L105.5,65.9531 M92.5,84.9531 L79.5,99.9531 M92.5,84.9531 L105.5,99.9531 " fill="none" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="5" y="2206.2686">Розробник регламенту</text><ellipse cx="92.5" cy="2219.5703" fill="#FEFECE" filter="url(#fcxclq11bnfos)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M92.5,2227.5703 L92.5,2254.5703 M79.5,2235.5703 L105.5,2235.5703 M92.5,2254.5703 L79.5,2269.5703 M92.5,2254.5703 L105.5,2269.5703 " fill="none" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="100" x="350.5" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="367.5" y="91.6514">Сховище</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="357.5" y="107.9482">регламенту</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="100" x="350.5" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="367.5" y="2213.2686">Сховище</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="357.5" y="2229.5654">регламенту</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="123" x="515" y="55.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="541" y="75.3545">Пайплайн</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="522" y="91.6514">публікацій змін</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="522" y="107.9482">до регламенту</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="123" x="515" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="541" y="2213.2686">Пайплайн</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="522" y="2229.5654">публікацій змін</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="522" y="2245.8623">до регламенту</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="139" x="652" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="659" y="107.9482">Keycloak-operator</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="139" x="652" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="659" y="2213.2686">Keycloak-operator</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="805" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="812" y="107.9482">Keycloak</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="805" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="812" y="2213.2686">Keycloak</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="82" x="926.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="933.5" y="107.9482">OpenShift</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="82" x="926.5" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="933.5" y="2213.2686">OpenShift</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="163" x="1277" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1306.5" y="91.6514">Сервіс вхідних</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="1284" y="107.9482">зовнішніх інтеграцій</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="163" x="1277" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1306.5" y="2213.2686">Сервіс вхідних</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="1284" y="2229.5654">зовнішніх інтеграцій</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="142" x="1557.5" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="1564.5" y="91.6514">Сервіс виконання</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1570.5" y="107.9482">бізнес-процесів</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="142" x="1557.5" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="1564.5" y="2213.2686">Сервіс виконання</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1570.5" y="2229.5654">бізнес-процесів</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1842.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1849.5" y="107.9482">Трембіта</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1842.5" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1849.5" y="2213.2686">Трембіта</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="125" x="1936.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1943.5" y="107.9482">Фабрика даних</text><rect fill="#FEFECE" filter="url(#fcxclq11bnfos)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="125" x="1936.5" y="2193.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1943.5" y="2213.2686">Фабрика даних</text><rect fill="#EEEEEE" filter="url(#fcxclq11bnfos)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2070.5" x="0" y="153.8164"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2070.5" y1="153.8164" y2="153.8164"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2070.5" y1="156.8164" y2="156.8164"/><rect fill="#EEEEEE" filter="url(#fcxclq11bnfos)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="325" x="872.75" y="143.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="301" x="878.75" y="159.3169">Реєстрація нового зовнішнього клієнта</text><polygon fill="#A80036" points="957.5,223.7813,967.5,227.7813,957.5,231.7813,961.5,227.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="963.5" y1="227.7813" y2="227.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="585.5" y="207.5825">1.1.1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="626.5" y="192.4497">Оновлення ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261" x="626.5" y="207.5825">bp-webservice-gateway-consumers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="626.5" y="222.7153">новими зовнішнім клієнтами</text><path d="M583,240.7813 L583,310.7813 L707,310.7813 L707,250.7813 L697,240.7813 L583,240.7813 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M697,240.7813 L697,250.7813 L707,250.7813 L697,240.7813 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="589" y="257.8481">name</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="589" y="272.981">subsystemCode</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="589" y="288.1138">memberClass</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="589" y="303.2466">memberCode</text><polygon fill="#A80036" points="957.5,367.7109,967.5,371.7109,957.5,375.7109,961.5,371.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="963.5" y1="371.7109" y2="371.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="585.5" y="351.5122">1.1.2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="626.5" y="336.3794">Оновлення Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261" x="626.5" y="351.5122">bp-webservice-gateway-consumers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="626.5" y="366.645">новими зовнішнім клієнтами</text><path d="M583,384.7109 L583,409.7109 L717,409.7109 L717,394.7109 L707,384.7109 L583,384.7109 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M707,384.7109 L707,394.7109 L717,394.7109 L707,384.7109 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="589" y="401.7778">«</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="41" x="597" y="401.7778">name</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="638" y="401.7778">»: пароль</text><polygon fill="#A80036" points="1348.5,435.9766,1358.5,439.9766,1348.5,443.9766,1352.5,439.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="1354.5" y1="439.9766" y2="439.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="585.5" y="434.9106">1.1.3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="626.5" y="434.9106">Рестарт сервісу</text><polygon fill="#A80036" points="980.5,495.375,970.5,499.375,980.5,503.375,976.5,499.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="974.5" x2="1359.5" y1="499.375" y2="499.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="986.5" y="479.1763">1.1.4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="1027.5" y="464.0435">Читання конфігурацій</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="1027.5" y="479.1763">з ConfigMap та Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261" x="1027.5" y="494.3091">bp-webservice-gateway-consumers</text><rect fill="#EEEEEE" filter="url(#fcxclq11bnfos)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2070.5" x="0" y="527.9414"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2070.5" y1="527.9414" y2="527.9414"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2070.5" y1="530.9414" y2="530.9414"/><rect fill="#EEEEEE" filter="url(#fcxclq11bnfos)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="526" x="772.25" y="517.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="507" x="778.25" y="533.4419">Надання прав для ініціювання бізнес-процесу зовнішнім клієнтом</text><polygon fill="#A80036" points="390.5,582.7734,400.5,586.7734,390.5,590.7734,394.5,586.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="396.5" y1="586.7734" y2="586.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="99.5" y="574.1411">1.2.1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="140.5" y="566.5747">Оновлення файлу</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="212" x="140.5" y="581.7075">bp-auth/external-system.yml</text><path d="M97,599.7734 L97,639.7734 L230,639.7734 L230,609.7734 L220,599.7734 L97,599.7734 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M220,599.7734 L220,609.7734 L230,609.7734 L220,599.7734 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="103" y="616.8403">process definition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="103" y="631.9731">role</text><polygon fill="#A80036" points="413.5,681.3047,403.5,685.3047,413.5,689.3047,409.5,685.3047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="407.5" x2="577.5" y1="685.3047" y2="685.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="419.5" y="672.6724">1.2.2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="460.5" y="665.106">Отримання</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="460.5" y="680.2388">змін регламенту</text><path d="M475,698.3047 L475,723.3047 L677,723.3047 L677,708.3047 L667,698.3047 L475,698.3047 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M667,698.3047 L667,708.3047 L677,708.3047 L667,698.3047 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="481" y="715.3716">Інші кроки з публікації змін</text><polygon fill="#A80036" points="1618.5,779.8359,1628.5,783.8359,1618.5,787.8359,1622.5,783.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="1624.5" y1="783.8359" y2="783.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="585.5" y="763.6372">1.2.3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="626.5" y="748.5044">Оновлення авторизаційних</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="626.5" y="763.6372">правил для ролей</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="626.5" y="778.77">зовнішніх клієнтов</text><rect fill="#EEEEEE" filter="url(#fcxclq11bnfos)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2070.5" x="0" y="812.4023"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2070.5" y1="812.4023" y2="812.4023"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2070.5" y1="815.4023" y2="815.4023"/><rect fill="#EEEEEE" filter="url(#fcxclq11bnfos)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="475" x="797.75" y="801.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="456" x="803.75" y="817.9028">Реєстрація бізнес-процесу для запуску зовнішнім клієнтом</text><polygon fill="#A80036" points="390.5,867.2344,400.5,871.2344,390.5,875.2344,394.5,871.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="396.5" y1="871.2344" y2="871.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="99.5" y="858.6021">1.3.1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="140.5" y="851.0356">Оновлення файлу</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="245" x="140.5" y="866.1685">trembita/business-processes.yml</text><path d="M97,884.2344 L97,939.2344 L230,939.2344 L230,894.2344 L220,884.2344 L97,884.2344 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M220,884.2344 L220,894.2344 L230,894.2344 L220,884.2344 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="103" y="901.3013">process definition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="103" y="916.4341">start vars</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="103" y="931.5669">return vars</text><polygon fill="#A80036" points="413.5,980.8984,403.5,984.8984,413.5,988.8984,409.5,984.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="407.5" x2="577.5" y1="984.8984" y2="984.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="419.5" y="972.2661">1.3.2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="460.5" y="964.6997">Отримання</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="460.5" y="979.8325">змін регламенту</text><path d="M475,997.8984 L475,1022.8984 L677,1022.8984 L677,1007.8984 L667,997.8984 L475,997.8984 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M667,997.8984 L667,1007.8984 L677,1007.8984 L667,997.8984 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="481" y="1014.9653">Інші кроки з публікації змін</text><polygon fill="#A80036" points="957.5,1064.2969,967.5,1068.2969,957.5,1072.2969,961.5,1068.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="963.5" y1="1068.2969" y2="1068.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="585.5" y="1055.6646">1.3.3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="626.5" y="1048.0981">Оновлення ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="326" x="626.5" y="1063.231">bp-webservice-gateway-business-processes</text><path d="M583,1081.2969 L583,1136.2969 L716,1136.2969 L716,1091.2969 L706,1081.2969 L583,1081.2969 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M706,1081.2969 L706,1091.2969 L716,1091.2969 L706,1081.2969 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="589" y="1098.3638">process definition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="589" y="1113.4966">start vars</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="589" y="1128.6294">return vars</text><polygon fill="#A80036" points="1348.5,1162.8281,1358.5,1166.8281,1348.5,1170.8281,1352.5,1166.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578.5" x2="1354.5" y1="1166.8281" y2="1166.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="585.5" y="1161.7622">1.3.4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="626.5" y="1161.7622">Рестарт сервісу</text><polygon fill="#A80036" points="980.5,1207.0938,970.5,1211.0938,980.5,1215.0938,976.5,1211.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="974.5" x2="1359.5" y1="1211.0938" y2="1211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="986.5" y="1198.4614">1.3.5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="1027.5" y="1190.895">Читання конфігурацій з ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="326" x="1027.5" y="1206.0278">bp-webservice-gateway-business-processes</text><rect fill="#EEEEEE" filter="url(#fcxclq11bnfos)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2070.5" x="0" y="1239.6602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2070.5" y1="1239.6602" y2="1239.6602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2070.5" y1="1242.6602" y2="1242.6602"/><rect fill="#EEEEEE" filter="url(#fcxclq11bnfos)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="345" x="862.75" y="1229.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="326" x="868.75" y="1245.1606">Запуск бізнес-процесу зовнішнім клієнтом</text><polygon fill="#A80036" points="1371.5,1309.625,1361.5,1313.625,1371.5,1317.625,1367.5,1313.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1365.5" x2="1883.5" y1="1313.625" y2="1313.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="1377.5" y="1293.4263">2.1.1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="1418.5" y="1278.2935">Запит на</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1418.5" y="1293.4263">ініціювання</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1418.5" y="1308.5591">бізнес-процесу</text><path d="M1742,1326.625 L1742,1411.625 L1875,1411.625 L1875,1336.625 L1865,1326.625 L1742,1326.625 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1865,1326.625 L1865,1336.625 L1875,1336.625 L1865,1326.625 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="1748" y="1343.6919">process definition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="1748" y="1358.8247">start vars values</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="1748" y="1373.9575">subsystemCode</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="1748" y="1389.0903">memberClass</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1748" y="1404.2231">memberCode</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1360.5" x2="1402.5" y1="1457.5547" y2="1457.5547"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1402.5" x2="1402.5" y1="1457.5547" y2="1470.5547"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1361.5" x2="1402.5" y1="1470.5547" y2="1470.5547"/><polygon fill="#A80036" points="1371.5,1466.5547,1361.5,1470.5547,1371.5,1474.5547,1367.5,1470.5547" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="1367.5" y="1444.9224">2.1.2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="1408.5" y="1437.356">Валідація</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71" x="1478.5" y="1437.356">start vars</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1408.5" y="1452.4888">та</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="133" x="1429.5" y="1452.4888">process definition</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1360.5" x2="1402.5" y1="1529.9531" y2="1529.9531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1402.5" x2="1402.5" y1="1529.9531" y2="1542.9531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1361.5" x2="1402.5" y1="1542.9531" y2="1542.9531"/><polygon fill="#A80036" points="1371.5,1538.9531,1361.5,1542.9531,1371.5,1546.9531,1367.5,1542.9531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="1367.5" y="1509.7544">2.1.3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1408.5" y="1494.6216">Пошук зареєстрованого</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="1408.5" y="1509.7544">зовнішнього клієнту та</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="1408.5" y="1524.8872">паролю в конфігурації</text><path d="M1132,1555.9531 L1132,1640.9531 L1351,1640.9531 L1351,1565.9531 L1341,1555.9531 L1132,1555.9531 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1341,1555.9531 L1341,1565.9531 L1351,1565.9531 L1341,1555.9531 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="1138" y="1573.02">Отримання</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="118" x="1218" y="1573.02">consumer-name</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1138" y="1588.1528">та паролю за</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="1138" y="1603.2856">subsystemCode</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="1138" y="1618.4185">memberClass</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1138" y="1633.5513">memberCode</text><polygon fill="#A80036" points="855.5,1667.75,845.5,1671.75,855.5,1675.75,851.5,1671.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="849.5" x2="1359.5" y1="1671.75" y2="1671.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="861.5" y="1666.6841">2.1.4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="339" x="902.5" y="1666.6841">Отримання токену за consumer-name та паролем</text><path d="M1146,1684.75 L1146,1709.75 L1351,1709.75 L1351,1694.75 L1341,1684.75 L1146,1684.75 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1341,1684.75 L1341,1694.75 L1351,1694.75 L1341,1684.75 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="1152" y="1701.8169">auth flow = client credentials</text><polygon fill="#A80036" points="1348.5,1736.0156,1358.5,1740.0156,1348.5,1744.0156,1352.5,1740.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="844.5" x2="1354.5" y1="1740.0156" y2="1740.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="851.5" y="1734.9497">2.1.5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="892.5" y="1734.9497">accessToken</text><polygon fill="#A80036" points="1618.5,1780.2813,1628.5,1784.2813,1618.5,1788.2813,1622.5,1784.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1360.5" x2="1624.5" y1="1784.2813" y2="1784.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="1367.5" y="1771.6489">2.1.6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1408.5" y="1764.0825">Запуск бізнес-процесу</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="115" x="1408.5" y="1779.2153">X-Access-Token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="1523.5" y="1779.2153">: accessToken</text><path d="M1365,1797.2813 L1365,1852.2813 L1498,1852.2813 L1498,1807.2813 L1488,1797.2813 L1365,1797.2813 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1488,1797.2813 L1488,1807.2813 L1498,1807.2813 L1488,1797.2813 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="1371" y="1814.3481">process definition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="1371" y="1829.481">start vars values</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1371" y="1844.6138">access token</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1630.5" x2="1672.5" y1="1913.0781" y2="1913.0781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1672.5" x2="1672.5" y1="1913.0781" y2="1926.0781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1631.5" x2="1672.5" y1="1926.0781" y2="1926.0781"/><polygon fill="#A80036" points="1641.5,1922.0781,1631.5,1926.0781,1641.5,1930.0781,1637.5,1926.0781" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="1637.5" y="1892.8794">2.1.7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="1678.5" y="1877.7466">Перевірка</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="1678.5" y="1892.8794">авторизаційних правил</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="1678.5" y="1908.0122">для ролі зовнішнього клієнту</text><polygon fill="#A80036" points="1989,1966.3438,1999,1970.3438,1989,1974.3438,1993,1970.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1630.5" x2="1995" y1="1970.3438" y2="1970.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="1637.5" y="1957.7114">2.1.8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="1678.5" y="1950.145">Виклик фабрики даних</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="115" x="1678.5" y="1965.2778">X-Access-Token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="1793.5" y="1965.2778">: accessToken</text><path d="M1453,1983.3438 L1453,2008.3438 L1804,2008.3438 L1804,1993.3438 L1794,1983.3438 L1453,1983.3438 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1794,1983.3438 L1794,1993.3438 L1804,1993.3438 L1794,1983.3438 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="330" x="1459" y="2000.4106">Виконання інших кроків в рамках бізнес-процесу</text><polygon fill="#A80036" points="1371.5,2034.6094,1361.5,2038.6094,1371.5,2042.6094,1367.5,2038.6094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1365.5" x2="1629.5" y1="2038.6094" y2="2038.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="37" x="1377.5" y="2033.5435">2.1.9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="1418.5" y="2033.5435">Завершення бізнес-процесу</text><path d="M1485,2051.6094 L1485,2076.6094 L1621,2076.6094 L1621,2061.6094 L1611,2051.6094 L1485,2051.6094 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1611,2051.6094 L1611,2061.6094 L1621,2061.6094 L1611,2051.6094 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1491" y="2068.6763">return vars values</text><polygon fill="#A80036" points="1872.5,2133.1406,1882.5,2137.1406,1872.5,2141.1406,1876.5,2137.1406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1360.5" x2="1878.5" y1="2137.1406" y2="2137.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="46" x="1367.5" y="2116.9419">2.1.10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="1417.5" y="2101.8091">Відповідь</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="1417.5" y="2116.9419">про успішне виконання</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1417.5" y="2132.0747">бізнес-процесу</text><path d="M1365,2150.1406 L1365,2175.1406 L1501,2175.1406 L1501,2160.1406 L1491,2150.1406 L1365,2150.1406 " fill="#FBFB77" filter="url(#fcxclq11bnfos)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1491,2150.1406 L1491,2160.1406 L1501,2160.1406 L1491,2150.1406 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1371" y="2167.2075">return vars values</text><!--MD5=[f328e5b66be8299e2060ca58842daf17]
@startuml
actor "Розробник регламенту" as dev
participant "Сховище\nрегламенту" as gerrit
participant "Пайплайн\nпублікацій змін\nдо регламенту" as pipe
participant "Keycloak-operator" as keycloak_operator
participant "Keycloak" as keycloak
participant "OpenShift" as openshift
participant "Сервіс вхідних\nзовнішніх інтеграцій" as gateway
participant "Сервіс виконання\nбізнес-процесів"  as bpms
participant "Трембіта" as trembita
participant "Фабрика даних" as data_factory

autonumber 1.1.1

title Розмежування прав на ініціювання бізнес-процесу між зовнішніми клієнтами

== Реєстрація нового зовнішнього клієнта  ==

pipe -> openshift : Оновлення ConfigMap\n**bp-webservice-gateway-consumers**\nновими зовнішнім клієнтами
note right of pipe
name
subsystemCode
memberClass
memberCode
end note
pipe -> openshift : Оновлення Secret\n**bp-webservice-gateway-consumers**\nновими зовнішнім клієнтами
note right of pipe
<<**name**>>: пароль
end note
pipe -> gateway : Рестарт сервісу
gateway -> openshift : Читання конфігурацій\nз ConfigMap та Secret\n**bp-webservice-gateway-consumers**

== Надання прав для ініціювання бізнес-процесу зовнішнім клієнтом ==
autonumber inc B
dev -> gerrit : Оновлення файлу\n**bp-auth/external-system.yml**
note right of dev
process definition
role
end note
pipe -> gerrit : Отримання\nзмін регламенту
note over pipe : Інші кроки з публікації змін
pipe -> bpms : Оновлення авторизаційних\nправил для ролей\nзовнішніх клієнтов

== Реєстрація бізнес-процесу для запуску зовнішнім клієнтом ==
autonumber inc B
dev -> gerrit : Оновлення файлу\n**trembita/business-processes.yml**
note right of dev
process definition
start vars
return vars
end note
pipe -> gerrit : Отримання\nзмін регламенту
note over pipe : Інші кроки з публікації змін
pipe -> openshift : Оновлення ConfigMap \n**bp-webservice-gateway-business-processes**
note right of pipe
process definition
start vars
return vars
end note
pipe -> gateway : Рестарт сервісу
gateway -> openshift : Читання конфігурацій з ConfigMap\n**bp-webservice-gateway-business-processes**

== Запуск бізнес-процесу зовнішнім клієнтом ==
autonumber inc A
trembita -> gateway : Запит на\nініціювання\nбізнес-процесу
note left of trembita
process definition
start vars values
subsystemCode
memberClass
memberCode
end note
gateway -> gateway : Валідація **start vars**\nта **process definition**
gateway -> gateway : Пошук зареєстрованого\nзовнішнього клієнту та\nпаролю в конфігурації
note left of gateway
Отримання **consumer-name**
та паролю за
subsystemCode
memberClass
memberCode
end note
gateway -> keycloak : Отримання токену за consumer-name та паролем
note left of gateway
auth flow = client credentials
end note
keycloak - -> gateway : accessToken
gateway -> bpms: Запуск бізнес-процесу \n**X-Access-Token**: accessToken
note right of gateway
process definition
start vars values
access token
end note
bpms -> bpms : Перевірка\nавторизаційних правил\nдля ролі зовнішнього клієнту
bpms -> data_factory : Виклик фабрики даних \n**X-Access-Token**: accessToken
note over bpms
Виконання інших кроків в рамках бізнес-процесу
end note
bpms - -> gateway : Завершення бізнес-процесу
note left of bpms
return vars values
end note
gateway - -> trembita : Відповідь\nпро успішне виконання\nбізнес-процесу
note right of gateway
return vars values
end note
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>