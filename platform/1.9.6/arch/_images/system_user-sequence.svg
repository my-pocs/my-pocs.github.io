<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="525px" preserveAspectRatio="none" style="width:610px;height:525px;background:#FFFFFF;" version="1.1" viewBox="0 0 610 525" width="610px" zoomAndPan="magnify"><defs><filter height="300%" id="fwz1dib10sv6f" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="383.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="79" y="56.2969"/><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="109.2031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="385" y="85.4297"/><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="385" y="398.5625"/><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="541.5" y="240.8984"/><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="364.3984" style="stroke:#000000;stroke-width:2.0;" width="593" x="3" y="100.4297"/><rect fill="#FFFFFF" height="289" style="stroke:none;stroke-width:1.0;" width="593" x="3" y="175.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="84" x2="84" y1="40.2969" y2="481.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="390" x2="390" y1="40.2969" y2="481.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="546" x2="546" y1="40.2969" y2="481.8281"/><rect fill="#FEFECE" filter="url(#fwz1dib10sv6f)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="112" x="26" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="33" y="24.9951">system_user()</text><rect fill="#FEFECE" filter="url(#fwz1dib10sv6f)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="112" x="26" y="480.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="33" y="500.8232">system_user()</text><rect fill="#FEFECE" filter="url(#fwz1dib10sv6f)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="210" x="283" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="290" y="24.9951">Camunda Execution Context</text><rect fill="#FEFECE" filter="url(#fwz1dib10sv6f)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="210" x="283" y="480.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="290" y="500.8232">Camunda Execution Context</text><rect fill="#FEFECE" filter="url(#fwz1dib10sv6f)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="507" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="514" y="24.9951">Keycloak</text><rect fill="#FEFECE" filter="url(#fwz1dib10sv6f)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="507" y="480.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="514" y="500.8232">Keycloak</text><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="383.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="79" y="56.2969"/><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="109.2031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="385" y="85.4297"/><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="385" y="398.5625"/><rect fill="#FFFFFF" filter="url(#fwz1dib10sv6f)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="541.5" y="240.8984"/><polygon fill="#A80036" points="67,52.2969,77,56.2969,67,60.2969,71,56.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="0" x2="73" y1="56.2969" y2="56.2969"/><polygon fill="#A80036" points="373,81.4297,383,85.4297,373,89.4297,377,85.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="379" y1="85.4297" y2="85.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="96" y="80.3638">Отримати існуючий UserDto об'єкт</text><path d="M3,100.4297 L67,100.4297 L67,107.4297 L57,117.4297 L3,117.4297 L3,100.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="364.3984" style="stroke:#000000;stroke-width:2.0;" width="593" x="3" y="100.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="18" y="113.4966">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="173" x="82" y="112.6401">[Об'єкт UserDto знайдено]</text><polygon fill="#A80036" points="100,117.5625,90,121.5625,100,125.5625,96,121.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="384" y1="121.5625" y2="121.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="106" y="134.6294">Знайдений об'єкт UserDto</text><polygon fill="#A80036" points="11,146.6953,1,150.6953,11,154.6953,7,150.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="78" y1="150.6953" y2="150.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="17" y="163.7622">UserDto</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3" x2="596" y1="176.8281" y2="176.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="193" x="8" y="187.0386">[Об'єкт UserDto не знайдено]</text><polygon fill="#A80036" points="100,190.6328,90,194.6328,100,198.6328,96,194.6328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="389" y1="194.6328" y2="194.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="106" y="207.6997">null</text><polygon fill="#A80036" points="529.5,236.8984,539.5,240.8984,529.5,244.8984,533.5,240.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="535.5" y1="240.8984" y2="240.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="96" y="235.8325">Отримати токен системного користувача</text><polygon fill="#A80036" points="100,248.8984,90,252.8984,100,256.8984,96,252.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="545.5" y1="252.8984" y2="252.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="106" y="265.9653">токен системного користувача</text><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="131" y1="299.1641" y2="299.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="131" x2="131" y1="299.1641" y2="312.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="90" x2="131" y1="312.1641" y2="312.1641"/><polygon fill="#A80036" points="100,308.1641,90,312.1641,100,316.1641,96,312.1641" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="96" y="294.0981">Парсинг токена системного користувача</text><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="131" y1="341.2969" y2="341.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="131" x2="131" y1="341.2969" y2="354.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="90" x2="131" y1="354.2969" y2="354.2969"/><polygon fill="#A80036" points="100,350.2969,90,354.2969,100,358.2969,96,354.2969" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="96" y="336.231">Збудувати об'єкт UserDto</text><polygon fill="#A80036" points="373,394.5625,383,398.5625,373,402.5625,377,398.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="379" y1="398.5625" y2="398.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="96" y="378.3638">Зберегти UserDto об'єкт у контексті</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="96" y="393.4966">у якості transient змінної</text><polygon fill="#A80036" points="100,406.5625,90,410.5625,100,414.5625,96,410.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="389" y1="410.5625" y2="410.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="106" y="423.6294">Збережено</text><polygon fill="#A80036" points="11,435.6953,1,439.6953,11,443.6953,7,439.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="83" y1="439.6953" y2="439.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="17" y="452.7622">UserDto</text><!--MD5=[dc0e9f0b93b9dd40a4c53ba267c6ab01]
@startuml
skinparam responseMessageBelowArrow true

  participant "system_user()" as system_user order 10
  participant "Camunda Execution Context" as camunda order 20
  participant "Keycloak" as keycloak order 30

  -> system_user
  activate system_user

  system_user -> camunda : Отримати існуючий UserDto об'єкт
  activate camunda

  alt Об'єкт UserDto знайдено
    system_user <- - camunda : Знайдений об'єкт UserDto
    <- - system_user : UserDto

  else Об'єкт UserDto не знайдено
    system_user <- - camunda : null
    deactivate camunda

    system_user -> keycloak : Отримати токен системного користувача
      activate keycloak
      system_user <- - keycloak : токен системного користувача
      deactivate keycloak

    system_user -> system_user : Парсинг токена системного користувача
    system_user -> system_user : Збудувати об'єкт UserDto

    system_user -> camunda : Зберегти UserDto об'єкт у контексті \nу якості transient змінної
      activate camunda
      system_user <- - camunda : Збережено
      deactivate camunda

      <- - system_user : UserDto
      deactivate system_user
  end
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>