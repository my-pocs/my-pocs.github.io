<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1992px" preserveAspectRatio="none" style="width:1748px;height:1992px;background:#FFFFFF;" version="1.1" viewBox="0 0 1748 1992" width="1748px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="460" x="1271.5" y="1400.7422"/><rect fill="#FFFFFF" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="234" x="1271.5" y="1490.1406"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="50" x2="50" y1="84.2969" y2="1910.6016"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="391" x2="391" y1="84.2969" y2="1910.6016"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="867.5" x2="867.5" y1="84.2969" y2="1910.6016"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="982.5" x2="982.5" y1="84.2969" y2="1910.6016"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1338.5" x2="1338.5" y1="84.2969" y2="1910.6016"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1666.5" x2="1666.5" y1="84.2969" y2="1910.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="5" y="80.9951">Користувач</text><ellipse cx="50.5" cy="15" fill="#FFFFFF" rx="8" ry="8" style="stroke:#2688D4;stroke-width:2.0;"/><path d="M50.5,23 L50.5,50 M37.5,31 L63.5,31 M50.5,50 L37.5,65 M50.5,50 L63.5,65 " fill="none" style="stroke:#2688D4;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="5" y="1922.5967">Користувач</text><ellipse cx="50.5" cy="1935.8984" fill="#FFFFFF" rx="8" ry="8" style="stroke:#2688D4;stroke-width:2.0;"/><path d="M50.5,1943.8984 L50.5,1970.8984 M37.5,1951.8984 L63.5,1951.8984 M50.5,1970.8984 L37.5,1985.8984 M50.5,1970.8984 L63.5,1985.8984 " fill="none" style="stroke:#2688D4;stroke-width:2.0;"/><rect fill="#FFFFFF" height="30.2969" style="stroke:#2688D4;stroke-width:1.5;" width="167" x="308" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="315" y="72.9951">Kaбінет Користувача</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#2688D4;stroke-width:1.5;" width="167" x="308" y="1909.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="315" y="1929.5967">Kaбінет Користувача</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#2688D4;stroke-width:1.5;" width="138" x="798.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="805.5" y="72.9951">Kong API Gateway</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#2688D4;stroke-width:1.5;" width="138" x="798.5" y="1909.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="805.5" y="1929.5967">Kong API Gateway</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#2688D4;stroke-width:1.5;" width="54" x="955.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="962.5" y="72.9951">BPMS</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#2688D4;stroke-width:1.5;" width="54" x="955.5" y="1909.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="962.5" y="1929.5967">BPMS</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="114" x="1281.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1315" y="56.6982">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1292.5" y="72.9951">налаштувань</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="114" x="1281.5" y="1909.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1315" y="1929.5967">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1292.5" y="1945.8936">налаштувань</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="110" x="1611.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="1655.5" y="56.6982">БД</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1618.5" y="72.9951">налаштувань</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="110" x="1611.5" y="1909.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="1655.5" y="1929.5967">БД</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1618.5" y="1945.8936">налаштувань</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1741.5" x="0" y="114.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="114.8633" y2="114.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="117.8633" y2="117.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="433" x="654.25" y="104.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="414" x="660.25" y="120.3638">Отримання користувачем налаштувань через кабінет</text><polygon fill="#2688D4" points="379.5,154.5625,389.5,158.5625,379.5,162.5625,383.5,158.5625" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="50.5" x2="385.5" y1="158.5625" y2="158.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="57.5" y="153.4966">Запит налаштувань</text><polygon fill="#2688D4" points="855.5,198.8281,865.5,202.8281,855.5,206.8281,859.5,202.8281" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="391.5" x2="861.5" y1="202.8281" y2="202.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="398.5" y="182.6294">Запит</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="154" x="444.5" y="182.6294">GET /api/settings/me</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="602.5" y="182.6294"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="398.5" y="197.7622">Параметри: ID сесії</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="867.5" x2="909.5" y1="231.9609" y2="231.9609"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="909.5" x2="909.5" y1="231.9609" y2="244.9609"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="868.5" x2="909.5" y1="244.9609" y2="244.9609"/><polygon fill="#2688D4" points="878.5,240.9609,868.5,244.9609,878.5,248.9609,874.5,244.9609" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="874.5" y="226.895">Перевірка сесії</text><polygon fill="#2688D4" points="1326.5,285.2266,1336.5,289.2266,1326.5,293.2266,1330.5,289.2266" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="867.5" x2="1332.5" y1="289.2266" y2="289.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="874.5" y="269.0278">Запит</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="154" x="920.5" y="269.0278">GET /api/settings/me</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1078.5" y="269.0278"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="874.5" y="284.1606">з X-Access-Token</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1380.5" y1="333.4922" y2="333.4922"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1380.5" x2="1380.5" y1="333.4922" y2="346.4922"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1339.5" x2="1380.5" y1="346.4922" y2="346.4922"/><polygon fill="#2688D4" points="1349.5,342.4922,1339.5,346.4922,1349.5,350.4922,1345.5,346.4922" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1345.5" y="313.2935">Отримання id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="1345.5" y="328.4263">користувача з токена</text><polygon fill="#2688D4" points="1654.5,386.7578,1664.5,390.7578,1654.5,394.7578,1658.5,390.7578" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1660.5" y1="390.7578" y2="390.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1345.5" y="370.5591">Запит налаштувань</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="1345.5" y="385.6919">користувача</text><polygon fill="#2688D4" points="1349.5,415.8906,1339.5,419.8906,1349.5,423.8906,1345.5,419.8906" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1343.5" x2="1665.5" y1="419.8906" y2="419.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1355.5" y="414.8247">Налаштування користувача</text><polygon fill="#2688D4" points="878.5,429.8906,868.5,433.8906,878.5,437.8906,874.5,433.8906" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="872.5" x2="1337.5" y1="433.8906" y2="433.8906"/><polygon fill="#2688D4" points="402.5,443.8906,392.5,447.8906,402.5,451.8906,398.5,447.8906" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="396.5" x2="866.5" y1="447.8906" y2="447.8906"/><polygon fill="#2688D4" points="61.5,457.8906,51.5,461.8906,61.5,465.8906,57.5,461.8906" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="55.5" x2="390.5" y1="461.8906" y2="461.8906"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1741.5" x="0" y="490.457"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="490.457" y2="490.457"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="493.457" y2="493.457"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="513" x="614.25" y="479.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="494" x="620.25" y="495.9575">Отримання налаштувань користувача для нотифікації через БП</text><polygon fill="#2688D4" points="1326.5,545.2891,1336.5,549.2891,1326.5,553.2891,1330.5,549.2891" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="982.5" x2="1332.5" y1="549.2891" y2="549.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="989.5" y="529.0903">Запит з БП</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="195" x="1068.5" y="529.0903">GET /api/settings/{userId}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1267.5" y="529.0903"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="989.5" y="544.2231">з X-Access-Token</text><polygon fill="#2688D4" points="1654.5,589.5547,1664.5,593.5547,1654.5,597.5547,1658.5,593.5547" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1660.5" y1="593.5547" y2="593.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1345.5" y="573.356">Запит налаштувань</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="1345.5" y="588.4888">користувача</text><polygon fill="#2688D4" points="1349.5,618.6875,1339.5,622.6875,1349.5,626.6875,1345.5,622.6875" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1343.5" x2="1665.5" y1="622.6875" y2="622.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1355.5" y="617.6216">Налаштування користувача</text><polygon fill="#2688D4" points="993.5,632.6875,983.5,636.6875,993.5,640.6875,989.5,636.6875" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="987.5" x2="1337.5" y1="636.6875" y2="636.6875"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="982.5" x2="1024.5" y1="665.8203" y2="665.8203"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1024.5" x2="1024.5" y1="665.8203" y2="678.8203"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="983.5" x2="1024.5" y1="678.8203" y2="678.8203"/><polygon fill="#2688D4" points="993.5,674.8203,983.5,678.8203,993.5,682.8203,989.5,678.8203" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="989.5" y="660.7544">Продовження БП</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1741.5" x="0" y="707.3867"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="707.3867" y2="707.3867"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="710.3867" y2="710.3867"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="255" x="743.25" y="696.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="236" x="749.25" y="712.8872">Оновлення каналів (активація)</text><polygon fill="#2688D4" points="379.5,747.0859,389.5,751.0859,379.5,755.0859,383.5,751.0859" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="50.5" x2="385.5" y1="751.0859" y2="751.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="57.5" y="746.02">Запит на активацію / оновлення налаштувань</text><polygon fill="#2688D4" points="855.5,791.3516,865.5,795.3516,855.5,799.3516,859.5,795.3516" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="391.5" x2="861.5" y1="795.3516" y2="795.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="398.5" y="775.1528">Запит</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="378" x="449.5" y="775.1528">POST /api/settings/me/channels/{channel}/activate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="831.5" y="775.1528"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="398.5" y="790.2856">Параметри: ID сесії</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="867.5" x2="909.5" y1="824.4844" y2="824.4844"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="909.5" x2="909.5" y1="824.4844" y2="837.4844"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="868.5" x2="909.5" y1="837.4844" y2="837.4844"/><polygon fill="#2688D4" points="878.5,833.4844,868.5,837.4844,878.5,841.4844,874.5,837.4844" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="874.5" y="819.4185">Перевірка сесії</text><polygon fill="#2688D4" points="1326.5,877.75,1336.5,881.75,1326.5,885.75,1330.5,881.75" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="867.5" x2="1332.5" y1="881.75" y2="881.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="874.5" y="861.5513">Запит</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="378" x="920.5" y="861.5513">POST /api/settings/me/channels/{channel}/activate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1302.5" y="861.5513"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="874.5" y="876.6841">з X-Access-Token</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1380.5" y1="910.8828" y2="910.8828"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1380.5" x2="1380.5" y1="910.8828" y2="923.8828"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1339.5" x2="1380.5" y1="923.8828" y2="923.8828"/><polygon fill="#2688D4" points="1349.5,919.8828,1339.5,923.8828,1349.5,927.8828,1345.5,923.8828" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="1345.5" y="905.8169">Валідація даних</text><polygon fill="#2688D4" points="1654.5,949.0156,1664.5,953.0156,1654.5,957.0156,1658.5,953.0156" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1660.5" y1="953.0156" y2="953.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="1345.5" y="947.9497">Отримання поточної інформації про канал</text><polygon fill="#2688D4" points="1349.5,963.0156,1339.5,967.0156,1349.5,971.0156,1345.5,967.0156" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1343.5" x2="1665.5" y1="967.0156" y2="967.0156"/><polygon fill="#2688D4" points="1654.5,992.1484,1664.5,996.1484,1654.5,1000.1484,1658.5,996.1484" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1660.5" y1="996.1484" y2="996.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="1345.5" y="991.0825">Збереження оновленої інформації про канал</text><polygon fill="#2688D4" points="1349.5,1021.2813,1339.5,1025.2813,1349.5,1029.2813,1345.5,1025.2813" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1343.5" x2="1665.5" y1="1025.2813" y2="1025.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="1355.5" y="1020.2153">Налаштування збережені</text><polygon fill="#2688D4" points="878.5,1050.4141,868.5,1054.4141,878.5,1058.4141,874.5,1054.4141" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="872.5" x2="1337.5" y1="1054.4141" y2="1054.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="884.5" y="1049.3481">Канал активовано</text><polygon fill="#2688D4" points="402.5,1064.4141,392.5,1068.4141,402.5,1072.4141,398.5,1068.4141" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="396.5" x2="866.5" y1="1068.4141" y2="1068.4141"/><polygon fill="#2688D4" points="61.5,1078.4141,51.5,1082.4141,61.5,1086.4141,57.5,1082.4141" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="55.5" x2="390.5" y1="1082.4141" y2="1082.4141"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1741.5" x="0" y="1110.9805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="1110.9805" y2="1110.9805"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="1113.9805" y2="1113.9805"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="275" x="733.25" y="1100.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="256" x="739.25" y="1116.481">Оновлення каналів (деактивація)</text><polygon fill="#2688D4" points="379.5,1150.6797,389.5,1154.6797,379.5,1158.6797,383.5,1154.6797" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="50.5" x2="385.5" y1="1154.6797" y2="1154.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="57.5" y="1149.6138">Запит на деактивацію налаштувань</text><polygon fill="#2688D4" points="855.5,1194.9453,865.5,1198.9453,855.5,1202.9453,859.5,1198.9453" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="391.5" x2="861.5" y1="1198.9453" y2="1198.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="398.5" y="1178.7466">Запит</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="397" x="449.5" y="1178.7466">POST /api/settings/me/channels/{channel}/deactivate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="850.5" y="1178.7466"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="398.5" y="1193.8794">Параметри: ID сесії</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="867.5" x2="909.5" y1="1228.0781" y2="1228.0781"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="909.5" x2="909.5" y1="1228.0781" y2="1241.0781"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="868.5" x2="909.5" y1="1241.0781" y2="1241.0781"/><polygon fill="#2688D4" points="878.5,1237.0781,868.5,1241.0781,878.5,1245.0781,874.5,1241.0781" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="874.5" y="1223.0122">Перевірка сесії</text><polygon fill="#2688D4" points="1326.5,1281.3438,1336.5,1285.3438,1326.5,1289.3438,1330.5,1285.3438" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="867.5" x2="1332.5" y1="1285.3438" y2="1285.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="874.5" y="1265.145">Запит</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="397" x="920.5" y="1265.145">POST /api/settings/me/channels/{channel}/deactivate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1321.5" y="1265.145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="874.5" y="1280.2778">з X-Access-Token</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1380.5" y1="1329.6094" y2="1329.6094"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1380.5" x2="1380.5" y1="1329.6094" y2="1342.6094"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1339.5" x2="1380.5" y1="1342.6094" y2="1342.6094"/><polygon fill="#2688D4" points="1349.5,1338.6094,1339.5,1342.6094,1349.5,1346.6094,1345.5,1342.6094" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1345.5" y="1309.4106">Отримання id</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="1345.5" y="1324.5435">користувача з токена</text><polygon fill="#2688D4" points="1654.5,1367.7422,1664.5,1371.7422,1654.5,1375.7422,1658.5,1371.7422" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1660.5" y1="1371.7422" y2="1371.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="1345.5" y="1366.6763">Отримання інформації про канал</text><polygon fill="#2688D4" points="1349.5,1381.7422,1339.5,1385.7422,1349.5,1389.7422,1345.5,1385.7422" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1343.5" x2="1665.5" y1="1385.7422" y2="1385.7422"/><path d="M1271.5,1400.7422 L1335.5,1400.7422 L1335.5,1407.7422 L1325.5,1417.7422 L1271.5,1417.7422 L1271.5,1400.7422 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="460" x="1271.5" y="1400.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1286.5" y="1413.8091">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="115" x="1350.5" y="1412.9526">[Канал активний]</text><polygon fill="#2688D4" points="1654.5,1435.0078,1664.5,1439.0078,1654.5,1443.0078,1658.5,1439.0078" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1660.5" y1="1439.0078" y2="1439.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="1345.5" y="1433.9419">Збереження оновленої інформації про канал</text><polygon fill="#2688D4" points="1349.5,1464.1406,1339.5,1468.1406,1349.5,1472.1406,1345.5,1468.1406" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1343.5" x2="1665.5" y1="1468.1406" y2="1468.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="1355.5" y="1463.0747">Налаштування збережені</text><path d="M1271.5,1490.1406 L1335.5,1490.1406 L1335.5,1497.1406 L1325.5,1507.1406 L1271.5,1507.1406 L1271.5,1490.1406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="234" x="1271.5" y="1490.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1286.5" y="1503.2075">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="131" x="1350.5" y="1502.3511">[Канал неактивний]</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1380.5" y1="1528.4063" y2="1528.4063"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1380.5" x2="1380.5" y1="1528.4063" y2="1541.4063"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1339.5" x2="1380.5" y1="1541.4063" y2="1541.4063"/><polygon fill="#2688D4" points="1349.5,1537.4063,1339.5,1541.4063,1349.5,1545.4063,1345.5,1541.4063" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="1345.5" y="1523.3403">Не виконувати нічого</text><polygon fill="#2688D4" points="878.5,1558.4063,868.5,1562.4063,878.5,1566.4063,874.5,1562.4063" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="872.5" x2="1337.5" y1="1562.4063" y2="1562.4063"/><polygon fill="#2688D4" points="402.5,1572.4063,392.5,1576.4063,402.5,1580.4063,398.5,1576.4063" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="396.5" x2="866.5" y1="1576.4063" y2="1576.4063"/><polygon fill="#2688D4" points="61.5,1586.4063,51.5,1590.4063,61.5,1594.4063,57.5,1590.4063" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="55.5" x2="390.5" y1="1590.4063" y2="1590.4063"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1741.5" x="0" y="1618.9727"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="1618.9727" y2="1618.9727"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1741.5" y1="1621.9727" y2="1621.9727"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="234" x="753.75" y="1608.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="215" x="759.75" y="1624.4731">Первинна валідація каналів</text><polygon fill="#2688D4" points="379.5,1658.6719,389.5,1662.6719,379.5,1666.6719,383.5,1662.6719" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="50.5" x2="385.5" y1="1662.6719" y2="1662.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="57.5" y="1657.606">Запит на валідацію адреси</text><polygon fill="#2688D4" points="855.5,1702.9375,865.5,1706.9375,855.5,1710.9375,859.5,1706.9375" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="391.5" x2="861.5" y1="1706.9375" y2="1706.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="398.5" y="1686.7388">Запит</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="378" x="449.5" y="1686.7388">POST /api/settings/me/channels/{channel}/validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="831.5" y="1686.7388"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="398.5" y="1701.8716">Параметри: ID сесії</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="867.5" x2="909.5" y1="1736.0703" y2="1736.0703"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="909.5" x2="909.5" y1="1736.0703" y2="1749.0703"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="868.5" x2="909.5" y1="1749.0703" y2="1749.0703"/><polygon fill="#2688D4" points="878.5,1745.0703,868.5,1749.0703,878.5,1753.0703,874.5,1749.0703" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="874.5" y="1731.0044">Перевірка сесії</text><polygon fill="#2688D4" points="1326.5,1789.3359,1336.5,1793.3359,1326.5,1797.3359,1330.5,1793.3359" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="867.5" x2="1332.5" y1="1793.3359" y2="1793.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="874.5" y="1773.1372">Запит</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="378" x="920.5" y="1773.1372">POST /api/settings/me/channels/{channel}/validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1302.5" y="1773.1372"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="874.5" y="1788.27">з X-Access-Token</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1338.5" x2="1380.5" y1="1822.4688" y2="1822.4688"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1380.5" x2="1380.5" y1="1822.4688" y2="1835.4688"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1339.5" x2="1380.5" y1="1835.4688" y2="1835.4688"/><polygon fill="#2688D4" points="1349.5,1831.4688,1339.5,1835.4688,1349.5,1839.4688,1345.5,1835.4688" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="1345.5" y="1817.4028">Валідація даних</text><polygon fill="#2688D4" points="878.5,1860.6016,868.5,1864.6016,878.5,1868.6016,874.5,1864.6016" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="872.5" x2="1337.5" y1="1864.6016" y2="1864.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="884.5" y="1859.5356">Результат валідації</text><polygon fill="#2688D4" points="402.5,1874.6016,392.5,1878.6016,402.5,1882.6016,398.5,1878.6016" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="396.5" x2="866.5" y1="1878.6016" y2="1878.6016"/><polygon fill="#2688D4" points="61.5,1888.6016,51.5,1892.6016,61.5,1896.6016,57.5,1892.6016" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="55.5" x2="390.5" y1="1892.6016" y2="1892.6016"/><!--MD5=[efc0a0f3cdc02a2bdcb4bd9603fbf705]
@startuml
skinparam shadowing false
skinparam DatabaseBackgroundColor white
skinparam DatabaseBorderColor #2688d4
skinparam QueueBackgroundColor white
skinparam QueueBorderColor #2688d4
skinparam NoteBackgroundColor white
skinparam NoteBorderColor #2688d4
skinparam ActorBackgroundColor white
skinparam ControlBackgroundColor white
skinparam ControlBorderColor #2688d4
skinparam sequence {
    ArrowColor #2688d4
    ActorBorderColor #2688d4
    LifeLineBorderColor #2688d4
    ParticipantBorderColor #2688d4
    ParticipantBackgroundColor white
    BoxBorderColor #2688d4
    BoxBackgroundColor white
}

actor "Користувач" as person
participant "Kaбінет Користувача" as ui
participant "Kong API Gateway" as kong

participant "BPMS" as low

participant "Сервіс\n налаштувань" as settings
participant "БД\nналаштувань" as db


== Отримання користувачем налаштувань через кабінет ==
person -> ui: Запит налаштувань
ui -> kong: Запит **GET /api/settings/me** \nПараметри: ID сесії
kong -> kong: Перевірка сесії
kong -> settings: Запит **GET /api/settings/me** \nз X-Access-Token
settings -> settings: Отримання id \nкористувача з токена
settings -> db: Запит налаштувань \nкористувача
db - -> settings: Налаштування користувача
settings - -> kong
kong - -> ui
ui - -> person

== Отримання налаштувань користувача для нотифікації через БП ==
low -> settings: Запит з БП **GET /api/settings/{userId}** \nз X-Access-Token
settings -> db: Запит налаштувань \nкористувача
db - -> settings: Налаштування користувача
settings - -> low
low -> low: Продовження БП

== Оновлення каналів (активація) ==
person -> ui: Запит на активацію / оновлення налаштувань
ui -> kong: Запит ** POST /api/settings/me/channels/{channel}/activate** \nПараметри: ID сесії
kong -> kong: Перевірка сесії
kong -> settings: Запит **POST /api/settings/me/channels/{channel}/activate** \nз X-Access-Token
settings -> settings: Валідація даних
settings -> db: Отримання поточної інформації про канал
db - -> settings
settings -> db: Збереження оновленої інформації про канал
db - -> settings: Налаштування збережені
settings - -> kong: Канал активовано
kong - -> ui
ui - -> person

== Оновлення каналів (деактивація) ==
person -> ui: Запит на деактивацію налаштувань
ui -> kong: Запит ** POST /api/settings/me/channels/{channel}/deactivate** \nПараметри: ID сесії
kong -> kong: Перевірка сесії
kong -> settings: Запит **POST /api/settings/me/channels/{channel}/deactivate** \nз X-Access-Token
settings -> settings: Отримання id \nкористувача з токена
settings -> db: Отримання інформації про канал
db - -> settings
alt Канал активний
  settings -> db: Збереження оновленої інформації про канал
  db - -> settings: Налаштування збережені
end
alt Канал неактивний
  settings -> settings: Не виконувати нічого
end
settings - -> kong
kong - -> ui
ui - -> person

== Первинна валідація каналів ==
person -> ui: Запит на валідацію адреси
ui -> kong: Запит ** POST /api/settings/me/channels/{channel}/validate** \nПараметри: ID сесії
kong -> kong: Перевірка сесії
kong -> settings: Запит **POST /api/settings/me/channels/{channel}/validate** \nз X-Access-Token
settings -> settings: Валідація даних
settings - -> kong: Результат валідації
kong - -> ui
ui - -> person
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>