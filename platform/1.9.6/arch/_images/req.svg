<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1286px" preserveAspectRatio="none" style="width:1957px;height:1286px;background:#FFFFFF;" version="1.1" viewBox="0 0 1957 1286" width="1957px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="1267.8359" style="stroke:#000000;stroke-width:1.0;" width="469.5" x="356" y="6"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="42" x="569.75" y="18.0669">BPMS</text><rect fill="#FFFFFF" height="117.5313" style="stroke:#000000;stroke-width:1.0;" width="911" x="350" y="347.6563"/><rect fill="#FFFFFF" height="75.3984" style="stroke:#000000;stroke-width:1.0;" width="444.5" x="1405.5" y="883.9141"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="55" x2="55" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="249" x2="249" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="429" x2="429" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="611.5" x2="611.5" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="756.5" x2="756.5" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1023" x2="1023" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1137" x2="1137" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1213" x2="1213" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1493.5" x2="1493.5" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1794" x2="1794" y1="83.5938" y2="1192.2422"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1897" x2="1897" y1="83.5938" y2="1192.2422"/><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="71" x="20" y="52.2969"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57" x="27" y="72.292">Кабінет</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="71" x="20" y="1191.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57" x="27" y="1211.2373">Кабінет</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#000000;stroke-width:1.0;" width="171" x="164" y="36"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="157" x="171" y="55.9951">Сервіс завантаження</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="82" x="210.5" y="72.292">документів</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#000000;stroke-width:1.0;" width="171" x="164" y="1191.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="157" x="171" y="1211.2373">Сервіс завантаження</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="82" x="210.5" y="1227.5342">документів</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="119" x="370" y="52.2969"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="105" x="377" y="72.292">Бізнес процес</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="119" x="370" y="1191.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="105" x="377" y="1211.2373">Бізнес процес</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="120" x="551.5" y="52.2969"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="102" x="558.5" y="72.292">Kafka делегат</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="120" x="551.5" y="1191.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="102" x="558.5" y="1211.2373">Kafka делегат</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="110" x="701.5" y="52.2969"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96" x="708.5" y="72.292">Kafka Listener</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="110" x="701.5" y="1191.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96" x="708.5" y="1211.2373">Kafka Listener</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="131" x="958" y="52.2969"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="117" x="965" y="72.292">Registry Rest API</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="131" x="958" y="1191.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="117" x="965" y="1211.2373">Registry Rest API</text><path d="M1114,57.2969 L1161,57.2969 C1166,57.2969 1166,70.4453 1166,70.4453 C1166,70.4453 1166,83.5938 1161,83.5938 L1114,83.5938 C1109,83.5938 1109,70.4453 1109,70.4453 C1109,70.4453 1109,57.2969 1114,57.2969 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1161,57.2969 C1156,57.2969 1156,70.4453 1156,70.4453 C1156,83.5938 1161,83.5938 1161,83.5938 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="37" x="1114" y="75.292">Kafka</text><path d="M1114,1191.2422 L1161,1191.2422 C1166,1191.2422 1166,1204.3906 1166,1204.3906 C1166,1204.3906 1166,1217.5391 1161,1217.5391 L1114,1217.5391 C1109,1217.5391 1109,1204.3906 1109,1204.3906 C1109,1204.3906 1109,1191.2422 1114,1191.2422 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1161,1191.2422 C1156,1191.2422 1156,1204.3906 1156,1204.3906 C1156,1217.5391 1161,1217.5391 1161,1217.5391 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="37" x="1114" y="1209.2373">Kafka</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="51" x="1190" y="48.2969"/><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="51" x="1186" y="52.2969"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="37" x="1193" y="72.292">Ceph</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="51" x="1190" y="1191.2422"/><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="51" x="1186" y="1195.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="37" x="1193" y="1215.2373">Ceph</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="136" x="1425.5" y="52.2969"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="122" x="1432.5" y="72.292">Registry Kafka API</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="136" x="1425.5" y="1191.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="122" x="1432.5" y="1211.2373">Registry Kafka API</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="85" x="1749" y="63.9951">Операційна</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80" x="1751.5" y="80.292">база даних</text><path d="M1776.5,15 C1776.5,5 1794.5,5 1794.5,5 C1794.5,5 1812.5,5 1812.5,15 L1812.5,41 C1812.5,51 1794.5,51 1794.5,51 C1794.5,51 1776.5,51 1776.5,41 L1776.5,15 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><path d="M1776.5,15 C1776.5,25 1794.5,25 1794.5,25 C1794.5,25 1812.5,25 1812.5,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="85" x="1749" y="1204.2373">Операційна</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80" x="1751.5" y="1220.5342">база даних</text><path d="M1776.5,1233.8359 C1776.5,1223.8359 1794.5,1223.8359 1794.5,1223.8359 C1794.5,1223.8359 1812.5,1223.8359 1812.5,1233.8359 L1812.5,1259.8359 C1812.5,1269.8359 1794.5,1269.8359 1794.5,1269.8359 C1794.5,1269.8359 1776.5,1269.8359 1776.5,1259.8359 L1776.5,1233.8359 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><path d="M1776.5,1233.8359 C1776.5,1243.8359 1794.5,1243.8359 1794.5,1243.8359 C1794.5,1243.8359 1812.5,1243.8359 1812.5,1233.8359 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="75" x="1860" y="52.2969"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61" x="1867" y="72.292">Keycloak</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.0;" width="75" x="1860" y="1191.2422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61" x="1867" y="1211.2373">Keycloak</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1945" x="5" y="114.1602"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1950" y1="114.1602" y2="114.1602"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1950" y1="117.1602" y2="117.1602"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1.0;" width="171" x="892" y="103.5938"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152" x="898" y="119.6606">Збереження файлів</text><polygon fill="#000000" points="237.5,153.8594,247.5,157.8594,237.5,161.8594,241.5,157.8594" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="55.5" x2="243.5" y1="157.8594" y2="157.8594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146" x="62.5" y="152.7935">завантаження файлу</text><polygon fill="#000000" points="1011.5,182.9922,1021.5,186.9922,1011.5,190.9922,1015.5,186.9922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="249.5" x2="1017.5" y1="186.9922" y2="186.9922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="524" x="256.5" y="181.9263">валідація вмісту файлу по відношенню до структури та кількості сутностей</text><polygon fill="#000000" points="260.5,212.125,250.5,216.125,260.5,220.125,256.5,216.125" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254.5" x2="1022.5" y1="216.125" y2="216.125"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184" x="266.5" y="211.0591">структура та вміст валідні</text><polygon fill="#000000" points="1201.5,241.2578,1211.5,245.2578,1201.5,249.2578,1205.5,245.2578" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="249.5" x2="1207.5" y1="245.2578" y2="245.2578"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161" x="256.5" y="240.1919">збереження документу</text><polygon fill="#000000" points="260.5,270.3906,250.5,274.3906,260.5,278.3906,256.5,274.3906" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254.5" x2="1212.5" y1="274.3906" y2="274.3906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="163" x="266.5" y="269.3247">документ завантажено</text><polygon fill="#000000" points="66.5,299.5234,56.5,303.5234,66.5,307.5234,62.5,303.5234" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="248.5" y1="303.5234" y2="303.5234"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170" x="72.5" y="298.4575">ключ ceph до документу</text><polygon fill="#000000" points="417.5,328.6563,427.5,332.6563,417.5,336.6563,421.5,332.6563" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="55.5" x2="423.5" y1="332.6563" y2="332.6563"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="230" x="62.5" y="327.5903">відправка форми з ключем файлу</text><path d="M350,347.6563 L505,347.6563 L505,354.6563 L495,364.6563 L350,364.6563 L350,347.6563 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="117.5313" style="stroke:#000000;stroke-width:1.0;" width="911" x="350" y="347.6563"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110" x="365" y="360.7231">опційний крок</text><line style="stroke:#000000;stroke-width:1.0;" x1="429.5" x2="471.5" y1="385.9219" y2="385.9219"/><line style="stroke:#000000;stroke-width:1.0;" x1="471.5" x2="471.5" y1="385.9219" y2="398.9219"/><line style="stroke:#000000;stroke-width:1.0;" x1="430.5" x2="471.5" y1="398.9219" y2="398.9219"/><polygon fill="#000000" points="440.5,394.9219,430.5,398.9219,440.5,402.9219,436.5,398.9219" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168" x="436.5" y="380.856">перетворення csv файлу</text><polygon fill="#000000" points="1201.5,424.0547,1211.5,428.0547,1201.5,432.0547,1205.5,428.0547" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="429.5" x2="1207.5" y1="428.0547" y2="428.0547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="226" x="436.5" y="422.9888">збереження результату обробки</text><polygon fill="#000000" points="440.5,453.1875,430.5,457.1875,440.5,461.1875,436.5,457.1875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="434.5" x2="1212.5" y1="457.1875" y2="457.1875"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="35" x="446.5" y="452.1216">ключ</text><polygon fill="#000000" points="599.5,489.3203,609.5,493.3203,599.5,497.3203,603.5,493.3203" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="429.5" x2="605.5" y1="493.3203" y2="493.3203"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134" x="436.5" y="488.2544">формування запиту</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1945" x="5" y="521.8867"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1950" y1="521.8867" y2="521.8867"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1950" y1="524.8867" y2="524.8867"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1.0;" width="179" x="888" y="511.3203"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="160" x="894" y="527.3872">Завантаження даних</text><polygon fill="#000000" points="1125.5,576.7188,1135.5,580.7188,1125.5,584.7188,1129.5,580.7188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="611.5" x2="1131.5" y1="580.7188" y2="580.7188"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198" x="618.5" y="560.52">повідомлення завантаження</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187" x="622.5" y="575.6528">[вхідна черга повідомлень]</text><polygon fill="#000000" points="1148.5,605.8516,1138.5,609.8516,1148.5,613.8516,1144.5,609.8516" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1142.5" x2="1492.5" y1="609.8516" y2="609.8516"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="278" x="1154.5" y="604.7856">отримання запиту на збереження файлу</text><polygon fill="#000000" points="1885.5,634.9844,1895.5,638.9844,1885.5,642.9844,1889.5,638.9844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1493.5" x2="1891.5" y1="638.9844" y2="638.9844"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="311" x="1500.5" y="633.9185">отримання сертифікату для валідації токену</text><polygon fill="#000000" points="1504.5,664.1172,1494.5,668.1172,1504.5,672.1172,1500.5,668.1172" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1498.5" x2="1896.5" y1="668.1172" y2="668.1172"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156" x="1510.5" y="663.0513">публічний сертифікату</text><line style="stroke:#000000;stroke-width:1.0;" x1="1493.5" x2="1535.5" y1="697.25" y2="697.25"/><line style="stroke:#000000;stroke-width:1.0;" x1="1535.5" x2="1535.5" y1="697.25" y2="710.25"/><line style="stroke:#000000;stroke-width:1.0;" x1="1494.5" x2="1535.5" y1="710.25" y2="710.25"/><polygon fill="#000000" points="1504.5,706.25,1494.5,710.25,1504.5,714.25,1500.5,710.25" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117" x="1500.5" y="692.1841">валідація токену</text><polygon fill="#000000" points="1224.5,735.3828,1214.5,739.3828,1224.5,743.3828,1220.5,739.3828" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1218.5" x2="1492.5" y1="739.3828" y2="739.3828"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146" x="1230.5" y="734.3169">завантаження файлу</text><polygon fill="#000000" points="1481.5,764.5156,1491.5,768.5156,1481.5,772.5156,1485.5,768.5156" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1213.5" x2="1487.5" y1="768.5156" y2="768.5156"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117" x="1220.5" y="763.4497">файл за данними</text><line style="stroke:#000000;stroke-width:1.0;" x1="1493.5" x2="1535.5" y1="812.7813" y2="812.7813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1535.5" x2="1535.5" y1="812.7813" y2="825.7813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1494.5" x2="1535.5" y1="825.7813" y2="825.7813"/><polygon fill="#000000" points="1504.5,821.7813,1494.5,825.7813,1504.5,829.7813,1500.5,825.7813" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="287" x="1500.5" y="792.5825">валідація вмісту файлу по відношенню до</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="233" x="1500.5" y="807.7153">структури та кількості сутностей</text><polygon fill="#000000" points="1224.5,850.9141,1214.5,854.9141,1224.5,858.9141,1220.5,854.9141" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1218.5" x2="1492.5" y1="854.9141" y2="854.9141"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="256" x="1230.5" y="849.8481">збереження файлу в окреме сховище</text><polygon fill="#000000" points="1481.5,864.9141,1491.5,868.9141,1481.5,872.9141,1485.5,868.9141" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1213.5" x2="1487.5" y1="868.9141" y2="868.9141"/><path d="M1405.5,883.9141 L1493.5,883.9141 L1493.5,890.9141 L1483.5,900.9141 L1405.5,900.9141 L1405.5,883.9141 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.0;" width="444.5" x="1405.5" y="883.9141"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="1420.5" y="896.981">цикл</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95" x="1508.5" y="896.1245">[кожен рядок]</text><polygon fill="#000000" points="1782.5,918.1797,1792.5,922.1797,1782.5,926.1797,1786.5,922.1797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1493.5" x2="1788.5" y1="922.1797" y2="922.1797"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="232" x="1500.5" y="917.1138">збереження відповідним сервісом</text><polygon fill="#000000" points="1504.5,947.3125,1494.5,951.3125,1504.5,955.3125,1500.5,951.3125" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1498.5" x2="1793.5" y1="951.3125" y2="951.3125"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159" x="1510.5" y="946.2466">результат збереження</text><line style="stroke:#000000;stroke-width:1.0;" x1="1493.5" x2="1535.5" y1="987.4453" y2="987.4453"/><line style="stroke:#000000;stroke-width:1.0;" x1="1535.5" x2="1535.5" y1="987.4453" y2="1000.4453"/><line style="stroke:#000000;stroke-width:1.0;" x1="1494.5" x2="1535.5" y1="1000.4453" y2="1000.4453"/><polygon fill="#000000" points="1504.5,996.4453,1494.5,1000.4453,1504.5,1004.4453,1500.5,1000.4453" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="1500.5" y="982.3794">формування відповіді</text><polygon fill="#000000" points="1148.5,1040.7109,1138.5,1044.7109,1148.5,1048.7109,1144.5,1044.7109" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1142.5" x2="1492.5" y1="1044.7109" y2="1044.7109"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="258" x="1154.5" y="1024.5122">повідомлення з результатом обробки</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195" x="1158.5" y="1039.645">[вихідна черга повідомлень]</text><polygon fill="#000000" points="1125.5,1054.7109,1135.5,1058.7109,1125.5,1062.7109,1129.5,1058.7109" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="756.5" x2="1131.5" y1="1058.7109" y2="1058.7109"/><line style="stroke:#000000;stroke-width:1.0;" x1="756.5" x2="798.5" y1="1102.9766" y2="1102.9766"/><line style="stroke:#000000;stroke-width:1.0;" x1="798.5" x2="798.5" y1="1102.9766" y2="1115.9766"/><line style="stroke:#000000;stroke-width:1.0;" x1="757.5" x2="798.5" y1="1115.9766" y2="1115.9766"/><polygon fill="#000000" points="767.5,1111.9766,757.5,1115.9766,767.5,1119.9766,763.5,1115.9766" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144" x="763.5" y="1082.7778">кореляція з запитом,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249" x="767.5" y="1097.9106">формування події згідно зі статусом</text><polygon fill="#000000" points="440.5,1141.1094,430.5,1145.1094,440.5,1149.1094,436.5,1145.1094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="434.5" x2="755.5" y1="1145.1094" y2="1145.1094"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120" x="446.5" y="1140.0435">формування події</text><polygon fill="#000000" points="66.5,1170.2422,56.5,1174.2422,66.5,1178.2422,62.5,1174.2422" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="428.5" y1="1174.2422" y2="1174.2422"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168" x="72.5" y="1169.1763">результат опрацювання</text><!--MD5=[9ec66c1a79d41b6310d7ecb27ed87052]
@startuml
!theme plain
participant "Кабінет" as portal
participant "Сервіс завантаження\n документів" as dds
box "BPMS" #LightBlue
participant "Бізнес процес" as bpms
participant "Kafka делегат " as delegate
participant "Kafka Listener" as listener
end box
participant "Registry Rest API" as restApi
queue "Kafka" as kafka
collections "Ceph" as ceph
participant "Registry Kafka API" as kafkaApi
database "Операційна\nбаза даних" as db
participant "Keycloak" as keycloak

== Збереження файлів ==
portal -> dds: завантаження файлу
dds -> restApi: валідація вмісту файлу по відношенню до структури та кількості сутностей
return структура та вміст валідні
dds -> ceph: збереження документу
return документ завантажено
dds - -> portal: ключ ceph до документу
portal -> bpms: відправка форми з ключем файлу
group опційний крок
bpms -> bpms: перетворення csv файлу
bpms -> ceph: збереження результату обробки
return ключ
end
bpms -> delegate: формування запиту

== Завантаження даних ==
delegate -> kafka: повідомлення завантаження \n [вхідна черга повідомлень]
kafkaApi -> kafka: отримання запиту на збереження файлу
kafkaApi -> keycloak: отримання сертифікату для валідації токену
return публічний сертифікату
kafkaApi -> kafkaApi: валідація токену
kafkaApi -> ceph: завантаження файлу
return файл за данними
kafkaApi -> kafkaApi: валідація вмісту файлу по відношенню до\nструктури та кількості сутностей
kafkaApi -> ceph: збереження файлу в окреме сховище
return
group цикл [кожен рядок]
kafkaApi -> db: збереження відповідним сервісом
return результат збереження
end
kafkaApi -> kafkaApi: формування відповіді
kafkaApi - -> kafka: повідомлення з результатом обробки \n [вихідна черга повідомлень]
listener -> kafka
listener -> listener: кореляція з запитом,\n формування події згідно зі статусом
listener -> bpms: формування події
bpms - -> portal: результат опрацювання
@enduml

@startuml







<style>
  root {
    BackgroundColor white
    FontColor black
    FontName Verdana
    HyperLinkColor blue
    LineColor black
    LineThickness 1
    Margin 5
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  header {
    LineThickness 0
  }
  node {
    MaximumWidth 300
  }
  title {
    FontSize 22
    LineThickness 0
  }
</style>

skinparam ArrowLollipopColor black
skinparam BackgroundColor white
skinparam DefaultFontName Verdana
skinparam DefaultMonospacedFontName Courier
skinparam LifelineStrategy nosolid
skinparam ParticipantPadding 10
skinparam SequenceLifeLineBorderColor black
skinparam Shadowing false
skinparam UseBetaStyle true

skinparam Activity {
  BackgroundColor white
  BarColor black
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam Boundary {
  FontColor black
}
skinparam Box {
  Padding 5
}
skinparam CircledCharacter {
  FontColor black
  FontName Courier
  Radius 9
}
skinparam Class {
  BackgroundColor white
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam ClassAttribute {
  FontColor black
  FontName Verdana
}
skinparam ClassStereotype {
  FontColor black
  FontName Verdana
}
skinparam Footer {
  FontColor black
  FontName Verdana
}
skinparam Header {
  FontColor black
  FontName Verdana
}
skinparam Hyperlink {
  Color blue
}
skinparam IconPackage {
  Color black
  BackgroundColor white
}
skinparam IconPrivate {
  Color black
  BackgroundColor white
}
skinparam IconProtected {
  Color black
  BackgroundColor white
}
skinparam IconPublic {
  Color black
  BackgroundColor white
}
skinparam Note {
  FontColor black
  FontName Verdana
}
skinparam Package {
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam State {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeA {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeC {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeE {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeI {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeN {
  BackgroundColor white
  BorderColor black
}
skinparam UseCaseStereoType {
  FontColor black
  FontName Verdana
}
participant "Кабінет" as portal
participant "Сервіс завантаження\n документів" as dds
box "BPMS" #LightBlue
participant "Бізнес процес" as bpms
participant "Kafka делегат " as delegate
participant "Kafka Listener" as listener
end box
participant "Registry Rest API" as restApi
queue "Kafka" as kafka
collections "Ceph" as ceph
participant "Registry Kafka API" as kafkaApi
database "Операційна\nбаза даних" as db
participant "Keycloak" as keycloak

== Збереження файлів ==
portal -> dds: завантаження файлу
dds -> restApi: валідація вмісту файлу по відношенню до структури та кількості сутностей
return структура та вміст валідні
dds -> ceph: збереження документу
return документ завантажено
dds - -> portal: ключ ceph до документу
portal -> bpms: відправка форми з ключем файлу
group опційний крок
bpms -> bpms: перетворення csv файлу
bpms -> ceph: збереження результату обробки
return ключ
end
bpms -> delegate: формування запиту

== Завантаження даних ==
delegate -> kafka: повідомлення завантаження \n [вхідна черга повідомлень]
kafkaApi -> kafka: отримання запиту на збереження файлу
kafkaApi -> keycloak: отримання сертифікату для валідації токену
return публічний сертифікату
kafkaApi -> kafkaApi: валідація токену
kafkaApi -> ceph: завантаження файлу
return файл за данними
kafkaApi -> kafkaApi: валідація вмісту файлу по відношенню до\nструктури та кількості сутностей
kafkaApi -> ceph: збереження файлу в окреме сховище
return
group цикл [кожен рядок]
kafkaApi -> db: збереження відповідним сервісом
return результат збереження
end
kafkaApi -> kafkaApi: формування відповіді
kafkaApi - -> kafka: повідомлення з результатом обробки \n [вихідна черга повідомлень]
listener -> kafka
listener -> listener: кореляція з запитом,\n формування події згідно зі статусом
listener -> bpms: формування події
bpms - -> portal: результат опрацювання
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>