<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3125px" preserveAspectRatio="none" style="width:2175px;height:3125px;background:#FFFFFF;" version="1.1" viewBox="0 0 2175 3125" width="2175px" zoomAndPan="magnify"><defs><filter height="300%" id="f1n0vzhijeavlk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="500" x="834.25" y="28.708">Сценарії взаємодії з сервісом цифрових документів</text><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1402.9063" style="stroke:#383838;stroke-width:1.0;" width="10" x="350.5" y="186.7656"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1330.5078" style="stroke:#383838;stroke-width:1.0;" width="10" x="350.5" y="1683.7266"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1284.1094" style="stroke:#383838;stroke-width:1.0;" width="10" x="807.5" y="276.4297"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1241.9766" style="stroke:#383838;stroke-width:1.0;" width="10" x="807.5" y="1743.125"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1108.0469" style="stroke:#383838;stroke-width:1.0;" width="10" x="1264.5" y="423.3594"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1096.1797" style="stroke:#383838;stroke-width:1.0;" width="10" x="1264.5" y="1859.7891"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="1358.5" x="10" y="681.2891"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="1358.5" x="10" y="1076.6797"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="1358.5" x="10" y="2117.7188"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="1358.5" x="10" y="2513.1094"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="71" x2="71" y1="107.8438" y2="3049.3672"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="355" x2="355" y1="107.8438" y2="3049.3672"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="812.5" x2="812.5" y1="107.8438" y2="3049.3672"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1269.5" x2="1269.5" y1="107.8438" y2="3049.3672"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1750.5" x2="1750.5" y1="107.8438" y2="3049.3672"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1880.5" x2="1880.5" y1="107.8438" y2="3049.3672"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2053.5" x2="2053.5" y1="107.8438" y2="3049.3672"/><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="99" x="20" y="72.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="27" y="92.542">Користувач</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="99" x="20" y="3048.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="27" y="3068.3623">Користувач</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="175" x="266" y="56.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="275" y="76.2451">Клієнтський додаток</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="277" y="92.542">кабінету користувача</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="175" x="266" y="3048.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="275" y="3068.3623">Клієнтський додаток</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="277" y="3084.6592">кабінету користувача</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="130" x="745.5" y="56.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="790.5" y="76.2451">Kong</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="752.5" y="92.542">API Management</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="130" x="745.5" y="3048.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="790.5" y="3068.3623">Kong</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="752.5" y="3084.6592">API Management</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="174" x="1180.5" y="56.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1242" y="76.2451">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="1187.5" y="92.542">цифрових документів</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="174" x="1180.5" y="3048.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1242" y="3068.3623">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="1187.5" y="3084.6592">цифрових документів</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="62.8906" style="stroke:#383838;stroke-width:1.5;" width="130" x="1683.5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1723" y="59.9482">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1708" y="76.2451">виконання</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1690.5" y="92.542">бізнес-процесів</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="62.8906" style="stroke:#383838;stroke-width:1.5;" width="130" x="1683.5" y="3048.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1723" y="3068.3623">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1708" y="3084.6592">виконання</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1690.5" y="3100.9561">бізнес-процесів</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="62.8906" style="stroke:#383838;stroke-width:1.5;" width="102" x="1827.5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1853" y="59.9482">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1834.5" y="76.2451">мета-даних</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="1849" y="92.542">UI-форм</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="62.8906" style="stroke:#383838;stroke-width:1.5;" width="102" x="1827.5" y="3048.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1853" y="3068.3623">Сервіс</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1834.5" y="3084.6592">мета-даних</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="1849" y="3100.9561">UI-форм</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="216" x="1943.5" y="56.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="1962" y="76.2451">Об'єктне сховище Ceph</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="1950.5" y="92.542">(бакет: lowcode-file-storage)</text><rect fill="#F8F8F8" filter="url(#f1n0vzhijeavlk)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="216" x="1943.5" y="3048.3672"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="1962" y="3068.3623">Об'єктне сховище Ceph</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="1950.5" y="3084.6592">(бакет: lowcode-file-storage)</text><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1402.9063" style="stroke:#383838;stroke-width:1.0;" width="10" x="350.5" y="186.7656"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1330.5078" style="stroke:#383838;stroke-width:1.0;" width="10" x="350.5" y="1683.7266"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1284.1094" style="stroke:#383838;stroke-width:1.0;" width="10" x="807.5" y="276.4297"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1241.9766" style="stroke:#383838;stroke-width:1.0;" width="10" x="807.5" y="1743.125"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1108.0469" style="stroke:#383838;stroke-width:1.0;" width="10" x="1264.5" y="423.3594"/><rect fill="#FFFFFF" filter="url(#f1n0vzhijeavlk)" height="1096.1797" style="stroke:#383838;stroke-width:1.0;" width="10" x="1264.5" y="1859.7891"/><rect fill="#EEEEEE" filter="url(#f1n0vzhijeavlk)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2168.5" x="0" y="140.7383"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2168.5" y1="140.7383" y2="140.7383"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2168.5" y1="143.7383" y2="143.7383"/><rect fill="#EEEEEE" filter="url(#f1n0vzhijeavlk)" height="27.7891" style="stroke:#000000;stroke-width:2.0;" width="290" x="939.25" y="127.8438"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="276" x="945.25" y="147.6235">Завантаження документу =</text><polygon fill="#383838" points="338.5,182.7656,348.5,186.7656,338.5,190.7656,342.5,186.7656" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="71.5" x2="344.5" y1="186.7656" y2="186.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="78.5" y="181.6997">Завантаження цифрового документа</text><polygon fill="#383838" points="795.5,272.4297,805.5,276.4297,795.5,280.4297,799.5,276.4297" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="360.5" x2="801.5" y1="276.4297" y2="276.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="367.5" y="210.8325">Запит на завантаження файлу:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="402" x="367.5" y="225.9653">POST "/documents/{processInstanceId}/{taskId}/{fieldName}"</text><ellipse cx="373" cy="236.6641" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="378.5" y="241.0981">Ідентифікатор сесії Kong;</text><ellipse cx="373" cy="251.7969" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="378.5" y="256.231">Мета-атрибути файлу;</text><ellipse cx="373" cy="266.9297" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="378.5" y="271.3638">Бінарний контент файлу;</text><line style="stroke:#383838;stroke-width:1.0;" x1="817.5" x2="859.5" y1="320.6953" y2="320.6953"/><line style="stroke:#383838;stroke-width:1.0;" x1="859.5" x2="859.5" y1="320.6953" y2="333.6953"/><line style="stroke:#383838;stroke-width:1.0;" x1="818.5" x2="859.5" y1="333.6953" y2="333.6953"/><polygon fill="#383838" points="828.5,329.6953,818.5,333.6953,828.5,337.6953,824.5,333.6953" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="824.5" y="300.4966">Перевірка наявності сесії</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="824.5" y="315.6294">автентифікованого користувача</text><polygon fill="#383838" points="1252.5,419.3594,1262.5,423.3594,1252.5,427.3594,1256.5,423.3594" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="817.5" x2="1258.5" y1="423.3594" y2="423.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="824.5" y="357.7622">Запит на завантаження файлу:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="402" x="824.5" y="372.895">POST "/documents/{processInstanceId}/{taskId}/{fieldName}"</text><ellipse cx="830" cy="383.5938" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="835.5" y="388.0278">X-Access-Token;</text><ellipse cx="830" cy="398.7266" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="835.5" y="403.1606">Мета-атрибути файлу;</text><ellipse cx="830" cy="413.8594" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="835.5" y="418.2935">Бінарний контент файлу;</text><polygon fill="#383838" points="1738.5,448.4922,1748.5,452.4922,1738.5,456.4922,1742.5,452.4922" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1744.5" y1="452.4922" y2="452.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278" x="1281.5" y="447.4263">Отримання даних про задачу за {taskId}</text><polygon fill="#383838" points="1285.5,460.4922,1275.5,464.4922,1285.5,468.4922,1281.5,464.4922" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1279.5" x2="1749.5" y1="464.4922" y2="464.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1291.5" y="477.5591">&lt;task, processInstanceId, formKey&gt;</text><polygon fill="#383838" points="1738.5,506.7578,1748.5,510.7578,1738.5,514.7578,1742.5,510.7578" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1744.5" y1="510.7578" y2="510.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="398" x="1281.5" y="505.6919">Отримання даних про стан процесу за {processInstanceId}</text><polygon fill="#383838" points="1285.5,518.7578,1275.5,522.7578,1285.5,526.7578,1281.5,522.7578" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1279.5" x2="1749.5" y1="522.7578" y2="522.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="1291.5" y="535.8247">&lt;process&gt;</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="569.0234" y2="569.0234"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="569.0234" y2="582.0234"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="582.0234" y2="582.0234"/><polygon fill="#383838" points="1285.5,578.0234,1275.5,582.0234,1285.5,586.0234,1281.5,582.0234" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="1281.5" y="563.9575">Перевірка, що задача належить вказаному процесу</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="611.1563" y2="611.1563"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="611.1563" y2="624.1563"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="624.1563" y2="624.1563"/><polygon fill="#383838" points="1285.5,620.1563,1275.5,624.1563,1285.5,628.1563,1281.5,624.1563" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="1281.5" y="606.0903">Перевірка, що процес в AСTIVE стані</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="653.2891" y2="653.2891"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="653.2891" y2="666.2891"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="666.2891" y2="666.2891"/><polygon fill="#383838" points="1285.5,662.2891,1275.5,666.2891,1285.5,670.2891,1281.5,666.2891" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="1281.5" y="648.2231">Перевірка, що користувач є assignee задачі</text><path d="M10,681.2891 L74,681.2891 L74,688.2891 L64,698.2891 L10,698.2891 L10,681.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="1358.5" x="10" y="681.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="694.356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146" x="89" y="693.4995">[Помилка авторизації]</text><polygon fill="#383838" points="371.5,698.4219,361.5,702.4219,371.5,706.4219,367.5,702.4219" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="365.5" x2="1263.5" y1="702.4219" y2="702.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="377.5" y="715.4888">403</text><polygon fill="#383838" points="82.5,727.5547,72.5,731.5547,82.5,735.5547,78.5,731.5547" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76.5" x2="349.5" y1="731.5547" y2="731.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="88.5" y="744.6216">Передача управління</text><polygon fill="#383838" points="1868.5,780.8203,1878.5,784.8203,1868.5,788.8203,1872.5,784.8203" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1874.5" y1="784.8203" y2="784.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="1281.5" y="779.7544">Запит на отримання мета-даних UI-форми за {formKey}</text><path d="M1279,797.8203 L1279,988.8203 L1524,988.8203 L1524,807.8203 L1514,797.8203 L1279,797.8203 " fill="#EBEBEB" filter="url(#f1n0vzhijeavlk)" style="stroke:#383838;stroke-width:1.0;"/><path d="M1514,797.8203 L1514,807.8203 L1524,807.8203 L1514,797.8203 " fill="#EBEBEB" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1285" y="814.8872">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="1293" y="830.02">"components": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1301" y="845.1528">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="1309" y="860.2856">"label": "&lt;file_property_label&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1309" y="875.4185">"storage": "url",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="1309" y="890.5513">"key": "&lt;file_property_name&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1309" y="905.6841">"type": "file",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="1309" y="920.8169">"url": "/documents",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="1309" y="935.9497">"input": true</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1301" y="951.0825">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1293" y="966.2153">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1285" y="981.3481">}</text><polygon fill="#383838" points="1285.5,998.4141,1275.5,1002.4141,1285.5,1006.4141,1281.5,1002.4141" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1279.5" x2="1879.5" y1="1002.4141" y2="1002.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1291.5" y="1015.481">JSON-документ опису UI-форми</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="1048.6797" y2="1048.6797"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="1048.6797" y2="1061.6797"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="1061.6797" y2="1061.6797"/><polygon fill="#383838" points="1285.5,1057.6797,1275.5,1061.6797,1285.5,1065.6797,1281.5,1061.6797" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="402" x="1281.5" y="1043.6138">Пошук опису поля за key={fieldName} в мета-даних форми</text><path d="M10,1076.6797 L74,1076.6797 L74,1083.6797 L64,1093.6797 L10,1093.6797 L10,1076.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="1358.5" x="10" y="1076.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="1089.7466">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="414" x="89" y="1088.8901">[Опис поля з key={fieldName} не знайдено для форми задачі]</text><polygon fill="#383838" points="371.5,1093.8125,361.5,1097.8125,371.5,1101.8125,367.5,1097.8125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="365.5" x2="1263.5" y1="1097.8125" y2="1097.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="377.5" y="1110.8794">403: Доступ заборонено</text><polygon fill="#383838" points="82.5,1122.9453,72.5,1126.9453,82.5,1130.9453,78.5,1126.9453" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76.5" x2="349.5" y1="1126.9453" y2="1126.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="88.5" y="1140.0122">Передача управління</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="1180.2109" y2="1180.2109"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="1180.2109" y2="1193.2109"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="1193.2109" y2="1193.2109"/><polygon fill="#383838" points="1285.5,1189.2109,1275.5,1193.2109,1285.5,1197.2109,1281.5,1193.2109" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="1281.5" y="1175.145">Валідація документа</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="1222.3438" y2="1222.3438"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="1222.3438" y2="1235.3438"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="1235.3438" y2="1235.3438"/><polygon fill="#383838" points="1285.5,1231.3438,1275.5,1235.3438,1285.5,1239.3438,1281.5,1235.3438" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="418" x="1281.5" y="1217.2778">Визначення ім'я, типу та розміру файлу &lt;filename, type, size&gt;</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="1264.4766" y2="1264.4766"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="1264.4766" y2="1277.4766"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="1277.4766" y2="1277.4766"/><polygon fill="#383838" points="1285.5,1273.4766,1275.5,1277.4766,1285.5,1281.4766,1281.5,1277.4766" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="1281.5" y="1259.4106">Зчитати бінарний контент файлу</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="1306.6094" y2="1306.6094"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="1306.6094" y2="1319.6094"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="1319.6094" y2="1319.6094"/><polygon fill="#383838" points="1285.5,1315.6094,1275.5,1319.6094,1285.5,1323.6094,1281.5,1319.6094" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="325" x="1281.5" y="1301.5435">Згенерувати геш файлу за SHA256 алгоритмом</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="1348.7422" y2="1348.7422"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="1348.7422" y2="1361.7422"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="1361.7422" y2="1361.7422"/><polygon fill="#383838" points="1285.5,1357.7422,1275.5,1361.7422,1285.5,1365.7422,1281.5,1361.7422" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="393" x="1281.5" y="1343.6763">Згенерувати id документу для збержеення у мета-даних</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="1390.875" y2="1390.875"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="1390.875" y2="1403.875"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="1403.875" y2="1403.875"/><polygon fill="#383838" points="1285.5,1399.875,1275.5,1403.875,1285.5,1407.875,1281.5,1403.875" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="457" x="1281.5" y="1385.8091">Згенерувати ключ Ceph-об'єкта на базі {processInstanceId} та {id}</text><polygon fill="#383838" points="2041.5,1444.1406,2051.5,1448.1406,2041.5,1452.1406,2045.5,1448.1406" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="2047.5" y1="1448.1406" y2="1448.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="1281.5" y="1427.9419">Створити Ceph об'єкт цифрового документа:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="1281.5" y="1443.0747">putObject(bucketName, key, input, metadata)</text><polygon fill="#383838" points="1285.5,1456.1406,1275.5,1460.1406,1285.5,1464.1406,1281.5,1460.1406" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1279.5" x2="2052.5" y1="1460.1406" y2="1460.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1291.5" y="1473.2075">Результат виконання операції</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="1506.4063" y2="1506.4063"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="1506.4063" y2="1519.4063"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="1519.4063" y2="1519.4063"/><polygon fill="#383838" points="1285.5,1515.4063,1275.5,1519.4063,1285.5,1523.4063,1281.5,1519.4063" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="420" x="1281.5" y="1501.3403">Підготовка відповіді з мета-даними збереженого документу</text><polygon fill="#383838" points="828.5,1527.4063,818.5,1531.4063,828.5,1535.4063,824.5,1531.4063" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="822.5" x2="1268.5" y1="1531.4063" y2="1531.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="834.5" y="1544.4731">200 OK: &lt;id, url, name, size, type, checksum&gt;</text><polygon fill="#383838" points="371.5,1556.5391,361.5,1560.5391,371.5,1564.5391,367.5,1560.5391" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="365.5" x2="811.5" y1="1560.5391" y2="1560.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="377.5" y="1573.606">200 OK: &lt;id, url, name, size, type, checksum&gt;</text><polygon fill="#383838" points="82.5,1585.6719,72.5,1589.6719,82.5,1593.6719,78.5,1589.6719" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76.5" x2="354.5" y1="1589.6719" y2="1589.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="88.5" y="1602.7388">Передача управління</text><rect fill="#EEEEEE" filter="url(#f1n0vzhijeavlk)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2168.5" x="0" y="1637.6992"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2168.5" y1="1637.6992" y2="1637.6992"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2168.5" y1="1640.6992" y2="1640.6992"/><rect fill="#EEEEEE" filter="url(#f1n0vzhijeavlk)" height="27.7891" style="stroke:#000000;stroke-width:2.0;" width="292" x="938.25" y="1624.8047"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="278" x="944.25" y="1644.5845">Вивантаження документу =</text><polygon fill="#383838" points="338.5,1679.7266,348.5,1683.7266,338.5,1687.7266,342.5,1683.7266" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="71.5" x2="344.5" y1="1683.7266" y2="1683.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="78.5" y="1678.6606">Вивантаження цифрового документа</text><polygon fill="#383838" points="795.5,1739.125,805.5,1743.125,795.5,1747.125,799.5,1743.125" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="360.5" x2="801.5" y1="1743.125" y2="1743.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="367.5" y="1707.7935">Запит на вивантаження файлу:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="424" x="367.5" y="1722.9263">GET "/documents/{processInstanceId}/{taskId}/{fieldName}/{id}"</text><ellipse cx="373" cy="1733.625" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="378.5" y="1738.0591">Ідентифікатор сесії Kong;</text><line style="stroke:#383838;stroke-width:1.0;" x1="817.5" x2="859.5" y1="1787.3906" y2="1787.3906"/><line style="stroke:#383838;stroke-width:1.0;" x1="859.5" x2="859.5" y1="1787.3906" y2="1800.3906"/><line style="stroke:#383838;stroke-width:1.0;" x1="818.5" x2="859.5" y1="1800.3906" y2="1800.3906"/><polygon fill="#383838" points="828.5,1796.3906,818.5,1800.3906,828.5,1804.3906,824.5,1800.3906" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="824.5" y="1767.1919">Перевірка наявності сесії</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="824.5" y="1782.3247">автентифікованого користувача</text><polygon fill="#383838" points="1252.5,1855.7891,1262.5,1859.7891,1252.5,1863.7891,1256.5,1859.7891" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="817.5" x2="1258.5" y1="1859.7891" y2="1859.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="824.5" y="1824.4575">Запит на вивантаження файлу:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="424" x="824.5" y="1839.5903">GET "/documents/{processInstanceId}/{taskId}/{fieldName}/{id}"</text><ellipse cx="830" cy="1850.2891" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="835.5" y="1854.7231">X-Access-Token;</text><polygon fill="#383838" points="1738.5,1884.9219,1748.5,1888.9219,1738.5,1892.9219,1742.5,1888.9219" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1744.5" y1="1888.9219" y2="1888.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278" x="1281.5" y="1883.856">Отримання даних про задачу за {taskId}</text><polygon fill="#383838" points="1285.5,1896.9219,1275.5,1900.9219,1285.5,1904.9219,1281.5,1900.9219" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1279.5" x2="1749.5" y1="1900.9219" y2="1900.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1291.5" y="1913.9888">&lt;task, processInstanceId, formKey&gt;</text><polygon fill="#383838" points="1738.5,1943.1875,1748.5,1947.1875,1738.5,1951.1875,1742.5,1947.1875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1744.5" y1="1947.1875" y2="1947.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="398" x="1281.5" y="1942.1216">Отримання даних про стан процесу за {processInstanceId}</text><polygon fill="#383838" points="1285.5,1955.1875,1275.5,1959.1875,1285.5,1963.1875,1281.5,1959.1875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1279.5" x2="1749.5" y1="1959.1875" y2="1959.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="1291.5" y="1972.2544">&lt;process&gt;</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2005.4531" y2="2005.4531"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2005.4531" y2="2018.4531"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2018.4531" y2="2018.4531"/><polygon fill="#383838" points="1285.5,2014.4531,1275.5,2018.4531,1285.5,2022.4531,1281.5,2018.4531" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="1281.5" y="2000.3872">Перевірка, що задача належить вказаному процесу</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2047.5859" y2="2047.5859"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2047.5859" y2="2060.5859"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2060.5859" y2="2060.5859"/><polygon fill="#383838" points="1285.5,2056.5859,1275.5,2060.5859,1285.5,2064.5859,1281.5,2060.5859" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="1281.5" y="2042.52">Перевірка, що процес в AСTIVE стані</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2089.7188" y2="2089.7188"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2089.7188" y2="2102.7188"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2102.7188" y2="2102.7188"/><polygon fill="#383838" points="1285.5,2098.7188,1275.5,2102.7188,1285.5,2106.7188,1281.5,2102.7188" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="1281.5" y="2084.6528">Перевірка, що користувач є assignee задачі</text><path d="M10,2117.7188 L74,2117.7188 L74,2124.7188 L64,2134.7188 L10,2134.7188 L10,2117.7188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="1358.5" x="10" y="2117.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="2130.7856">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146" x="89" y="2129.9292">[Помилка авторизації]</text><polygon fill="#383838" points="371.5,2134.8516,361.5,2138.8516,371.5,2142.8516,367.5,2138.8516" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="365.5" x2="1263.5" y1="2138.8516" y2="2138.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="377.5" y="2151.9185">403</text><polygon fill="#383838" points="82.5,2163.9844,72.5,2167.9844,82.5,2171.9844,78.5,2167.9844" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76.5" x2="349.5" y1="2167.9844" y2="2167.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="88.5" y="2181.0513">Передача управління</text><polygon fill="#383838" points="1868.5,2217.25,1878.5,2221.25,1868.5,2225.25,1872.5,2221.25" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1874.5" y1="2221.25" y2="2221.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="1281.5" y="2216.1841">Запит на отримання мета-даних UI-форми за {formKey}</text><path d="M1279,2234.25 L1279,2425.25 L1524,2425.25 L1524,2244.25 L1514,2234.25 L1279,2234.25 " fill="#EBEBEB" filter="url(#f1n0vzhijeavlk)" style="stroke:#383838;stroke-width:1.0;"/><path d="M1514,2234.25 L1514,2244.25 L1524,2244.25 L1514,2234.25 " fill="#EBEBEB" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1285" y="2251.3169">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="1293" y="2266.4497">"components": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1301" y="2281.5825">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="1309" y="2296.7153">"label": "&lt;file_property_label&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1309" y="2311.8481">"storage": "url",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="1309" y="2326.981">"key": "&lt;file_property_name&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1309" y="2342.1138">"type": "file",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="1309" y="2357.2466">"url": "/documents",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="1309" y="2372.3794">"input": true</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1301" y="2387.5122">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1293" y="2402.645">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1285" y="2417.7778">}</text><polygon fill="#383838" points="1285.5,2434.8438,1275.5,2438.8438,1285.5,2442.8438,1281.5,2438.8438" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1279.5" x2="1879.5" y1="2438.8438" y2="2438.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1291.5" y="2451.9106">JSON-документ опису UI-форми</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2485.1094" y2="2485.1094"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2485.1094" y2="2498.1094"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2498.1094" y2="2498.1094"/><polygon fill="#383838" points="1285.5,2494.1094,1275.5,2498.1094,1285.5,2502.1094,1281.5,2498.1094" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="402" x="1281.5" y="2480.0435">Пошук опису поля за key={fieldName} в мета-даних форми</text><path d="M10,2513.1094 L74,2513.1094 L74,2520.1094 L64,2530.1094 L10,2530.1094 L10,2513.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="1358.5" x="10" y="2513.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="2526.1763">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="414" x="89" y="2525.3198">[Опис поля з key={fieldName} не знайдено для форми задачі]</text><polygon fill="#383838" points="371.5,2530.2422,361.5,2534.2422,371.5,2538.2422,367.5,2534.2422" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="365.5" x2="1263.5" y1="2534.2422" y2="2534.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="377.5" y="2547.3091">403: Доступ заборонено</text><polygon fill="#383838" points="82.5,2559.375,72.5,2563.375,82.5,2567.375,78.5,2563.375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76.5" x2="349.5" y1="2563.375" y2="2563.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="88.5" y="2576.4419">Передача управління</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2631.7734" y2="2631.7734"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2631.7734" y2="2644.7734"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2644.7734" y2="2644.7734"/><polygon fill="#383838" points="1285.5,2640.7734,1275.5,2644.7734,1285.5,2648.7734,1281.5,2644.7734" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="1281.5" y="2611.5747">Формування ключа для отримання Ceph-об'єкта</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1281.5" y="2626.7075">на базі {processInstanceId} та {id}</text><polygon fill="#383838" points="2041.5,2685.0391,2051.5,2689.0391,2041.5,2693.0391,2045.5,2689.0391" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="2047.5" y1="2689.0391" y2="2689.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="1281.5" y="2668.8403">Зчитати Ceph об'єкт цифрового документа:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="1281.5" y="2683.9731">getObject(bucketName, key)</text><polygon fill="#383838" points="1285.5,2697.0391,1275.5,2701.0391,1285.5,2705.0391,1281.5,2701.0391" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1279.5" x2="2052.5" y1="2701.0391" y2="2701.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="1291.5" y="2714.106">Ceph-об'єкт</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2747.3047" y2="2747.3047"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2747.3047" y2="2760.3047"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2760.3047" y2="2760.3047"/><polygon fill="#383838" points="1285.5,2756.3047,1275.5,2760.3047,1285.5,2764.3047,1281.5,2760.3047" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="376" x="1281.5" y="2742.2388">Зчитати мета-дані документу (id, type, size, checksum)</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2789.4375" y2="2789.4375"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2789.4375" y2="2802.4375"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2802.4375" y2="2802.4375"/><polygon fill="#383838" points="1285.5,2798.4375,1275.5,2802.4375,1285.5,2806.4375,1281.5,2802.4375" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="1281.5" y="2784.3716">Згенерувати url для подальшого отримання документу</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2831.5703" y2="2831.5703"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2831.5703" y2="2844.5703"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2844.5703" y2="2844.5703"/><polygon fill="#383838" points="1285.5,2840.5703,1275.5,2844.5703,1285.5,2848.5703,1281.5,2844.5703" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="1281.5" y="2826.5044">Встановити Response мета-дані (type, size)</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2873.7031" y2="2873.7031"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2873.7031" y2="2886.7031"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2886.7031" y2="2886.7031"/><polygon fill="#383838" points="1285.5,2882.7031,1275.5,2886.7031,1285.5,2890.7031,1281.5,2886.7031" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="1281.5" y="2868.6372">Отримати ObjectInputStream</text><line style="stroke:#383838;stroke-width:1.0;" x1="1274.5" x2="1316.5" y1="2930.9688" y2="2930.9688"/><line style="stroke:#383838;stroke-width:1.0;" x1="1316.5" x2="1316.5" y1="2930.9688" y2="2943.9688"/><line style="stroke:#383838;stroke-width:1.0;" x1="1275.5" x2="1316.5" y1="2943.9688" y2="2943.9688"/><polygon fill="#383838" points="1285.5,2939.9688,1275.5,2943.9688,1285.5,2947.9688,1281.5,2943.9688" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="394" x="1281.5" y="2910.77">Зформувати відповідь з використанням стримінгу даних:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361" x="1281.5" y="2925.9028">ObjectInputStream.transferTo(StreamingResponseBody)</text><polygon fill="#383838" points="828.5,2951.9688,818.5,2955.9688,828.5,2959.9688,824.5,2955.9688" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="822.5" x2="1268.5" y1="2955.9688" y2="2955.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="834.5" y="2969.0356">200 OK: &lt;binary content&gt;</text><polygon fill="#383838" points="371.5,2981.1016,361.5,2985.1016,371.5,2989.1016,367.5,2985.1016" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="365.5" x2="811.5" y1="2985.1016" y2="2985.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="377.5" y="2998.1685">200 OK: &lt;binary content&gt;</text><polygon fill="#383838" points="82.5,3010.2344,72.5,3014.2344,82.5,3018.2344,78.5,3014.2344" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76.5" x2="354.5" y1="3014.2344" y2="3014.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="88.5" y="3027.3013">Цифровий документ</text><!--MD5=[8a53b12ea12b8ad418c50309196e16c0]
@startuml
skinparam monochrome true

participant "Користувач" as user
participant "Клієнтський додаток\n кабінету користувача" as cabinet
participant "Kong \nAPI Management" as kong
participant "Сервіс \nцифрових документів" as digital_documents
participant "Сервіс \nвиконання \nбізнес-процесів" as bpms
participant "Сервіс \nмета-даних \nUI-форм" as form_provider
participant "Об'єктне сховище Ceph \n(бакет: lowcode-file-storage)" as lowcode_ceph_bucket
skinparam responseMessageBelowArrow true

title Сценарії взаємодії з сервісом цифрових документів

=== Завантаження документу ===

user -> cabinet: Завантаження цифрового документа
activate cabinet
  cabinet -> kong: Запит на завантаження файлу: \nPOST "/documents/{processInstanceId}/{taskId}/{fieldName}" \n* Ідентифікатор сесії Kong; \n* Мета-атрибути файлу; \n* Бінарний контент файлу;
  activate kong
    kong -> kong: Перевірка наявності сесії \nавтентифікованого користувача
    kong -> digital_documents: Запит на завантаження файлу: \nPOST "/documents/{processInstanceId}/{taskId}/{fieldName}" \n* X-Access-Token; \n* Мета-атрибути файлу; \n* Бінарний контент файлу;
    activate digital_documents
      digital_documents -> bpms: Отримання даних про задачу за {taskId}
      bpms - -> digital_documents: <task, processInstanceId, formKey>
      digital_documents -> bpms: Отримання даних про стан процесу за {processInstanceId}
      bpms - -> digital_documents: <process>
      digital_documents -> digital_documents: Перевірка, що задача належить вказаному процесу
      digital_documents -> digital_documents: Перевірка, що процес в AСTIVE стані
      digital_documents -> digital_documents: Перевірка, що користувач є assignee задачі
      alt Помилка авторизації
        digital_documents - -> cabinet: 403
        cabinet - -> user: Передача управління
      end
      digital_documents -> form_provider: Запит на отримання мета-даних UI-форми за {formKey}
      note right digital_documents
        {
          "components": [
            {
              "label": "<file_property_label>",
              "storage": "url",
              "key": "<file_property_name>",
              "type": "file",
              "url": "/documents",
              "input": true
            }
          ]
        }
      end note
      form_provider - -> digital_documents: JSON-документ опису UI-форми
      digital_documents -> digital_documents: Пошук опису поля за key={fieldName} в мета-даних форми
      alt Опис поля з key={fieldName} не знайдено для форми задачі
        digital_documents - -> cabinet: 403: Доступ заборонено
        cabinet - -> user: Передача управління
      end
      digital_documents -> digital_documents: Валідація документа
      digital_documents -> digital_documents: Визначення ім'я, типу та розміру файлу <filename, type, size>
      digital_documents -> digital_documents: Зчитати бінарний контент файлу
      digital_documents -> digital_documents: Згенерувати геш файлу за SHA256 алгоритмом
      digital_documents -> digital_documents: Згенерувати id документу для збержеення у мета-даних
      digital_documents -> digital_documents: Згенерувати ключ Ceph-об'єкта на базі {processInstanceId} та {id}
      digital_documents -> lowcode_ceph_bucket: Створити Ceph об'єкт цифрового документа: \nputObject(bucketName, key, input, metadata)
      lowcode_ceph_bucket - -> digital_documents: Результат виконання операції
      digital_documents -> digital_documents: Підготовка відповіді з мета-даними збереженого документу
    digital_documents - -> kong: 200 OK: <id, url, name, size, type, checksum>
    deactivate digital_documents
    kong -> cabinet: 200 OK: <id, url, name, size, type, checksum>
  deactivate kong
  cabinet - -> user: Передача управління
deactivate cabinet

=== Вивантаження документу ===

user -> cabinet: Вивантаження цифрового документа
activate cabinet
  cabinet -> kong: Запит на вивантаження файлу: \nGET "/documents/{processInstanceId}/{taskId}/{fieldName}/{id}" \n* Ідентифікатор сесії Kong;
  activate kong
    kong -> kong: Перевірка наявності сесії \nавтентифікованого користувача
    kong -> digital_documents: Запит на вивантаження файлу: \nGET "/documents/{processInstanceId}/{taskId}/{fieldName}/{id}" \n* X-Access-Token;
    activate digital_documents
      digital_documents -> bpms: Отримання даних про задачу за {taskId}
      bpms - -> digital_documents: <task, processInstanceId, formKey>
      digital_documents -> bpms: Отримання даних про стан процесу за {processInstanceId}
      bpms - -> digital_documents: <process>
      digital_documents -> digital_documents: Перевірка, що задача належить вказаному процесу
      digital_documents -> digital_documents: Перевірка, що процес в AСTIVE стані
      digital_documents -> digital_documents: Перевірка, що користувач є assignee задачі
      alt Помилка авторизації
        digital_documents - -> cabinet: 403
        cabinet - -> user: Передача управління
      end
      digital_documents -> form_provider: Запит на отримання мета-даних UI-форми за {formKey}
      note right digital_documents
        {
          "components": [
            {
              "label": "<file_property_label>",
              "storage": "url",
              "key": "<file_property_name>",
              "type": "file",
              "url": "/documents",
              "input": true
            }
          ]
        }
      end note
      form_provider - -> digital_documents: JSON-документ опису UI-форми
      digital_documents -> digital_documents: Пошук опису поля за key={fieldName} в мета-даних форми
      alt Опис поля з key={fieldName} не знайдено для форми задачі
        digital_documents - -> cabinet: 403: Доступ заборонено
        cabinet - -> user: Передача управління
      end
      digital_documents -> digital_documents: Формування ключа для отримання Ceph-об'єкта \nна базі {processInstanceId} та {id}
      digital_documents -> lowcode_ceph_bucket: Зчитати Ceph об'єкт цифрового документа: \ngetObject(bucketName, key)
      lowcode_ceph_bucket - -> digital_documents: Ceph-об'єкт
      digital_documents -> digital_documents: Зчитати мета-дані документу (id, type, size, checksum)
      digital_documents -> digital_documents: Згенерувати url для подальшого отримання документу
      digital_documents -> digital_documents: Встановити Response мета-дані (type, size)
      digital_documents -> digital_documents: Отримати ObjectInputStream
      digital_documents -> digital_documents: Зформувати відповідь з використанням стримінгу даних: \nObjectInputStream.transferTo(StreamingResponseBody)
    digital_documents - -> kong: 200 OK: <binary content>
    deactivate digital_documents
    kong -> cabinet: 200 OK: <binary content>
  deactivate kong
  cabinet - -> user: Цифровий документ
deactivate cabinet
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>