<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="805px" preserveAspectRatio="none" style="width:944px;height:805px;background:#FFFFFF;" version="1.1" viewBox="0 0 944 805" width="944px" zoomAndPan="magnify"><defs><filter height="300%" id="ff3dyauv0bthd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="663.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="79" y="56.2969"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="109.2031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="473" y="85.4297"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="473" y="240.8984"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="137.3359" style="stroke:#A80036;stroke-width:1.0;" width="10" x="473" y="299.1641"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="473" y="678.6953"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="689.5" y="482.7656"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="852" y="541.0313"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="644.5313" style="stroke:#000000;stroke-width:2.0;" width="927" x="3" y="100.4297"/><rect fill="#FFFFFF" height="569.1328" style="stroke:none;stroke-width:1.0;" width="927" x="3" y="175.8281"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="321.2656" style="stroke:#000000;stroke-width:2.0;" width="885" x="35" y="314.1641"/><rect fill="#FFFFFF" height="217.7344" style="stroke:none;stroke-width:1.0;" width="885" x="35" y="417.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="84" x2="84" y1="40.2969" y2="761.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="478" x2="478" y1="40.2969" y2="761.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="694" x2="694" y1="40.2969" y2="761.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="857" x2="857" y1="40.2969" y2="761.9609"/><rect fill="#FEFECE" filter="url(#ff3dyauv0bthd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="45" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="52" y="24.9951">initiator()</text><rect fill="#FEFECE" filter="url(#ff3dyauv0bthd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="74" x="45" y="760.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="52" y="780.9561">initiator()</text><rect fill="#FEFECE" filter="url(#ff3dyauv0bthd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="210" x="371" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="378" y="24.9951">Camunda Execution Context</text><rect fill="#FEFECE" filter="url(#ff3dyauv0bthd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="210" x="371" y="760.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="378" y="780.9561">Camunda Execution Context</text><rect fill="#FEFECE" filter="url(#ff3dyauv0bthd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="195" x="595" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="602" y="24.9951">Spring Application Context</text><rect fill="#FEFECE" filter="url(#ff3dyauv0bthd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="195" x="595" y="760.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="602" y="780.9561">Spring Application Context</text><rect fill="#FEFECE" filter="url(#ff3dyauv0bthd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="102" x="804" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="811" y="24.9951">TokenParser</text><rect fill="#FEFECE" filter="url(#ff3dyauv0bthd)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="102" x="804" y="760.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="811" y="780.9561">TokenParser</text><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="663.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="79" y="56.2969"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="109.2031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="473" y="85.4297"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="473" y="240.8984"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="137.3359" style="stroke:#A80036;stroke-width:1.0;" width="10" x="473" y="299.1641"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="473" y="678.6953"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="689.5" y="482.7656"/><rect fill="#FFFFFF" filter="url(#ff3dyauv0bthd)" height="12" style="stroke:#A80036;stroke-width:1.0;" width="10" x="852" y="541.0313"/><polygon fill="#A80036" points="67,52.2969,77,56.2969,67,60.2969,71,56.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="0" x2="73" y1="56.2969" y2="56.2969"/><polygon fill="#A80036" points="461,81.4297,471,85.4297,461,89.4297,465,85.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="467" y1="85.4297" y2="85.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="96" y="80.3638">Отримати існуючий UserDto об'єкт ініціатора</text><path d="M3,100.4297 L67,100.4297 L67,107.4297 L57,117.4297 L3,117.4297 L3,100.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="644.5313" style="stroke:#000000;stroke-width:2.0;" width="927" x="3" y="100.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="18" y="113.4966">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="186" x="82" y="112.6401">[об'єкт ініціатора знайдено]</text><polygon fill="#A80036" points="100,117.5625,90,121.5625,100,125.5625,96,121.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="472" y1="121.5625" y2="121.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="106" y="134.6294">знайдений UserDto об'єкт ініціатора</text><polygon fill="#A80036" points="11,146.6953,1,150.6953,11,154.6953,7,150.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="78" y1="150.6953" y2="150.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="17" y="163.7622">UserDto</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3" x2="930" y1="176.8281" y2="176.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="206" x="8" y="187.0386">[об'єкт ініціатора не знайдено]</text><polygon fill="#A80036" points="100,190.6328,90,194.6328,100,198.6328,96,194.6328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="477" y1="194.6328" y2="194.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="106" y="207.6997">null</text><polygon fill="#A80036" points="461,236.8984,471,240.8984,461,244.8984,465,240.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="467" y1="240.8984" y2="240.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311" x="96" y="235.8325">Отримати ім'я ініціатора з відповідної змінної</text><polygon fill="#A80036" points="100,248.8984,90,252.8984,100,256.8984,96,252.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="477" y1="252.8984" y2="252.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="106" y="265.9653">Ім'я ініціатора</text><polygon fill="#A80036" points="461,295.1641,471,299.1641,461,303.1641,465,299.1641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="467" y1="299.1641" y2="299.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="96" y="294.0981">Отримати токен ініціатора з відповідної змінної</text><path d="M35,314.1641 L99,314.1641 L99,321.1641 L89,331.1641 L35,331.1641 L35,314.1641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="321.2656" style="stroke:#000000;stroke-width:2.0;" width="885" x="35" y="314.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="50" y="327.231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="335" x="114" y="326.3745">[токен ініціатора не наявний у Camunda контексті]</text><polygon fill="#A80036" points="100,331.2969,90,335.2969,100,339.2969,96,335.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="472" y1="335.2969" y2="335.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="106" y="348.3638">null</text><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="131" y1="396.6953" y2="396.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="131" x2="131" y1="396.6953" y2="409.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="90" x2="131" y1="409.6953" y2="409.6953"/><polygon fill="#A80036" points="100,405.6953,90,409.6953,100,413.6953,96,409.6953" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="96" y="376.4966">збудувати UserDto використовуючи</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="96" y="391.6294">тільки ім'я ініціатора</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="35" x2="920" y1="418.6953" y2="418.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="315" x="40" y="428.9058">[токен ініціатора наявний у Camunda контексті]</text><polygon fill="#A80036" points="100,432.5,90,436.5,100,440.5,96,436.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="477" y1="436.5" y2="436.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="106" y="449.5669">токен ініціатора</text><polygon fill="#A80036" points="677.5,478.7656,687.5,482.7656,677.5,486.7656,681.5,482.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="683.5" y1="482.7656" y2="482.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="96" y="477.6997">Отримати бін типу TokenParser</text><polygon fill="#A80036" points="100,490.7656,90,494.7656,100,498.7656,96,494.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="693.5" y1="494.7656" y2="494.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="106" y="507.8325">бін типу TokenParser</text><polygon fill="#A80036" points="840,537.0313,850,541.0313,840,545.0313,844,541.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="846" y1="541.0313" y2="541.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="340" x="96" y="535.9653">Розпарсити токен ініціатора у об'єкт JwtClaimsDto</text><polygon fill="#A80036" points="100,549.0313,90,553.0313,100,557.0313,96,553.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="856" y1="553.0313" y2="553.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="106" y="566.0981">згенерований JwtClaimsDto</text><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="131" y1="614.4297" y2="614.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="131" x2="131" y1="614.4297" y2="627.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="90" x2="131" y1="627.4297" y2="627.4297"/><polygon fill="#A80036" points="100,623.4297,90,627.4297,100,631.4297,96,627.4297" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="96" y="594.231">збудувати UserDto використовуючи</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="366" x="100" y="609.3638">ім'я та токен ініціатора та згенерований JwtClaimsDto</text><polygon fill="#A80036" points="461,674.6953,471,678.6953,461,682.6953,465,678.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="467" y1="678.6953" y2="678.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="96" y="658.4966">зберегти збудований UserDto у контексті</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="96" y="673.6294">у якості transient змінної</text><polygon fill="#A80036" points="100,686.6953,90,690.6953,100,694.6953,96,690.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="94" x2="477" y1="690.6953" y2="690.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="106" y="703.7622">збережено</text><polygon fill="#A80036" points="11,715.8281,1,719.8281,11,723.8281,7,719.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="83" y1="719.8281" y2="719.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="17" y="732.895">UserDto</text><!--MD5=[cd5fee9cf0db4b42a2df3c9174d0bbb2]
@startuml
skinparam responseMessageBelowArrow true

  participant "initiator()" as initiator order 10
  participant "Camunda Execution Context" as camunda order 20
  participant "Spring Application Context" as spring order 30
  participant TokenParser as parser order 40

  -> initiator
  activate initiator

  initiator -> camunda : Отримати існуючий UserDto об'єкт ініціатора
  activate camunda

  alt об'єкт ініціатора знайдено
    initiator <- - camunda : знайдений UserDto об'єкт ініціатора
    <- - initiator : UserDto
  else об'єкт ініціатора не знайдено
    initiator <- - camunda : null
    deactivate camunda

    initiator -> camunda : Отримати ім'я ініціатора з відповідної змінної
    activate camunda

    initiator <- - camunda : Ім'я ініціатора
    deactivate camunda

    initiator -> camunda : Отримати токен ініціатора з відповідної змінної
    activate camunda
    alt токен ініціатора не наявний у Camunda контексті
      initiator <- - camunda : null
      initiator -> initiator : збудувати UserDto використовуючи \nтільки ім'я ініціатора
    else токен ініціатора наявний у Camunda контексті
      initiator <- - camunda : токен ініціатора
      deactivate camunda

      initiator -> spring : Отримати бін типу TokenParser
      activate spring

      initiator <- - spring : бін типу TokenParser
      deactivate spring

      initiator -> parser : Розпарсити токен ініціатора у об'єкт JwtClaimsDto
      activate parser

      initiator <- - parser : згенерований JwtClaimsDto
      deactivate parser

      initiator -> initiator : збудувати UserDto використовуючи \n ім'я та токен ініціатора та згенерований JwtClaimsDto
    end

    initiator -> camunda : зберегти збудований UserDto у контексті \nу якості transient змінної
    activate camunda

    initiator <- - camunda : збережено
    deactivate camunda

    <- - initiator : UserDto
    deactivate initiator
  end
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>