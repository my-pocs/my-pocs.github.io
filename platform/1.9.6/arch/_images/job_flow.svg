<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="968px" preserveAspectRatio="none" style="width:822px;height:968px;background:#FFFFFF;" version="1.1" viewBox="0 0 822 968" width="822px" zoomAndPan="magnify"><defs><filter height="300%" id="fklupm1ynbsi9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fklupm1ynbsi9)" height="148.7969" style="stroke:#000000;stroke-width:2.0;" width="466.5" x="207.5" y="273.0938"/><rect fill="#FFFFFF" filter="url(#fklupm1ynbsi9)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="597.5" x="207.5" y="722.9531"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="67.2969" y2="900.6172"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="233.5" x2="233.5" y1="67.2969" y2="900.6172"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="485" x2="485" y1="67.2969" y2="900.6172"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="575" x2="575" y1="67.2969" y2="900.6172"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="636" x2="636" y1="67.2969" y2="900.6172"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="734" x2="734" y1="67.2969" y2="900.6172"/><rect fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="63" x="5" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="12" y="51.9951">Jenkins</text><rect fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="63" x="5" y="899.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="12" y="919.6123">Jenkins</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="220" y="63.9951">Job</text><ellipse cx="233.5" cy="35" fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" rx="12" ry="12" style="stroke:#383838;stroke-width:2.0;"/><polygon fill="#383838" points="229.5,23,235.5,18,233.5,23,235.5,28,229.5,23" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="220" y="912.6123">Job</text><ellipse cx="233.5" cy="931.9141" fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" rx="12" ry="12" style="stroke:#383838;stroke-width:2.0;"/><polygon fill="#383838" points="229.5,919.9141,235.5,914.9141,233.5,919.9141,235.5,924.9141,229.5,919.9141" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="429" y="63.9951">Аналітична БД</text><path d="M467.5,15 C467.5,5 485.5,5 485.5,5 C485.5,5 503.5,5 503.5,15 L503.5,41 C503.5,51 485.5,51 485.5,51 C485.5,51 467.5,51 467.5,41 L467.5,15 " fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" style="stroke:#000000;stroke-width:1.5;"/><path d="M467.5,15 C467.5,25 485.5,25 485.5,25 C485.5,25 503.5,25 503.5,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="429" y="912.6123">Аналітична БД</text><path d="M467.5,925.9141 C467.5,915.9141 485.5,915.9141 485.5,915.9141 C485.5,915.9141 503.5,915.9141 503.5,925.9141 L503.5,951.9141 C503.5,961.9141 485.5,961.9141 485.5,961.9141 C485.5,961.9141 467.5,961.9141 467.5,951.9141 L467.5,925.9141 " fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" style="stroke:#000000;stroke-width:1.5;"/><path d="M467.5,925.9141 C467.5,935.9141 485.5,935.9141 485.5,935.9141 C485.5,935.9141 503.5,935.9141 503.5,925.9141 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="43" x="552" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="559" y="51.9951">КЕП</text><rect fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="43" x="552" y="899.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="559" y="919.6123">КЕП</text><rect fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="51" x="609" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="616" y="51.9951">Ceph</text><rect fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="51" x="609" y="899.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="616" y="919.6123">Ceph</text><rect fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="117" x="674" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="681" y="51.9951">Сервіс витягів</text><rect fill="#F8F8F8" filter="url(#fklupm1ynbsi9)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="117" x="674" y="899.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="681" y="919.6123">Сервіс витягів</text><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="815" x="0" y="97.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="97.8633" y2="97.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="100.8633" y2="100.8633"/><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="154" x="330.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="135" x="336.5" y="103.3638">Отримання даних</text><polygon fill="#383838" points="221.5,152.6953,231.5,156.6953,221.5,160.6953,225.5,156.6953" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="38.5" x2="227.5" y1="156.6953" y2="156.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="45.5" y="136.4966">назва таблиці</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="45.5" y="151.6294">та ідентифікатор запису</text><polygon fill="#383838" points="473.5,181.8281,483.5,185.8281,473.5,189.8281,477.5,185.8281" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="479.5" y1="185.8281" y2="185.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="240.5" y="180.7622">запит до історичної таблиці</text><polygon fill="#383838" points="244.5,210.9609,234.5,214.9609,244.5,218.9609,240.5,214.9609" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="238.5" x2="484.5" y1="214.9609" y2="214.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="250.5" y="209.895">історичні дані</text><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="815" x="0" y="243.5273"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="243.5273" y2="243.5273"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="246.5273" y2="246.5273"/><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="157" x="329" y="232.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="335" y="249.0278">Збагачення даних</text><path d="M207.5,273.0938 L284.5,273.0938 L284.5,280.0938 L274.5,290.0938 L207.5,290.0938 L207.5,273.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="148.7969" style="stroke:#000000;stroke-width:2.0;" width="466.5" x="207.5" y="273.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="222.5" y="286.1606">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142" x="299.5" y="285.3042">[для кожного запису]</text><polygon fill="#383838" points="624.5,322.4922,634.5,326.4922,624.5,330.4922,628.5,326.4922" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="630.5" y1="326.4922" y2="326.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="240.5" y="306.2935">отримання цифрового підпису</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="240.5" y="321.4263">для запису</text><polygon fill="#383838" points="244.5,351.625,234.5,355.625,244.5,359.625,240.5,355.625" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="238.5" x2="635.5" y1="355.625" y2="355.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="250.5" y="350.5591">цифровий підпис</text><polygon fill="#383838" points="563.5,380.7578,573.5,384.7578,563.5,388.7578,567.5,384.7578" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="569.5" y1="384.7578" y2="384.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="240.5" y="379.6919">отримання інформації про підпис</text><polygon fill="#383838" points="244.5,409.8906,234.5,413.8906,244.5,417.8906,240.5,413.8906" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="238.5" x2="574.5" y1="413.8906" y2="413.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="250.5" y="408.8247">ДРФО, П.І.Б</text><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="815" x="0" y="449.457"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="449.457" y2="449.457"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="452.457" y2="452.457"/><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="116" x="349.5" y="438.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="355.5" y="454.9575">Запит витягу</text><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="275.5" y1="508.2891" y2="508.2891"/><line style="stroke:#383838;stroke-width:1.0;" x1="275.5" x2="275.5" y1="508.2891" y2="521.2891"/><line style="stroke:#383838;stroke-width:1.0;" x1="234.5" x2="275.5" y1="521.2891" y2="521.2891"/><polygon fill="#383838" points="244.5,517.2891,234.5,521.2891,244.5,525.2891,240.5,521.2891" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="240.5" y="488.0903">формування запиту</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="240.5" y="503.2231">на формування витягу</text><polygon fill="#383838" points="563.5,546.4219,573.5,550.4219,563.5,554.4219,567.5,550.4219" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="569.5" y1="550.4219" y2="550.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="240.5" y="545.356">накладання цифрового підпису</text><polygon fill="#383838" points="244.5,560.4219,234.5,564.4219,244.5,568.4219,240.5,564.4219" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="238.5" x2="574.5" y1="564.4219" y2="564.4219"/><polygon fill="#383838" points="722.5,589.5547,732.5,593.5547,722.5,597.5547,726.5,593.5547" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="728.5" y1="593.5547" y2="593.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="240.5" y="588.4888">запит на створення витягу</text><polygon fill="#383838" points="244.5,618.6875,234.5,622.6875,244.5,626.6875,240.5,622.6875" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="238.5" x2="733.5" y1="622.6875" y2="622.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="250.5" y="617.6216">ідентифікатор витягу</text><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="815" x="0" y="651.2539"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="651.2539" y2="651.2539"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="654.2539" y2="654.2539"/><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="211" x="302" y="640.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="192" x="308" y="656.7544">Очікування зміни статусу</text><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="275.5" y1="694.9531" y2="694.9531"/><line style="stroke:#383838;stroke-width:1.0;" x1="275.5" x2="275.5" y1="694.9531" y2="707.9531"/><line style="stroke:#383838;stroke-width:1.0;" x1="234.5" x2="275.5" y1="707.9531" y2="707.9531"/><polygon fill="#383838" points="244.5,703.9531,234.5,707.9531,244.5,711.9531,240.5,707.9531" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238" x="240.5" y="689.8872">побудова запиту на статус витягу</text><path d="M207.5,722.9531 L284.5,722.9531 L284.5,729.9531 L274.5,739.9531 L207.5,739.9531 L207.5,722.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="597.5" x="207.5" y="722.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="222.5" y="736.02">loop</text><polygon fill="#383838" points="722.5,757.2188,732.5,761.2188,722.5,765.2188,726.5,761.2188" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="728.5" y1="761.2188" y2="761.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="240.5" y="756.1528">перевірка статусу</text><polygon fill="#383838" points="244.5,786.3516,234.5,790.3516,244.5,794.3516,240.5,790.3516" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="238.5" x2="733.5" y1="790.3516" y2="790.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="250.5" y="785.2856">статус запиту</text><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="815" x="0" y="825.918"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="825.918" y2="825.918"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="815" y1="828.918" y2="828.918"/><rect fill="#EEEEEE" filter="url(#fklupm1ynbsi9)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="167" x="324" y="815.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="148" x="330" y="831.4185">Оновлення ресурсу</text><line style="stroke:#383838;stroke-width:1.0;" x1="233.5" x2="275.5" y1="869.6172" y2="869.6172"/><line style="stroke:#383838;stroke-width:1.0;" x1="275.5" x2="275.5" y1="869.6172" y2="882.6172"/><line style="stroke:#383838;stroke-width:1.0;" x1="234.5" x2="275.5" y1="882.6172" y2="882.6172"/><polygon fill="#383838" points="244.5,878.6172,234.5,882.6172,244.5,886.6172,240.5,882.6172" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238" x="240.5" y="864.5513">додавання анотації до ресурсу Job</text><!--MD5=[4bcb701b5e02f9a16642696999c5e915]
@startuml
skinparam monochrome true
participant "Jenkins" as jenkins
control "Job" as job
database "Аналітична БД" as db
participant "КЕП" as sign
participant "Ceph" as ceph
participant "Сервіс витягів" as service
== Отримання даних ==
jenkins -> job: назва таблиці \nта ідентифікатор запису
job -> db: запит до історичної таблиці
return історичні дані
== Збагачення даних ==
loop для кожного запису
    job -> ceph:  отримання цифрового підпису \nдля запису
    return цифровий підпис
    job -> sign: отримання інформації про підпис
    return ДРФО, П.І.Б
end
== Запит витягу ==
job -> job: формування запиту \nна формування витягу
job -> sign: накладання цифрового підпису
return
job -> service: запит на створення витягу
return ідентифікатор витягу
== Очікування зміни статусу ==
job -> job: побудова запиту на статус витягу
loop
job -> service: перевірка статусу
return статус запиту
end
== Оновлення ресурсу ==
job -> job: додавання анотації до ресурсу Job
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>