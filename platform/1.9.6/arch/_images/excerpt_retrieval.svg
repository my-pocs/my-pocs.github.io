<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1150px" preserveAspectRatio="none" style="width:2492px;height:1150px;background:#FFFFFF;" version="1.1" viewBox="0 0 2492 1150" width="2492px" zoomAndPan="magnify"><defs><filter height="300%" id="fwfr0hmk7iorg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="609" x="939.75" y="28.708">Отримання згенерованого в рамках бізнес-процесу витягу ==</text><rect fill="#DDDDDD" height="1103.1094" style="stroke:#383838;stroke-width:1.0;" width="592" x="1362.5" y="40.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="205" x="1556" y="53.02">Виконання бізнес-процесів</text><rect fill="#CCCCCC" height="1103.1094" style="stroke:#383838;stroke-width:1.0;" width="516" x="1956.5" y="40.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159" x="2135" y="53.02">Підсистема звітності</text><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="430.9922" style="stroke:#383838;stroke-width:1.0;" width="10" x="443.5" y="154.3828"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="378.9922" style="stroke:#383838;stroke-width:1.0;" width="10" x="443.5" y="653.7734"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="300.3281" style="stroke:#383838;stroke-width:1.0;" width="10" x="825.5" y="183.5156"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="320.7266" style="stroke:#383838;stroke-width:1.0;" width="10" x="825.5" y="682.9063"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="242.0625" style="stroke:#383838;stroke-width:1.0;" width="10" x="1104.5" y="212.6484"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="183.7969" style="stroke:#383838;stroke-width:1.0;" width="10" x="1494.5" y="241.7813"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="262.4609" style="stroke:#383838;stroke-width:1.0;" width="10" x="2045" y="712.0391"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="440.3906" style="stroke:#000000;stroke-width:2.0;" width="2468.5" x="10" y="600.375"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="65" x2="65" y1="123.25" y2="1057.7656"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="448" x2="448" y1="123.25" y2="1057.7656"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="830.5" x2="830.5" y1="123.25" y2="1057.7656"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1109" x2="1109" y1="123.25" y2="1057.7656"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1499.5" x2="1499.5" y1="123.25" y2="1057.7656"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1858.5" x2="1858.5" y1="123.25" y2="1057.7656"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2049.5" x2="2049.5" y1="123.25" y2="1057.7656"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2371.5" x2="2371.5" y1="123.25" y2="1057.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="20" y="119.9482">Користувач</text><ellipse cx="65.5" cy="49.9531" fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" rx="8" ry="8" style="stroke:#383838;stroke-width:2.0;"/><path d="M65.5,57.9531 L65.5,84.9531 M52.5,65.9531 L78.5,65.9531 M65.5,84.9531 L52.5,99.9531 M65.5,84.9531 L78.5,99.9531 " fill="none" filter="url(#fwfr0hmk7iorg)" style="stroke:#383838;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="20" y="1069.7607">Користувач</text><ellipse cx="65.5" cy="1083.0625" fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" rx="8" ry="8" style="stroke:#383838;stroke-width:2.0;"/><path d="M65.5,1091.0625 L65.5,1118.0625 M52.5,1099.0625 L78.5,1099.0625 M65.5,1118.0625 L52.5,1133.0625 M65.5,1118.0625 L78.5,1133.0625 " fill="none" filter="url(#fwfr0hmk7iorg)" style="stroke:#383838;stroke-width:2.0;"/><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="175" x="359" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="368" y="91.6514">Клієнтський додаток</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="370" y="107.9482">кабінету користувача</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="175" x="359" y="1056.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="368" y="1076.7607">Клієнтський додаток</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="370" y="1093.0576">кабінету користувача</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="130" x="763.5" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="808.5" y="91.6514">Kong</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="770.5" y="107.9482">API Management</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="130" x="763.5" y="1056.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="808.5" y="1076.7607">Kong</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="770.5" y="1093.0576">API Management</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="245" x="985" y="71.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1040.5" y="91.6514">Сервіс управління</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="996" y="107.9482">бізнес-процесами користувача</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="46.5938" style="stroke:#383838;stroke-width:1.5;" width="245" x="985" y="1056.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1040.5" y="1076.7607">Сервіс управління</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="996" y="1093.0576">бізнес-процесами користувача</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="262" x="1366.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248" x="1373.5" y="107.9482">Сервіс виконання бізнес-процесів</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="262" x="1366.5" y="1056.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248" x="1373.5" y="1076.7607">Сервіс виконання бізнес-процесів</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="1766.5" y="119.9482">Операційне сховище БП</text><path d="M1840.5,70.9531 C1840.5,60.9531 1858.5,60.9531 1858.5,60.9531 C1858.5,60.9531 1876.5,60.9531 1876.5,70.9531 L1876.5,96.9531 C1876.5,106.9531 1858.5,106.9531 1858.5,106.9531 C1858.5,106.9531 1840.5,106.9531 1840.5,96.9531 L1840.5,70.9531 " fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1840.5,70.9531 C1840.5,80.9531 1858.5,80.9531 1858.5,80.9531 C1858.5,80.9531 1876.5,80.9531 1876.5,70.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="1766.5" y="1069.7607">Операційне сховище БП</text><path d="M1840.5,1083.0625 C1840.5,1073.0625 1858.5,1073.0625 1858.5,1073.0625 C1858.5,1073.0625 1876.5,1073.0625 1876.5,1083.0625 L1876.5,1109.0625 C1876.5,1119.0625 1858.5,1119.0625 1858.5,1119.0625 C1858.5,1119.0625 1840.5,1119.0625 1840.5,1109.0625 L1840.5,1083.0625 " fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1840.5,1083.0625 C1840.5,1093.0625 1858.5,1093.0625 1858.5,1093.0625 C1858.5,1093.0625 1876.5,1093.0625 1876.5,1083.0625 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="175" x="1960.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="1967.5" y="107.9482">API отримання витягів</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="175" x="1960.5" y="1056.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="1967.5" y="1076.7607">API отримання витягів</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="189" x="2275.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="2282.5" y="107.9482">Об'єктне сховище Ceph</text><rect fill="#F8F8F8" filter="url(#fwfr0hmk7iorg)" height="30.2969" style="stroke:#383838;stroke-width:1.5;" width="189" x="2275.5" y="1056.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="2282.5" y="1076.7607">Об'єктне сховище Ceph</text><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="430.9922" style="stroke:#383838;stroke-width:1.0;" width="10" x="443.5" y="154.3828"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="378.9922" style="stroke:#383838;stroke-width:1.0;" width="10" x="443.5" y="653.7734"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="300.3281" style="stroke:#383838;stroke-width:1.0;" width="10" x="825.5" y="183.5156"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="320.7266" style="stroke:#383838;stroke-width:1.0;" width="10" x="825.5" y="682.9063"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="242.0625" style="stroke:#383838;stroke-width:1.0;" width="10" x="1104.5" y="212.6484"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="183.7969" style="stroke:#383838;stroke-width:1.0;" width="10" x="1494.5" y="241.7813"/><rect fill="#FFFFFF" filter="url(#fwfr0hmk7iorg)" height="262.4609" style="stroke:#383838;stroke-width:1.0;" width="10" x="2045" y="712.0391"/><polygon fill="#383838" points="431.5,150.3828,441.5,154.3828,431.5,158.3828,435.5,154.3828" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="65.5" x2="437.5" y1="154.3828" y2="154.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="72.5" y="149.3169">Перегляд наданих послуг</text><polygon fill="#383838" points="813.5,179.5156,823.5,183.5156,813.5,187.5156,817.5,183.5156" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="453.5" x2="819.5" y1="183.5156" y2="183.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="460.5" y="178.4497">Запит на отримання наданих послуг</text><polygon fill="#383838" points="1092.5,208.6484,1102.5,212.6484,1092.5,216.6484,1096.5,212.6484" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="835.5" x2="1098.5" y1="212.6484" y2="212.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="842.5" y="207.5825">Запит на отримання наданих послуг</text><polygon fill="#383838" points="1482.5,237.7813,1492.5,241.7813,1482.5,245.7813,1486.5,241.7813" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1114.5" x2="1488.5" y1="241.7813" y2="241.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361" x="1121.5" y="236.7153">Отримання завершених бізнес-процесів користувача</text><polygon fill="#383838" points="1846.5,266.9141,1856.5,270.9141,1846.5,274.9141,1850.5,270.9141" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1504.5" x2="1852.5" y1="270.9141" y2="270.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="1511.5" y="265.8481">Отримання історичних бізнес-процесів</text><path d="M1389,283.9141 L1389,308.9141 L1968,308.9141 L1968,293.9141 L1958,283.9141 L1389,283.9141 " fill="#EBEBEB" filter="url(#fwfr0hmk7iorg)" style="stroke:#383838;stroke-width:1.0;"/><path d="M1958,283.9141 L1958,293.9141 L1968,293.9141 L1958,283.9141 " fill="#EBEBEB" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="506" x="1419" y="300.981">SYS_VAR_PROCESS_COMPLETION_RESULT та SYS_VAR_PROCESS_EXCERPT_ID</text><polygon fill="#383838" points="1846.5,335.1797,1856.5,339.1797,1846.5,343.1797,1850.5,339.1797" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="1504.5" x2="1852.5" y1="339.1797" y2="339.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="330" x="1511.5" y="334.1138">Отримання значень історичних змінних процесів</text><line style="stroke:#383838;stroke-width:1.0;" x1="1504.5" x2="1546.5" y1="368.3125" y2="368.3125"/><line style="stroke:#383838;stroke-width:1.0;" x1="1546.5" x2="1546.5" y1="368.3125" y2="381.3125"/><line style="stroke:#383838;stroke-width:1.0;" x1="1505.5" x2="1546.5" y1="381.3125" y2="381.3125"/><polygon fill="#383838" points="1515.5,377.3125,1505.5,381.3125,1515.5,385.3125,1511.5,381.3125" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="1511.5" y="363.2466">Формування агрегованого переліку процесів</text><polygon fill="#383838" points="1125.5,421.5781,1115.5,425.5781,1125.5,429.5781,1121.5,425.5781" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1119.5" x2="1498.5" y1="425.5781" y2="425.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="1131.5" y="405.3794">Перелік завершених бізнес-процесів</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1135.5" y="420.5122">та їх змінних</text><polygon fill="#383838" points="846.5,450.7109,836.5,454.7109,846.5,458.7109,842.5,454.7109" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="840.5" x2="1108.5" y1="454.7109" y2="454.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="852.5" y="449.645">Перелік наданих послуг</text><polygon fill="#383838" points="464.5,479.8438,454.5,483.8438,464.5,487.8438,460.5,483.8438" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="458.5" x2="829.5" y1="483.8438" y2="483.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="470.5" y="478.7778">Перелік наданих послуг</text><line style="stroke:#383838;stroke-width:1.0;" x1="453.5" x2="495.5" y1="543.2422" y2="543.2422"/><line style="stroke:#383838;stroke-width:1.0;" x1="495.5" x2="495.5" y1="543.2422" y2="556.2422"/><line style="stroke:#383838;stroke-width:1.0;" x1="454.5" x2="495.5" y1="556.2422" y2="556.2422"/><polygon fill="#383838" points="464.5,552.2422,454.5,556.2422,464.5,560.2422,460.5,556.2422" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="460.5" y="507.9106">Маркування послуг, для яких</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="460.5" y="523.0435">визначена змінна SYS_VAR_PROCESS_EXCERPT_ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="358" x="460.5" y="538.1763">як послуг, для яких доступне завантаження витягу</text><polygon fill="#383838" points="76.5,581.375,66.5,585.375,76.5,589.375,72.5,585.375" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="70.5" x2="447.5" y1="585.375" y2="585.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="82.5" y="580.3091">Перелік наданих послуг</text><path d="M10,600.375 L491,600.375 L491,607.375 L481,617.375 L10,617.375 L10,600.375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="440.3906" style="stroke:#000000;stroke-width:2.0;" width="2468.5" x="10" y="600.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="431" x="25" y="613.4419">Бізнес-процес, результатом якого є згенерований витяг</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="328" x="506" y="612.5854">[наявність змінної SYS_VAR_PROCESS_EXCERPT_ID]</text><polygon fill="#383838" points="431.5,649.7734,441.5,653.7734,431.5,657.7734,435.5,653.7734" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="65.5" x2="437.5" y1="653.7734" y2="653.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="355" x="72.5" y="633.5747">Завантаження витягу для обраного бізнес-процесу</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="72.5" y="648.7075">за значенням SYS_VAR_PROCESS_EXCERPT_ID</text><polygon fill="#383838" points="813.5,678.9063,823.5,682.9063,813.5,686.9063,817.5,682.9063" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="453.5" x2="819.5" y1="682.9063" y2="682.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="460.5" y="677.8403">Запит на отримання файлу витягу</text><polygon fill="#383838" points="2033,708.0391,2043,712.0391,2033,716.0391,2037,712.0391" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="835.5" x2="2039" y1="712.0391" y2="712.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="738" x="842.5" y="706.9731">Запит на отримання витягу за ідентифікатором та Access Token користувача, який ініціював бізнес-процес</text><line style="stroke:#383838;stroke-width:1.0;" x1="2055" x2="2097" y1="786.5703" y2="786.5703"/><line style="stroke:#383838;stroke-width:1.0;" x1="2097" x2="2097" y1="786.5703" y2="799.5703"/><line style="stroke:#383838;stroke-width:1.0;" x1="2056" x2="2097" y1="799.5703" y2="799.5703"/><polygon fill="#383838" points="2066,795.5703,2056,799.5703,2066,803.5703,2062,799.5703" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="2062" y="736.106">Авторизація запиту на отримання витягу</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="2062" y="751.2388">(keycloakId збережений у процесі генерації</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="2062" y="766.3716">витягу має відповідати keycloakId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="2062" y="781.5044">отриманому з Access Token)</text><line style="stroke:#383838;stroke-width:1.0;" x1="2055" x2="2097" y1="874.1016" y2="874.1016"/><line style="stroke:#383838;stroke-width:1.0;" x1="2097" x2="2097" y1="874.1016" y2="887.1016"/><line style="stroke:#383838;stroke-width:1.0;" x1="2056" x2="2097" y1="887.1016" y2="887.1016"/><polygon fill="#383838" points="2066,883.1016,2056,887.1016,2066,891.1016,2062,887.1016" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="294" x="2062" y="823.6372">Перевірка співпадання чек-сум документу,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="2062" y="838.77">збереженому в "Об'єктному сховищі Ceph"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="2062" y="853.9028">та оригінальній чек-сумі, отриманої</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="2062" y="869.0356">від згенерованого витягу</text><polygon fill="#383838" points="2360,912.2344,2370,916.2344,2360,920.2344,2364,916.2344" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="2055" x2="2366" y1="916.2344" y2="916.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="2062" y="911.1685">Отримання файлу витягу зі сховища</text><polygon fill="#383838" points="2066,941.3672,2056,945.3672,2066,949.3672,2062,945.3672" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;" x1="2060" x2="2371" y1="945.3672" y2="945.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="2072" y="940.3013">Файл витягу</text><polygon fill="#383838" points="846.5,970.5,836.5,974.5,846.5,978.5,842.5,974.5" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="840.5" x2="2049" y1="974.5" y2="974.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="852.5" y="969.4341">Дані витягу</text><polygon fill="#383838" points="464.5,999.6328,454.5,1003.6328,464.5,1007.6328,460.5,1003.6328" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="458.5" x2="829.5" y1="1003.6328" y2="1003.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="470.5" y="998.5669">Файл витягу</text><polygon fill="#383838" points="76.5,1028.7656,66.5,1032.7656,76.5,1036.7656,72.5,1032.7656" style="stroke:#383838;stroke-width:1.0;"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="70.5" x2="447.5" y1="1032.7656" y2="1032.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="82.5" y="1027.6997">Файл витягу</text><!--MD5=[589afc69436a73fcfdd3a8e18a0b7375]
@startuml
skinparam monochrome true

actor "Користувач" as user
participant "Клієнтський додаток\n кабінету користувача" as cabinet
participant "Kong \nAPI Management" as kong
participant "Сервіс управління \n бізнес-процесами користувача" as user_process_mngmnt

box "Виконання бізнес-процесів"
participant "Сервіс виконання бізнес-процесів" as bpms
database "Операційне сховище БП" as bpms_db
end box

box "Підсистема звітності" #LightBlue
participant "API отримання витягів" as report_storage_api
participant "Об'єктне сховище Ceph" as ceph
end box

skinparam responseMessageBelowArrow false
title Отримання згенерованого в рамках бізнес-процесу витягу ==

user -> cabinet: Перегляд наданих послуг
activate cabinet
  cabinet -> kong: Запит на отримання наданих послуг
  activate kong
    kong -> user_process_mngmnt: Запит на отримання наданих послуг
    activate user_process_mngmnt
      user_process_mngmnt -> bpms: Отримання завершених бізнес-процесів користувача
      activate bpms
        bpms -> bpms_db: Отримання історичних бізнес-процесів
        note over bpms, bpms_db: SYS_VAR_PROCESS_COMPLETION_RESULT та SYS_VAR_PROCESS_EXCERPT_ID
        bpms -> bpms_db: Отримання значень історичних змінних процесів
        bpms -> bpms: Формування агрегованого переліку процесів
      return Перелік завершених бізнес-процесів \n та їх змінних
    return Перелік наданих послуг
  return Перелік наданих послуг
  cabinet -> cabinet: Маркування послуг, для яких \nвизначена змінна SYS_VAR_PROCESS_EXCERPT_ID \nяк послуг, для яких доступне завантаження витягу
return Перелік наданих послуг

group Бізнес-процес, результатом якого є згенерований витяг [наявність змінної SYS_VAR_PROCESS_EXCERPT_ID]
user -> cabinet: Завантаження витягу для обраного бізнес-процесу \nза значенням SYS_VAR_PROCESS_EXCERPT_ID
activate cabinet
  cabinet -> kong: Запит на отримання файлу витягу
  activate kong
    kong -> report_storage_api: Запит на отримання витягу за ідентифікатором та Access Token користувача, який ініціював бізнес-процес
    activate report_storage_api
      report_storage_api -> report_storage_api: Авторизація запиту на отримання витягу \n(keycloakId збережений у процесі генерації \nвитягу має відповідати keycloakId, \nотриманому з Access Token)
      report_storage_api -> report_storage_api: Перевірка співпадання чек-сум документу, \nзбереженому в "Об'єктному сховищі Ceph" \nта оригінальній чек-сумі, отриманої \nвід згенерованого витягу
      report_storage_api -> ceph: Отримання файлу витягу зі сховища
      ceph -> report_storage_api: Файл витягу
    return Дані витягу
  return Файл витягу
return Файл витягу
end
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>