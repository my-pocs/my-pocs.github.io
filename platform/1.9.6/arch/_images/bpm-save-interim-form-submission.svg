<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="706px" preserveAspectRatio="none" style="width:1263px;height:706px;background:#FFFFFF;" version="1.1" viewBox="0 0 1263 706" width="1263px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="485.4609" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="102.5" y="109.8906"/><rect fill="#FFFFFF" height="423.4961" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="450.5" y="171.8555"/><rect fill="#FFFFFF" height="353.5313" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="640.5" y="241.8203"/><rect fill="#FFFFFF" height="206.7344" style="stroke:#000000;stroke-width:2.0;" width="1246.5" x="10" y="381.6172"/><rect fill="#FFFFFF" height="73.0703" style="stroke:none;stroke-width:1.0;" width="1246.5" x="10" y="515.2813"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="107" x2="107" y1="99.8906" y2="605.3516"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="455.5" x2="455.5" y1="99.8906" y2="605.3516"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="645" x2="645" y1="99.8906" y2="605.3516"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="984.5" x2="984.5" y1="99.8906" y2="605.3516"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1153.5" x2="1153.5" y1="99.8906" y2="605.3516"/><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="175" x="20" y="52.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="29" y="72.292">Клієнтський додаток</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="31" y="88.5889">кабінету користувача</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="175" x="20" y="604.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="29" y="624.3467">Клієнтський додаток</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="31" y="640.6436">кабінету користувача</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="130" x="390.5" y="52.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="435.5" y="72.292">Kong</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="397.5" y="88.5889">API Management</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="130" x="390.5" y="604.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="435.5" y="624.3467">Kong</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="397.5" y="640.6436">API Management</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="181" x="555" y="52.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="578.5" y="72.292">Сервіс управління</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="562" y="88.5889">задачами користувачів</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="181" x="555" y="604.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="578.5" y="624.3467">Сервіс управління</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="562" y="640.6436">задачами користувачів</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="132" x="918.5" y="52.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="925.5" y="72.292">Сервіс валідації</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="931.5" y="88.5889">даних UI-форм</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="132" x="918.5" y="604.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="925.5" y="624.3467">Сервіс валідації</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="931.5" y="640.6436">даних UI-форм</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1131" y="63.9951">Redis</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="1078" y="80.292">in-memory сховище</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="1060.5" y="96.5889">(bpm-form-submissions.*)</text><path d="M1135.5,15 C1135.5,5 1153.5,5 1153.5,5 C1153.5,5 1171.5,5 1171.5,15 L1171.5,41 C1171.5,51 1153.5,51 1153.5,51 C1153.5,51 1135.5,51 1135.5,41 L1135.5,15 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.5;"/><path d="M1135.5,15 C1135.5,25 1153.5,25 1153.5,25 C1153.5,25 1171.5,25 1171.5,15 " fill="none" style="stroke:#2688D4;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1131" y="617.3467">Redis</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="1078" y="633.6436">in-memory сховище</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="1060.5" y="649.9404">(bpm-form-submissions.*)</text><path d="M1135.5,663.2422 C1135.5,653.2422 1153.5,653.2422 1153.5,653.2422 C1153.5,653.2422 1171.5,653.2422 1171.5,663.2422 L1171.5,689.2422 C1171.5,699.2422 1153.5,699.2422 1153.5,699.2422 C1153.5,699.2422 1135.5,699.2422 1135.5,689.2422 L1135.5,663.2422 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.5;"/><path d="M1135.5,663.2422 C1135.5,673.2422 1153.5,673.2422 1153.5,673.2422 C1153.5,673.2422 1171.5,673.2422 1171.5,663.2422 " fill="none" style="stroke:#2688D4;stroke-width:1.5;"/><rect fill="#FFFFFF" height="485.4609" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="102.5" y="109.8906"/><rect fill="#FFFFFF" height="423.4961" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="450.5" y="171.8555"/><rect fill="#FFFFFF" height="353.5313" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="640.5" y="241.8203"/><polygon fill="#2688D4" points="438.5,167.8555,448.5,171.8555,438.5,175.8555,442.5,171.8555" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="112.5" x2="444.5" y1="171.8555" y2="171.8555"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="315" x="119.5" y="151.6567">Проміжне збереження даних UI-форми задачі:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="119.5" y="166.7896">POST /api/task/{id}/save</text><path d="M13,114.8906 L13,199.8906 L97,199.8906 L97,124.8906 L87,114.8906 L13,114.8906 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M87,114.8906 L87,124.8906 L97,124.8906 L87,114.8906 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="19" y="131.9575">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="27" y="147.0903">"data": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="35" y="162.2231">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="27" y="177.356">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="19" y="192.4888">}</text><polygon fill="#2688D4" points="628.5,237.8203,638.5,241.8203,628.5,245.8203,632.5,241.8203" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="460.5" x2="634.5" y1="241.8203" y2="241.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="467.5" y="221.6216">POST /api/task/{id}/save</text><ellipse cx="473" cy="232.3203" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="478.5" y="236.7544">X-Access-Token</text><polygon fill="#2688D4" points="972.5,307.7852,982.5,311.7852,972.5,315.7852,976.5,311.7852" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="650.5" x2="978.5" y1="311.7852" y2="311.7852"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="657.5" y="291.5864">Валідація даних згідно схеми UI-форми:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="657.5" y="306.7192">POST /api/form-submissions/{form-key}/validate</text><path d="M551,254.8203 L551,339.8203 L635,339.8203 L635,264.8203 L625,254.8203 L551,254.8203 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M625,254.8203 L625,264.8203 L635,264.8203 L625,254.8203 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="557" y="271.8872">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="565" y="287.02">"data": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="573" y="302.1528">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="565" y="317.2856">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="557" y="332.4185">}</text><polygon fill="#2688D4" points="661.5,362.6172,651.5,366.6172,661.5,370.6172,657.5,366.6172" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="655.5" x2="983.5" y1="366.6172" y2="366.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="667.5" y="361.5513">Результат валідації</text><path d="M10,381.6172 L74,381.6172 L74,388.6172 L64,398.6172 L10,398.6172 L10,381.6172 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="206.7344" style="stroke:#000000;stroke-width:2.0;" width="1246.5" x="10" y="381.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="394.6841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192" x="89" y="393.8276">[Валідацію даних пройдено]</text><polygon fill="#2688D4" points="1141.5,431.0156,1151.5,435.0156,1141.5,439.0156,1145.5,435.0156" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="650.5" x2="1147.5" y1="435.0156" y2="435.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="657.5" y="414.8169">Збереження проміжних даних UI-форми задачі</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="657.5" y="429.9497">&lt;processInstanceId, taskDefinitionKey&gt;</text><polygon fill="#2688D4" points="661.5,445.0156,651.5,449.0156,661.5,453.0156,657.5,449.0156" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="655.5" x2="1152.5" y1="449.0156" y2="449.0156"/><polygon fill="#2688D4" points="471.5,474.1484,461.5,478.1484,471.5,482.1484,467.5,478.1484" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="465.5" x2="639.5" y1="478.1484" y2="478.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="477.5" y="473.0825">200</text><polygon fill="#2688D4" points="123.5,503.2813,113.5,507.2813,123.5,511.2813,119.5,507.2813" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="117.5" x2="449.5" y1="507.2813" y2="507.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="129.5" y="502.2153">200 - Дані успішно збережено</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1256.5" y1="516.2813" y2="516.2813"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="212" x="15" y="526.4917">[Валідацію даних не пройдено]</text><polygon fill="#2688D4" points="471.5,547.2188,461.5,551.2188,471.5,555.2188,467.5,551.2188" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="465.5" x2="639.5" y1="551.2188" y2="551.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="477.5" y="546.1528">422</text><polygon fill="#2688D4" points="123.5,576.3516,113.5,580.3516,123.5,584.3516,119.5,580.3516" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="117.5" x2="449.5" y1="580.3516" y2="580.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="129.5" y="575.2856">422 - Валідацію даних не пройдено</text><!--MD5=[bdacc101bf4587c405dc0b68b6126521]
@startuml
skinparam shadowing false
skinparam DatabaseBackgroundColor white
skinparam DatabaseBorderColor #2688d4
skinparam QueueBackgroundColor white
skinparam QueueBorderColor #2688d4
skinparam NoteBackgroundColor white
skinparam NoteBorderColor #2688d4
skinparam sequence {
    ArrowColor #2688d4
    ActorBorderColor #2688d4
    LifeLineBorderColor #2688d4
    ParticipantBorderColor #2688d4
    ParticipantBackgroundColor white
    BoxBorderColor #2688d4
    BoxBackgroundColor white
}

participant "Клієнтський додаток\n кабінету користувача" as portal
participant "Kong \nAPI Management" as kong
participant "Сервіс управління \nзадачами користувачів" as user_task_management
participant "Сервіс валідації \nданих UI-форм" as form_submission_validation
database "Redis\nin-memory сховище \n(bpm-form-submissions.*)" as redis

activate portal
  portal -> kong: Проміжне збереження даних UI-форми задачі: \nPOST /api/task/{id}/save
  note left
    {
      "data": {
        ...
      }
    }
  end note
  activate kong
    kong -> user_task_management: POST /api/task/{id}/save \n*X-Access-Token
      activate user_task_management
        user_task_management -> form_submission_validation: Валідація даних згідно схеми UI-форми: \nPOST /api/form-submissions/{form-key}/validate
        note left
          {
            "data": {
              ...
            }
          }
        end note
        form_submission_validation - -> user_task_management: Результат валідації
        alt Валідацію даних пройдено
          user_task_management -> redis: Збереження проміжних даних UI-форми задачі\n<processInstanceId, taskDefinitionKey>
          redis - -> user_task_management
          user_task_management - -> kong: 200
          kong - -> portal: 200 - Дані успішно збережено
        else Валідацію даних не пройдено
          user_task_management - -> kong: 422
          kong - -> portal: 422 - Валідацію даних не пройдено
        end
      deactivate user_task_management
  deactivate kong
deactivate portal
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>