<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1437px" preserveAspectRatio="none" style="width:2277px;height:1437px;background:#FFFFFF;" version="1.1" viewBox="0 0 2277 1437" width="2277px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1425.8281" style="stroke:#2688D4;stroke-width:1.0;" width="230" x="1287.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="121" x="1342" y="18.0669">Platform Jenkins</text><rect fill="#FFFFFF" height="282.4609" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="401.5" y="131.7266"/><rect fill="#FFFFFF" height="901.0469" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="1397.5" y="414.1875"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="62" x2="62" y1="100.5938" y2="1333.2344"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="406" x2="406" y1="100.5938" y2="1333.2344"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="904" x2="904" y1="100.5938" y2="1333.2344"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1402.5" x2="1402.5" y1="100.5938" y2="1333.2344"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1815" x2="1815" y1="100.5938" y2="1333.2344"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2176.5" x2="2176.5" y1="100.5938" y2="1333.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="5" y="80.9951">Адміністратор</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="17" y="97.292">платформи</text><ellipse cx="62.5" cy="15" fill="#FFFFFF" rx="8" ry="8" style="stroke:#2688D4;stroke-width:2.0;"/><path d="M62.5,23 L62.5,50 M49.5,31 L75.5,31 M62.5,50 L49.5,65 M62.5,50 L75.5,65 " fill="none" style="stroke:#2688D4;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="5" y="1345.2295">Адміністратор</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="17" y="1361.5264">платформи</text><ellipse cx="62.5" cy="1374.8281" fill="#FFFFFF" rx="8" ry="8" style="stroke:#2688D4;stroke-width:2.0;"/><path d="M62.5,1382.8281 L62.5,1409.8281 M49.5,1390.8281 L75.5,1390.8281 M62.5,1409.8281 L49.5,1424.8281 M62.5,1409.8281 L75.5,1424.8281 " fill="none" style="stroke:#2688D4;stroke-width:2.0;"/><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="131" x="341" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="358.5" y="56.6982">Control Plane</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="376" y="72.9951">Console</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117" x="348" y="89.292">(control-plane)</text><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="131" x="341" y="1332.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="358.5" y="1352.2295">Control Plane</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="376" y="1368.5264">Console</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117" x="348" y="1384.8232">(control-plane)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="865.5" y="64.6982">OpenShift</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="851" y="80.9951">'control-plane'</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="861" y="97.292">namespace</text><ellipse cx="904.5" cy="35.7031" fill="#FFFFFF" rx="12" ry="12" style="stroke:#2688D4;stroke-width:2.0;"/><line style="stroke:#2688D4;stroke-width:2.0;" x1="892.5" x2="916.5" y1="49.7031" y2="49.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="865.5" y="1345.2295">OpenShift</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="851" y="1361.5264">'control-plane'</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="861" y="1377.8232">namespace</text><ellipse cx="904.5" cy="1397.125" fill="#FFFFFF" rx="12" ry="12" style="stroke:#2688D4;stroke-width:2.0;"/><line style="stroke:#2688D4;stroke-width:2.0;" x1="892.5" x2="916.5" y1="1411.125" y2="1411.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="1291.5" y="97.292">Пайплайн створення реєстру</text><ellipse cx="1402.5" cy="68.2969" fill="#FFFFFF" rx="12" ry="12" style="stroke:#2688D4;stroke-width:2.0;"/><polygon fill="#2688D4" points="1398.5,56.2969,1404.5,51.2969,1402.5,56.2969,1404.5,61.2969,1398.5,56.2969" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="1291.5" y="1345.2295">Пайплайн створення реєстру</text><ellipse cx="1402.5" cy="1364.5313" fill="#FFFFFF" rx="12" ry="12" style="stroke:#2688D4;stroke-width:2.0;"/><polygon fill="#2688D4" points="1398.5,1352.5313,1404.5,1347.5313,1402.5,1352.5313,1404.5,1357.5313,1398.5,1352.5313" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="1776.5" y="64.6982">OpenShift</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1770" y="80.9951">'&lt;registry&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1772" y="97.292">namespace</text><ellipse cx="1815.5" cy="35.7031" fill="#FFFFFF" rx="12" ry="12" style="stroke:#2688D4;stroke-width:2.0;"/><line style="stroke:#2688D4;stroke-width:2.0;" x1="1803.5" x2="1827.5" y1="49.7031" y2="49.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="1776.5" y="1345.2295">OpenShift</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1770" y="1361.5264">'&lt;registry&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1772" y="1377.8232">namespace</text><ellipse cx="1815.5" cy="1397.125" fill="#FFFFFF" rx="12" ry="12" style="stroke:#2688D4;stroke-width:2.0;"/><line style="stroke:#2688D4;stroke-width:2.0;" x1="1803.5" x2="1827.5" y1="1411.125" y2="1411.125"/><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="178" x="2087.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="2104" y="56.6982">Сервіс нотифікацій</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="2127.5" y="72.9951">користувачів</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="164" x="2094.5" y="89.292">(notification-service)</text><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="178" x="2087.5" y="1332.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="2104" y="1352.2295">Сервіс нотифікацій</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="2127.5" y="1368.5264">користувачів</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="164" x="2094.5" y="1384.8232">(notification-service)</text><rect fill="#FFFFFF" height="282.4609" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="401.5" y="131.7266"/><rect fill="#FFFFFF" height="901.0469" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="1397.5" y="414.1875"/><polygon fill="#2688D4" points="389.5,127.7266,399.5,131.7266,389.5,135.7266,393.5,131.7266" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="62.5" x2="395.5" y1="131.7266" y2="131.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="69.5" y="126.6606">Створення / Редагування конфігурації реєстру</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="411.5" x2="453.5" y1="164.9258" y2="164.9258"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="453.5" x2="453.5" y1="164.9258" y2="177.9258"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="412.5" x2="453.5" y1="177.9258" y2="177.9258"/><polygon fill="#2688D4" points="422.5,173.9258,412.5,177.9258,422.5,181.9258,418.5,177.9258" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="418.5" y="159.8599">Внесення даних підключення до сервісу Дія</text><path d="M47,144.7266 L47,184.7266 L396,184.7266 L396,154.7266 L386,144.7266 L47,144.7266 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M386,144.7266 L386,154.7266 L396,154.7266 L386,144.7266 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="53" y="161.7935">"notifications.diia.url": '&lt;external-diia-url&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="328" x="53" y="176.9263">"notifications.diia.partner.token": '&lt;partner-token&gt;'</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="411.5" x2="453.5" y1="226.2578" y2="226.2578"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="453.5" x2="453.5" y1="226.2578" y2="239.2578"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="412.5" x2="453.5" y1="239.2578" y2="239.2578"/><polygon fill="#2688D4" points="422.5,235.2578,412.5,239.2578,422.5,243.2578,418.5,239.2578" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="418.5" y="206.0591">Формування даних для створення ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="469" x="418.5" y="221.1919">&lt;registry_name&gt;-notification-service-diia-channel-configuration</text><polygon fill="#2688D4" points="892.5,279.5234,902.5,283.5234,892.5,287.5234,896.5,283.5234" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="411.5" x2="898.5" y1="283.5234" y2="283.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="418.5" y="263.3247">Створення ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="469" x="418.5" y="278.4575">&lt;registry_name&gt;-notification-service-diia-channel-configuration</text><path d="M106,256.8242 L106,281.8242 L396,281.8242 L396,266.8242 L386,256.8242 L106,256.8242 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M386,256.8242 L386,266.8242 L396,266.8242 L386,256.8242 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="112" y="273.8911">"notifications.diia.url": '&lt;external-diia-url&gt;'</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="411.5" x2="453.5" y1="327.7891" y2="327.7891"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="453.5" x2="453.5" y1="327.7891" y2="340.7891"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="412.5" x2="453.5" y1="340.7891" y2="340.7891"/><polygon fill="#2688D4" points="422.5,336.7891,412.5,340.7891,422.5,344.7891,418.5,340.7891" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="418.5" y="307.5903">Формування даних для створення Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="469" x="418.5" y="322.7231">&lt;registry_name&gt;-notification-service-diia-channel-configuration</text><polygon fill="#2688D4" points="892.5,381.0547,902.5,385.0547,892.5,389.0547,896.5,385.0547" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="411.5" x2="898.5" y1="385.0547" y2="385.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="418.5" y="364.856">Створення Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="469" x="418.5" y="379.9888">&lt;registry_name&gt;-notification-service-diia-channel-configuration</text><path d="M47,358.3555 L47,383.3555 L396,383.3555 L396,368.3555 L386,358.3555 L47,358.3555 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M386,358.3555 L386,368.3555 L396,368.3555 L386,358.3555 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="328" x="53" y="375.4224">"notifications.diia.partner.token": '&lt;partner-token&gt;'</text><polygon fill="#2688D4" points="1385.5,410.1875,1395.5,414.1875,1385.5,418.1875,1389.5,414.1875" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="406.5" x2="1391.5" y1="414.1875" y2="414.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="413.5" y="409.1216">Запуск пайплайну створення реєстру</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2270.5" x="0" y="442.7539"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2270.5" y1="442.7539" y2="442.7539"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2270.5" y1="445.7539" y2="445.7539"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="465" x="902.75" y="432.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="446" x="908.75" y="448.2544">Підготовка налаштувань підключення до Дії для реєстру</text><polygon fill="#2688D4" points="915.5,497.5859,905.5,501.5859,915.5,505.5859,911.5,501.5859" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="909.5" x2="1396.5" y1="501.5859" y2="501.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="921.5" y="481.3872">Експорт ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="469" x="921.5" y="496.52">&lt;registry_name&gt;-notification-service-diia-channel-configuration</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1407.5" x2="1449.5" y1="545.8516" y2="545.8516"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1449.5" x2="1449.5" y1="545.8516" y2="558.8516"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1408.5" x2="1449.5" y1="558.8516" y2="558.8516"/><polygon fill="#2688D4" points="1418.5,554.8516,1408.5,558.8516,1418.5,562.8516,1414.5,558.8516" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="1414.5" y="525.6528">Формування даних для створення ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="337" x="1414.5" y="540.7856">notification-service-diia-channel-configuration</text><polygon fill="#2688D4" points="1803.5,599.1172,1813.5,603.1172,1803.5,607.1172,1807.5,603.1172" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1407.5" x2="1809.5" y1="603.1172" y2="603.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="1414.5" y="582.9185">Створення ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="337" x="1414.5" y="598.0513">notification-service-diia-channel-configuration</text><polygon fill="#2688D4" points="915.5,643.3828,905.5,647.3828,915.5,651.3828,911.5,647.3828" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="909.5" x2="1396.5" y1="647.3828" y2="647.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="921.5" y="627.1841">Видалення ConfigMap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="469" x="921.5" y="642.3169">&lt;registry_name&gt;-notification-service-diia-channel-configuration</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2270.5" x="0" y="675.9492"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2270.5" y1="675.9492" y2="675.9492"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2270.5" y1="678.9492" y2="678.9492"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="529" x="870.75" y="665.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="510" x="876.75" y="681.4497">Підготовка налаштувань підключення до Дії (Secret) для реєстру</text><polygon fill="#2688D4" points="915.5,730.7813,905.5,734.7813,915.5,738.7813,911.5,734.7813" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="909.5" x2="1396.5" y1="734.7813" y2="734.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="921.5" y="714.5825">Експорт Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="469" x="921.5" y="729.7153">&lt;registry_name&gt;-notification-service-diia-channel-configuration</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1407.5" x2="1449.5" y1="779.0469" y2="779.0469"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1449.5" x2="1449.5" y1="779.0469" y2="792.0469"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1408.5" x2="1449.5" y1="792.0469" y2="792.0469"/><polygon fill="#2688D4" points="1418.5,788.0469,1408.5,792.0469,1418.5,796.0469,1414.5,792.0469" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="1414.5" y="758.8481">Формування даних для створення Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="337" x="1414.5" y="773.981">notification-service-diia-channel-configuration</text><polygon fill="#2688D4" points="1803.5,832.3125,1813.5,836.3125,1803.5,840.3125,1807.5,836.3125" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1407.5" x2="1809.5" y1="836.3125" y2="836.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="1414.5" y="816.1138">Створення Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="337" x="1414.5" y="831.2466">notification-service-diia-channel-configuration</text><polygon fill="#2688D4" points="915.5,876.5781,905.5,880.5781,915.5,884.5781,911.5,880.5781" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="909.5" x2="1396.5" y1="880.5781" y2="880.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="921.5" y="860.3794">Видалення Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="469" x="921.5" y="875.5122">&lt;registry_name&gt;-notification-service-diia-channel-configuration</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2270.5" x="0" y="909.1445"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2270.5" y1="909.1445" y2="909.1445"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2270.5" y1="912.1445" y2="912.1445"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="411" x="929.75" y="898.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="392" x="935.75" y="914.645">Налаштування доступу до Дії для сервісів реєстру</text><polygon fill="#2688D4" points="1803.5,1042.6406,1813.5,1046.6406,1803.5,1050.6406,1807.5,1046.6406" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1407.5" x2="1809.5" y1="1046.6406" y2="1046.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384" x="1414.5" y="1041.5747">Створення Istio ServiceEntry для зовнішнього сервісу Дія</text><path d="M1120,936.7109 L1120,1142.7109 L1392,1142.7109 L1392,946.7109 L1382,936.7109 L1120,936.7109 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M1382,936.7109 L1382,946.7109 L1392,946.7109 L1382,936.7109 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="1126" y="953.7778">apiVersion: networking.istio.io/v1alpha3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1126" y="968.9106">kind: ServiceEntry</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="1126" y="984.0435">metadata:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1134" y="999.1763">name: diia-external-service</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="1126" y="1014.3091">spec:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="1134" y="1029.4419">hosts:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1134" y="1044.5747">- &lt;notifications.diia.url&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="1134" y="1059.7075">location: MESH_EXTERNAL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="1134" y="1074.8403">ports:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1134" y="1089.9731">- number: 443</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1142" y="1105.106">name: https</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1142" y="1120.2388">protocol: TLS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1134" y="1135.3716">resolution: DNS</text><polygon fill="#2688D4" points="1803.5,1180.7031,1813.5,1184.7031,1803.5,1188.7031,1807.5,1184.7031" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1407.5" x2="1809.5" y1="1184.7031" y2="1184.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="1414.5" y="1164.5044">Обмеження доступу до ServiceEntry</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="1414.5" y="1179.6372">зовнішнього сервісу Дія тільки для</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140" x="1658.5" y="1179.6372">notification-service</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2270.5" x="0" y="1213.2695"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2270.5" y1="1213.2695" y2="1213.2695"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2270.5" y1="1216.2695" y2="1216.2695"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="382" x="944.25" y="1202.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="363" x="950.25" y="1218.77">Застосування налаштувань до сервісів реєстру</text><polygon fill="#2688D4" points="2164.5,1252.9688,2174.5,1256.9688,2164.5,1260.9688,2168.5,1256.9688" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1407.5" x2="2170.5" y1="1256.9688" y2="1256.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="1414.5" y="1251.9028">Рестарт сервісу</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140" x="1527.5" y="1251.9028">notification-service</text><polygon fill="#2688D4" points="1826.5,1297.2344,1816.5,1301.2344,1826.5,1305.2344,1822.5,1301.2344" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1820.5" x2="2175.5" y1="1301.2344" y2="1301.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="1832.5" y="1281.0356">Читання ConfigMap та  Secret</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="337" x="1832.5" y="1296.1685">notification-service-diia-channel-configuration</text><polygon fill="#2688D4" points="73.5,1311.2344,63.5,1315.2344,73.5,1319.2344,69.5,1315.2344" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="67.5" x2="1401.5" y1="1315.2344" y2="1315.2344"/><!--MD5=[3330c307f25c17cc08b67836132eb51d]
@startuml
skinparam shadowing false
skinparam DatabaseBackgroundColor white
skinparam DatabaseBorderColor #2688d4
skinparam QueueBackgroundColor white
skinparam QueueBorderColor #2688d4
skinparam NoteBackgroundColor white
skinparam NoteBorderColor #2688d4
skinparam EntityBackgroundColor white
skinparam EntityBorderColor #2688d4
skinparam ControlBackgroundColor white
skinparam ControlBorderColor #2688d4
skinparam ActorBackgroundColor white

skinparam sequence {
    ArrowColor #2688d4
    ActorBorderColor #2688d4
    LifeLineBorderColor #2688d4
    ParticipantBorderColor #2688d4
    ParticipantBackgroundColor white
    BoxBorderColor #2688d4
    BoxBackgroundColor white
}

actor "Адміністратор \nплатформи" as platform_admin
participant "Control Plane \nConsole \n**(control-plane)**" as control_plane

entity "OpenShift \n'control-plane' \nnamespace" as openshift_control_plane_namespace

box Platform Jenkins
  control "Пайплайн створення реєстру" as registry_creation_pipeline
end box

entity "OpenShift \n'<registry>' \nnamespace" as openshift_registry_namespace
participant "Сервіс нотифікацій \nкористувачів \n**(notification-service)**" as notification_service

platform_admin -> control_plane: Створення / Редагування конфігурації реєстру
activate control_plane
  control_plane -> control_plane: Внесення даних підключення до сервісу Дія
  note left
    "notifications.diia.url": '<external-diia-url>'
    "notifications.diia.partner.token": '<partner-token>'
  end note

  control_plane -> control_plane: Формування даних для створення ConfigMap\n**<registry_name>-notification-service-diia-channel-configuration**
  control_plane -> openshift_control_plane_namespace: Створення ConfigMap\n**<registry_name>-notification-service-diia-channel-configuration**
  note left
    "notifications.diia.url": '<external-diia-url>'
  end note

  control_plane -> control_plane: Формування даних для створення Secret\n**<registry_name>-notification-service-diia-channel-configuration**
  control_plane -> openshift_control_plane_namespace: Створення Secret\n**<registry_name>-notification-service-diia-channel-configuration**
  note left
    "notifications.diia.partner.token": '<partner-token>'
  end note

control_plane -> registry_creation_pipeline: Запуск пайплайну створення реєстру
deactivate control_plane

activate registry_creation_pipeline
  == Підготовка налаштувань підключення до Дії для реєстру ==
  registry_creation_pipeline -> openshift_control_plane_namespace: Експорт ConfigMap\n**<registry_name>-notification-service-diia-channel-configuration**
  registry_creation_pipeline -> registry_creation_pipeline: Формування даних для створення ConfigMap\n**notification-service-diia-channel-configuration**
  registry_creation_pipeline -> openshift_registry_namespace: Створення ConfigMap\n**notification-service-diia-channel-configuration**
  registry_creation_pipeline -> openshift_control_plane_namespace: Видалення ConfigMap\n**<registry_name>-notification-service-diia-channel-configuration**

  == Підготовка налаштувань підключення до Дії (Secret) для реєстру ==
  registry_creation_pipeline -> openshift_control_plane_namespace: Експорт Secret\n**<registry_name>-notification-service-diia-channel-configuration**
  registry_creation_pipeline -> registry_creation_pipeline: Формування даних для створення Secret\n**notification-service-diia-channel-configuration**
  registry_creation_pipeline -> openshift_registry_namespace: Створення Secret\n**notification-service-diia-channel-configuration**
  registry_creation_pipeline -> openshift_control_plane_namespace: Видалення Secret\n**<registry_name>-notification-service-diia-channel-configuration**

  == Налаштування доступу до Дії для сервісів реєстру ==
  registry_creation_pipeline -> openshift_registry_namespace: Створення Istio ServiceEntry для зовнішнього сервісу Дія
  note left
    apiVersion: networking.istio.io/v1alpha3
    kind: ServiceEntry
    metadata:
      name: diia-external-service
    spec:
      hosts:
      - <notifications.diia.url>
      location: MESH_EXTERNAL
      ports:
      - number: 443
        name: https
        protocol: TLS
      resolution: DNS
  end note
  registry_creation_pipeline -> openshift_registry_namespace: Обмеження доступу до ServiceEntry \nзовнішнього сервісу Дія тільки для **notification-service**

== Застосування налаштувань до сервісів реєстру ==
registry_creation_pipeline -> notification_service: Рестарт сервісу **notification-service**
notification_service -> openshift_registry_namespace: Читання ConfigMap та  Secret\n**notification-service-diia-channel-configuration**
registry_creation_pipeline - -> platform_admin

deactivate registry_creation_pipeline
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>