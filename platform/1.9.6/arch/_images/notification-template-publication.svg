<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3380px" preserveAspectRatio="none" style="width:2202px;height:3380px;background:#FFFFFF;" version="1.1" viewBox="0 0 2202 3380" width="2202px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="3368.0625" style="stroke:#2688D4;stroke-width:1.0;" width="208" x="448.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="118" x="493.5" y="18.0669">Registry Jenkins</text><rect fill="#FFFFFF" height="114.3984" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="219.5" y="161.9922"/><rect fill="#FFFFFF" height="2936.8125" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="547.5" y="320.6563"/><rect fill="#FFFFFF" height="2820.1484" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="791" y="437.3203"/><rect fill="#FFFFFF" height="2144.1641" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="1155" y="1122.3047"/><rect fill="#FFFFFF" height="2777.0156" style="stroke:#000000;stroke-width:2.0;" width="1760" x="436" y="452.3203"/><rect fill="#FFFFFF" height="276.4609" style="stroke:#000000;stroke-width:2.0;" width="487.5" x="652.5" y="606.1172"/><rect fill="#FFFFFF" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="623.5" x="652.5" y="1303.5"/><rect fill="#FFFFFF" height="1464.6484" style="stroke:#000000;stroke-width:2.0;" width="1543.5" x="642.5" y="1757.6875"/><rect fill="#FFFFFF" height="549.1875" style="stroke:#000000;stroke-width:2.0;" width="1132" x="1044" y="1839.0859"/><rect fill="#FFFFFF" height="769.9297" style="stroke:none;stroke-width:1.0;" width="1543.5" x="642.5" y="2452.4063"/><rect fill="#FFFFFF" height="569.3281" style="stroke:#000000;stroke-width:2.0;" width="1499" x="652.5" y="2646.0078"/><rect fill="#FFFFFF" height="394.9922" style="stroke:#000000;stroke-width:2.0;" width="949.5" x="1044" y="2727.4063"/><rect fill="#FFFFFF" height="28.8047" style="stroke:none;stroke-width:1.0;" width="1499" x="652.5" y="3186.5313"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="62" x2="62" y1="100.5938" y2="3275.4688"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="224.5" x2="224.5" y1="100.5938" y2="3275.4688"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="372.5" x2="372.5" y1="100.5938" y2="3275.4688"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="552.5" x2="552.5" y1="100.5938" y2="3275.4688"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="795.5" x2="795.5" y1="100.5938" y2="3275.4688"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1160" x2="1160" y1="100.5938" y2="3275.4688"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1551.5" x2="1551.5" y1="100.5938" y2="3275.4688"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1878.5" x2="1878.5" y1="100.5938" y2="3275.4688"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2067.5" x2="2067.5" y1="100.5938" y2="3275.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="5" y="80.9951">Адміністратор</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="16.5" y="97.292">регламенту</text><ellipse cx="62.5" cy="15" fill="#FFFFFF" rx="8" ry="8" style="stroke:#2688D4;stroke-width:2.0;"/><path d="M62.5,23 L62.5,50 M49.5,31 L75.5,31 M62.5,50 L49.5,65 M62.5,50 L75.5,65 " fill="none" style="stroke:#2688D4;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="5" y="3287.4639">Адміністратор</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="16.5" y="3303.7607">регламенту</text><ellipse cx="62.5" cy="3317.0625" fill="#FFFFFF" rx="8" ry="8" style="stroke:#2688D4;stroke-width:2.0;"/><path d="M62.5,3325.0625 L62.5,3352.0625 M49.5,3333.0625 L75.5,3333.0625 M62.5,3352.0625 L49.5,3367.0625 M62.5,3352.0625 L75.5,3367.0625 " fill="none" style="stroke:#2688D4;stroke-width:2.0;"/><rect fill="#FFFFFF" height="79.1875" style="stroke:#2688D4;stroke-width:1.5;" width="146" x="151.5" y="20.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="158.5" y="40.4014">Сервіс перегляду</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="163.5" y="56.6982">та інспекції змін</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="179.5" y="72.9951">регламенту</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="197.5" y="89.292">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="44" x="202.5" y="89.292">gerrit</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="246.5" y="89.292">)</text><rect fill="#FFFFFF" height="79.1875" style="stroke:#2688D4;stroke-width:1.5;" width="146" x="151.5" y="3274.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="158.5" y="3294.4639">Сервіс перегляду</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="163.5" y="3310.7607">та інспекції змін</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="179.5" y="3327.0576">регламенту</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="197.5" y="3343.3545">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="44" x="202.5" y="3343.3545">gerrit</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="246.5" y="3343.3545">)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="321.5" y="64.6982">Репозиторій</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="324.5" y="80.9951">регламенту</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="354.5" y="97.292">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="20" x="359.5" y="97.292">git</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="379.5" y="97.292">)</text><path d="M354.5,15.7031 C354.5,5.7031 372.5,5.7031 372.5,5.7031 C372.5,5.7031 390.5,5.7031 390.5,15.7031 L390.5,41.7031 C390.5,51.7031 372.5,51.7031 372.5,51.7031 C372.5,51.7031 354.5,51.7031 354.5,41.7031 L354.5,15.7031 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.5;"/><path d="M354.5,15.7031 C354.5,25.7031 372.5,25.7031 372.5,25.7031 C372.5,25.7031 390.5,25.7031 390.5,15.7031 " fill="none" style="stroke:#2688D4;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="321.5" y="3287.4639">Репозиторій</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="324.5" y="3303.7607">регламенту</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="354.5" y="3320.0576">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="20" x="359.5" y="3320.0576">git</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="379.5" y="3320.0576">)</text><path d="M354.5,3333.3594 C354.5,3323.3594 372.5,3323.3594 372.5,3323.3594 C372.5,3323.3594 390.5,3323.3594 390.5,3333.3594 L390.5,3359.3594 C390.5,3369.3594 372.5,3369.3594 372.5,3369.3594 C372.5,3369.3594 354.5,3369.3594 354.5,3359.3594 L354.5,3333.3594 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.5;"/><path d="M354.5,3333.3594 C354.5,3343.3594 372.5,3343.3594 372.5,3343.3594 C372.5,3343.3594 390.5,3343.3594 390.5,3333.3594 " fill="none" style="stroke:#2688D4;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="512" y="80.9951">Пайплайн</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="452.5" y="97.292">публікації змін регламенту</text><ellipse cx="552.5" cy="52" fill="#FFFFFF" rx="12" ry="12" style="stroke:#2688D4;stroke-width:2.0;"/><polygon fill="#2688D4" points="548.5,40,554.5,35,552.5,40,554.5,45,548.5,40" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="512" y="3287.4639">Пайплайн</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="452.5" y="3303.7607">публікації змін регламенту</text><ellipse cx="552.5" cy="3323.0625" fill="#FFFFFF" rx="12" ry="12" style="stroke:#2688D4;stroke-width:2.0;"/><polygon fill="#2688D4" points="548.5,3311.0625,554.5,3306.0625,552.5,3311.0625,554.5,3316.0625,548.5,3311.0625" style="stroke:#2688D4;stroke-width:1.0;"/><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="267" x="662.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="766.5" y="56.6982">Утиліта</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="723" y="72.9951">публікації шаблонів</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="669.5" y="89.292">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="243" x="674.5" y="89.292">notification-template-publisher</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="917.5" y="89.292">)</text><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="267" x="662.5" y="3274.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="766.5" y="3294.4639">Утиліта</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="723" y="3310.7607">публікації шаблонів</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="669.5" y="3327.0576">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="243" x="674.5" y="3327.0576">notification-template-publisher</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="917.5" y="3327.0576">)</text><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="212" x="1054" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="1096.5" y="56.6982">Сервіс відправки</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="198" x="1061" y="72.9951">повідомлень користувачам</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="1079" y="89.292">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="152" x="1084" y="89.292">notification-service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="1236" y="89.292">)</text><rect fill="#FFFFFF" height="62.8906" style="stroke:#2688D4;stroke-width:1.5;" width="212" x="1054" y="3274.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="1096.5" y="3294.4639">Сервіс відправки</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="198" x="1061" y="3310.7607">повідомлень користувачам</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="1079" y="3327.0576">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="152" x="1084" y="3327.0576">notification-service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="1236" y="3327.0576">)</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="133" x="1485.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1497.5" y="72.9951">Diia Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="1492.5" y="89.292">Template Service</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="133" x="1485.5" y="3274.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1497.5" y="3294.4639">Diia Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="1492.5" y="3310.7607">Template Service</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="209" x="1774.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1796.5" y="72.9951">Шлюз нотифікацій Дія</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="1781.5" y="89.292">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="185" x="1786.5" y="89.292">diia-notification-service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="1971.5" y="89.292">)</text><rect fill="#FFFFFF" height="46.5938" style="stroke:#2688D4;stroke-width:1.5;" width="209" x="1774.5" y="3274.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1796.5" y="3294.4639">Шлюз нотифікацій Дія</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="1781.5" y="3310.7607">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="185" x="1786.5" y="3310.7607">diia-notification-service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="1971.5" y="3310.7607">)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="1993.5" y="80.9951">Сховище шаблонів</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="2040.5" y="97.292">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="2045.5" y="97.292">citus</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="2083.5" y="97.292">)</text><path d="M2049.5,32 C2049.5,22 2067.5,22 2067.5,22 C2067.5,22 2085.5,22 2085.5,32 L2085.5,58 C2085.5,68 2067.5,68 2067.5,68 C2067.5,68 2049.5,68 2049.5,58 L2049.5,32 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.5;"/><path d="M2049.5,32 C2049.5,42 2067.5,42 2067.5,42 C2067.5,42 2085.5,42 2085.5,32 " fill="none" style="stroke:#2688D4;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="1993.5" y="3287.4639">Сховище шаблонів</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="2040.5" y="3303.7607">(</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="2045.5" y="3303.7607">citus</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="5" x="2083.5" y="3303.7607">)</text><path d="M2049.5,3317.0625 C2049.5,3307.0625 2067.5,3307.0625 2067.5,3307.0625 C2067.5,3307.0625 2085.5,3307.0625 2085.5,3317.0625 L2085.5,3343.0625 C2085.5,3353.0625 2067.5,3353.0625 2067.5,3353.0625 C2067.5,3353.0625 2049.5,3353.0625 2049.5,3343.0625 L2049.5,3317.0625 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.5;"/><path d="M2049.5,3317.0625 C2049.5,3327.0625 2067.5,3327.0625 2067.5,3327.0625 C2067.5,3327.0625 2085.5,3327.0625 2085.5,3317.0625 " fill="none" style="stroke:#2688D4;stroke-width:1.5;"/><rect fill="#FFFFFF" height="114.3984" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="219.5" y="161.9922"/><rect fill="#FFFFFF" height="2936.8125" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="547.5" y="320.6563"/><rect fill="#FFFFFF" height="2820.1484" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="791" y="437.3203"/><rect fill="#FFFFFF" height="2144.1641" style="stroke:#2688D4;stroke-width:1.0;" width="10" x="1155" y="1122.3047"/><polygon fill="#2688D4" points="207.5,157.9922,217.5,161.9922,207.5,165.9922,211.5,161.9922" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="62.5" x2="213.5" y1="161.9922" y2="161.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="69.5" y="126.6606">Формування запиту</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="69.5" y="141.7935">на внесення змін</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="69.5" y="156.9263">до шаблонів</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="229.5" x2="271.5" y1="191.125" y2="191.125"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="271.5" x2="271.5" y1="191.125" y2="204.125"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="230.5" x2="271.5" y1="204.125" y2="204.125"/><polygon fill="#2688D4" points="240.5,200.125,230.5,204.125,240.5,208.125,236.5,204.125" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="236.5" y="186.0591">Інспекція змін</text><polygon fill="#2688D4" points="360.5,244.3906,370.5,248.3906,360.5,252.3906,364.5,248.3906" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="229.5" x2="366.5" y1="248.3906" y2="248.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="236.5" y="228.1919">Інтеграція змін</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="236.5" y="243.3247">до основної гілки</text><polygon fill="#2688D4" points="240.5,258.3906,230.5,262.3906,240.5,266.3906,236.5,262.3906" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="234.5" x2="371.5" y1="262.3906" y2="262.3906"/><polygon fill="#2688D4" points="73.5,272.3906,63.5,276.3906,73.5,280.3906,69.5,276.3906" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="67.5" x2="223.5" y1="276.3906" y2="276.3906"/><polygon fill="#2688D4" points="383.5,316.6563,373.5,320.6563,383.5,324.6563,379.5,320.6563" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="377.5" x2="546.5" y1="320.6563" y2="320.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="389.5" y="300.4575">Відслідковування змін</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15" x="393.5" y="315.5903">в '</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="101" x="408.5" y="315.5903">/notifications/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="509.5" y="315.5903">'</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="557.5" x2="599.5" y1="364.9219" y2="364.9219"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="599.5" x2="599.5" y1="364.9219" y2="377.9219"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="558.5" x2="599.5" y1="377.9219" y2="377.9219"/><polygon fill="#2688D4" points="568.5,373.9219,558.5,377.9219,568.5,381.9219,564.5,377.9219" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="564.5" y="344.7231">Формування переліку</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="564.5" y="359.856">нових/змінених шаблонів</text><polygon fill="#2688D4" points="779,433.3203,789,437.3203,779,441.3203,783,437.3203" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="557.5" x2="785" y1="437.3203" y2="437.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="564.5" y="401.9888">Публікація</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="564.5" y="417.1216">нових/змінених шаблонів</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129" x="564.5" y="432.2544">[email|diia|inbox]</text><path d="M436,452.3203 L513,452.3203 L513,459.3203 L503,469.3203 L436,469.3203 L436,452.3203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="2777.0156" style="stroke:#000000;stroke-width:2.0;" width="1760" x="436" y="452.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="451" y="465.3872">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="276" x="528" y="464.5308">[Для кожного нового/зміненого шаблону]</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="801" x2="843" y1="505.7188" y2="505.7188"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="843" x2="843" y1="505.7188" y2="518.7188"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="802" x2="843" y1="518.7188" y2="518.7188"/><polygon fill="#2688D4" points="812,514.7188,802,518.7188,812,522.7188,808,518.7188" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="808" y="485.52">Завантаження мета-даних шаблону</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="340" x="808" y="500.6528">&lt;channel&gt;/&lt;template_name&gt;/notification.yml</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="801" x2="843" y1="578.1172" y2="578.1172"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="843" x2="843" y1="578.1172" y2="591.1172"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="802" x2="843" y1="591.1172" y2="591.1172"/><polygon fill="#2688D4" points="812,587.1172,802,591.1172,812,595.1172,808,591.1172" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="808" y="542.7856">Завантаження шаблону та пов'язаних ресурсів</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="808" y="557.9185">з директорії шаблону</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="221" x="808" y="573.0513">&lt;channel&gt;/&lt;template_name&gt;</text><path d="M652.5,606.1172 L716.5,606.1172 L716.5,613.1172 L706.5,623.1172 L652.5,623.1172 L652.5,606.1172 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="276.4609" style="stroke:#000000;stroke-width:2.0;" width="487.5" x="652.5" y="606.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="667.5" y="619.1841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105" x="731.5" y="618.3276">[channel=email]</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="801" x2="843" y1="674.6484" y2="674.6484"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="843" x2="843" y1="674.6484" y2="687.6484"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="802" x2="843" y1="687.6484" y2="687.6484"/><polygon fill="#2688D4" points="812,683.6484,802,687.6484,812,691.6484,808,687.6484" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="808" y="639.3169">Побудова об'єктної моделі</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="808" y="654.4497">HTML-документу шаблону</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="808" y="669.5825">на базі "template.ftlh" файлу</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="801" x2="843" y1="747.0469" y2="747.0469"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="843" x2="843" y1="747.0469" y2="760.0469"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="802" x2="843" y1="760.0469" y2="760.0469"/><polygon fill="#2688D4" points="812,756.0469,802,760.0469,812,764.0469,808,760.0469" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="808" y="711.7153">Інтеграція зовнішніх ресурсів зображень</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="808" y="726.8481">як частини єдиного HTML-документу шаблону</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="808" y="741.981">(data:image/jpeg;base64)</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="801" x2="843" y1="804.3125" y2="804.3125"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="843" x2="843" y1="804.3125" y2="817.3125"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="802" x2="843" y1="817.3125" y2="817.3125"/><polygon fill="#2688D4" points="812,813.3125,802,817.3125,812,821.3125,808,817.3125" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="808" y="784.1138">Інтеграція стилів (css/style.css)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="808" y="799.2466">як частини єдиного HTML-документу шаблону</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="801" x2="843" y1="861.5781" y2="861.5781"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="843" x2="843" y1="861.5781" y2="874.5781"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="802" x2="843" y1="874.5781" y2="874.5781"/><polygon fill="#2688D4" points="812,870.5781,802,874.5781,812,878.5781,808,874.5781" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="808" y="841.3794">Формування результуючого</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="808" y="856.5122">HTML-документу шаблону</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="801" x2="843" y1="940.9766" y2="940.9766"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="843" x2="843" y1="940.9766" y2="953.9766"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="802" x2="843" y1="953.9766" y2="953.9766"/><polygon fill="#2688D4" points="812,949.9766,802,953.9766,812,957.9766,808,953.9766" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="808" y="905.645">Побудова запиту в залежності</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="318" x="808" y="920.7778">від наявності додаткових атрибутів шаблону,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="808" y="935.9106">вказаних у "notification.yml" файлі</text><polygon fill="#2688D4" points="1143,1118.3047,1153,1122.3047,1143,1126.3047,1147,1122.3047" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="801" x2="1149" y1="1122.3047" y2="1122.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="808" y="1102.106">Створення або зміна шаблону</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="301" x="808" y="1117.2388">PUT /api/notifications/{channel}:{name}</text><path d="M446,966.9766 L446,1248.9766 L786,1248.9766 L786,976.9766 L776,966.9766 L446,966.9766 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M776,966.9766 L776,976.9766 L786,976.9766 L776,966.9766 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="452" y="984.0435">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="460" y="999.1763">"title": "{title}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="460" y="1014.3091">"content": "{template content}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311" x="460" y="1029.4419">"attributes": // приклад секції для "diia" канала</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="468" y="1044.5747">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="476" y="1059.7075">"name": "actionType",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="476" y="1074.8403">"value": "message"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="468" y="1089.9731">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="468" y="1105.106">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="476" y="1120.2388">"name": "templateType",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="476" y="1135.3716">"value": "attention"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="468" y="1150.5044">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="468" y="1165.6372">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="476" y="1180.77">"name": "shortText",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="476" y="1195.9028">"value": "{shortText}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="468" y="1211.0356">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="460" y="1226.1685">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="452" y="1241.3013">}</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="1275.5" y2="1275.5"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="1275.5" y2="1288.5"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="1288.5" y2="1288.5"/><polygon fill="#2688D4" points="1176,1284.5,1166,1288.5,1176,1292.5,1172,1288.5" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="1172" y="1270.4341">Валідація запиту на створення/зміну шаблону</text><path d="M652.5,1303.5 L716.5,1303.5 L716.5,1310.5 L706.5,1320.5 L652.5,1320.5 L652.5,1303.5 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="623.5" x="652.5" y="1303.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="667.5" y="1316.5669">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="215" x="731.5" y="1315.7104">[Валідацію запиту не пройдено]</text><polygon fill="#2688D4" points="812,1337.7656,802,1341.7656,812,1345.7656,808,1341.7656" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="806" x2="1154" y1="1341.7656" y2="1341.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="818" y="1336.6997">400 - Помилка валідації</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="1393.0313" y2="1393.0313"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="1393.0313" y2="1406.0313"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="1406.0313" y2="1406.0313"/><polygon fill="#2688D4" points="1176,1402.0313,1166,1406.0313,1176,1410.0313,1172,1406.0313" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="1172" y="1372.8325">Калькуляція SHA-256 чек-суми</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="1172" y="1387.9653">на контент шаблону</text><polygon fill="#2688D4" points="2055.5,1446.2969,2065.5,1450.2969,2055.5,1454.2969,2059.5,1450.2969" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="2061.5" y1="1450.2969" y2="1450.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1172" y="1430.0981">Отримання запису про шаблон</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="1172" y="1445.231">за критеріями (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="108" x="1277" y="1445.231">channel, name</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1385" y="1445.231">)</text><polygon fill="#2688D4" points="1176,1607.0586,1166,1611.0586,1176,1615.0586,1172,1611.0586" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1170" x2="2066.5" y1="1611.0586" y2="1611.0586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1182" y="1605.9927">Запис шаблону</text><path d="M858,1463.2969 L858,1745.2969 L1150,1745.2969 L1150,1473.2969 L1140,1463.2969 L858,1463.2969 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M1140,1463.2969 L1140,1473.2969 L1150,1473.2969 L1140,1463.2969 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="864" y="1480.3638">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="880" y="1495.4966">"id": "{UUID}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="880" y="1510.6294">"name": "{template_name}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="880" y="1525.7622">"title": "{title}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="880" y="1540.895">"channel:": "{channel}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="880" y="1556.0278">"content:": "{content}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="880" y="1571.1606">"checksum": "{sha256-hash}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="880" y="1586.2935">"createdAt": "{timestamp}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="880" y="1601.4263">"updatedAt": "{timestamp}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="880" y="1616.5591">"externalTemplateId": "{external_id}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="880" y="1631.6919">"externallyPublishedAt": "{timestamp}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="880" y="1646.8247">"attributes": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="888" y="1661.9575">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="896" y="1677.0903">"name": "{attr_name}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="896" y="1692.2231">"name": "{attr_value}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="888" y="1707.356">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="880" y="1722.4888">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="864" y="1737.6216">}</text><path d="M642.5,1757.6875 L706.5,1757.6875 L706.5,1764.6875 L696.5,1774.6875 L642.5,1774.6875 L642.5,1757.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1464.6484" style="stroke:#000000;stroke-width:2.0;" width="1543.5" x="642.5" y="1757.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="657.5" y="1770.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="199" x="721.5" y="1769.8979">[Запис шаблону не знайдено]</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="1811.0859" y2="1811.0859"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="1811.0859" y2="1824.0859"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="1824.0859" y2="1824.0859"/><polygon fill="#2688D4" points="1176,1820.0859,1166,1824.0859,1176,1828.0859,1172,1824.0859" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="345" x="1172" y="1790.8872">Побудова нового запису шаблону для збереження</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1172" y="1806.02">на базі тіла запиту</text><path d="M1044,1839.0859 L1108,1839.0859 L1108,1846.0859 L1098,1856.0859 L1044,1856.0859 L1044,1839.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="549.1875" style="stroke:#000000;stroke-width:2.0;" width="1132" x="1044" y="1839.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1059" y="1852.1528">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="1123" y="1851.2964">[channel=diia]</text><polygon fill="#2688D4" points="1540,1873.3516,1550,1877.3516,1540,1881.3516,1544,1877.3516" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1546" y1="1877.3516" y2="1877.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1172" y="1872.2856">Аутентифікація партнера</text><polygon fill="#2688D4" points="1867,1917.6172,1877,1921.6172,1867,1925.6172,1871,1921.6172" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1552" x2="1873" y1="1921.6172" y2="1921.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="1559" y="1901.4185">Аутентифікація партнера:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="303" x="1559" y="1916.5513">GET /api/v1/auth/partner/{partnerToken}</text><polygon fill="#2688D4" points="1563,1964.8828,1553,1968.8828,1563,1972.8828,1559,1968.8828" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1557" x2="1878" y1="1968.8828" y2="1968.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1569" y="1963.8169">Токен доступу</text><path d="M1884,1934.6172 L1884,1989.6172 L2123,1989.6172 L2123,1944.6172 L2113,1934.6172 L1884,1934.6172 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M2113,1934.6172 L2113,1944.6172 L2123,1944.6172 L2113,1934.6172 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1890" y="1951.6841">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="1898" y="1966.8169">"token": "&lt;authorization token&gt;"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1890" y="1981.9497">}</text><polygon fill="#2688D4" points="1176,2012.1484,1166,2016.1484,1176,2020.1484,1172,2016.1484" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1170" x2="1551" y1="2016.1484" y2="2016.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1182" y="2011.0825">Токен доступу</text><polygon fill="#2688D4" points="1540,2041.2813,1550,2045.2813,1540,2049.2813,1544,2045.2813" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1546" y1="2045.2813" y2="2045.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1172" y="2040.2153">Створення шаблону</text><polygon fill="#2688D4" points="1867,2126.3789,1877,2130.3789,1867,2134.3789,1871,2130.3789" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1552" x2="1873" y1="2130.3789" y2="2130.3789"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1559" y="2110.1802">Створення шаблону</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="253" x="1559" y="2125.313">POST /api/v1/notification/template</text><path d="M1184,2058.2813 L1184,2173.2813 L1547,2173.2813 L1547,2068.2813 L1537,2058.2813 L1184,2058.2813 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M1537,2058.2813 L1537,2068.2813 L1547,2068.2813 L1537,2058.2813 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1190" y="2075.3481">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1198" y="2090.481">"actionType":</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="208" x="1285" y="2090.481">{attributes['actionType']}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1493" y="2090.481">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1198" y="2105.6138">"templateType":</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="224" x="1304" y="2105.6138">{attributes['templateType']}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1528" y="2105.6138">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="1198" y="2120.7466">"title" : "{content}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="1198" y="2135.8794">"shortText" : "{attributes['shortText']}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="1198" y="2151.0122">"fullText" : "{content}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1190" y="2166.145">}</text><polygon fill="#2688D4" points="1563,2214.4766,1553,2218.4766,1563,2222.4766,1559,2218.4766" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1557" x2="1878" y1="2218.4766" y2="2218.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1569" y="2213.4106">Ідентифікатор шаблона</text><path d="M1884,2184.2109 L1884,2239.2109 L2161,2239.2109 L2161,2194.2109 L2151,2184.2109 L1884,2184.2109 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><path d="M2151,2184.2109 L2151,2194.2109 L2161,2194.2109 L2151,2184.2109 " fill="#FFFFFF" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1890" y="2201.2778">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="1898" y="2216.4106">"templateId": "&lt;external template id&gt;"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1890" y="2231.5435">}</text><polygon fill="#2688D4" points="1176,2261.7422,1166,2265.7422,1176,2269.7422,1172,2265.7422" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1170" x2="1551" y1="2265.7422" y2="2265.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1182" y="2260.6763">Ідентифікатор шаблона</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="2310.0078" y2="2310.0078"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="2310.0078" y2="2323.0078"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="2323.0078" y2="2323.0078"/><polygon fill="#2688D4" points="1176,2319.0078,1166,2323.0078,1176,2327.0078,1172,2323.0078" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1172" y="2289.8091">Встановлення значення</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1172" y="2304.9419">'externalTemplateId' для запису</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="2367.2734" y2="2367.2734"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="2367.2734" y2="2380.2734"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="2380.2734" y2="2380.2734"/><polygon fill="#2688D4" points="1176,2376.2734,1166,2380.2734,1176,2384.2734,1172,2380.2734" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1172" y="2347.0747">Встановлення значення</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="1172" y="2362.2075">'externallyPublishedAt' для запису</text><polygon fill="#2688D4" points="2055.5,2412.4063,2065.5,2416.4063,2055.5,2420.4063,2059.5,2416.4063" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="2061.5" y1="2416.4063" y2="2416.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="1172" y="2411.3403">Збереження нового запису шаблону</text><polygon fill="#2688D4" points="1176,2426.4063,1166,2430.4063,1176,2434.4063,1172,2430.4063" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1170" x2="2066.5" y1="2430.4063" y2="2430.4063"/><polygon fill="#2688D4" points="812,2440.4063,802,2444.4063,812,2448.4063,808,2444.4063" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="806" x2="1154" y1="2444.4063" y2="2444.4063"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="642.5" x2="2186" y1="2453.4063" y2="2453.4063"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="647.5" y="2463.6167">[Запис знайдено]</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="2503.4766" y2="2503.4766"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="2503.4766" y2="2516.4766"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="2516.4766" y2="2516.4766"/><polygon fill="#2688D4" points="1176,2512.4766,1166,2516.4766,1176,2520.4766,1172,2516.4766" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="1172" y="2483.2778">Перевірка повного співпадіння заголовків</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="1172" y="2498.4106">існуючого шаблону та отриманого з запиту</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="2560.7422" y2="2560.7422"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="2560.7422" y2="2573.7422"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="2573.7422" y2="2573.7422"/><polygon fill="#2688D4" points="1176,2569.7422,1166,2573.7422,1176,2577.7422,1172,2573.7422" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="1172" y="2540.5435">Перевірка співпадіння SHA-256 чек-сум</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="366" x="1172" y="2555.6763">існуючого контенту шаблону та отриманого з запиту</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="2618.0078" y2="2618.0078"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="2618.0078" y2="2631.0078"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="2631.0078" y2="2631.0078"/><polygon fill="#2688D4" points="1176,2627.0078,1166,2631.0078,1176,2635.0078,1172,2631.0078" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="333" x="1172" y="2597.8091">Перевірка повного співпадіння набору атрибутів</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="1172" y="2612.9419">існуючого шаблону та отриманого з запиту</text><path d="M652.5,2646.0078 L716.5,2646.0078 L716.5,2653.0078 L706.5,2663.0078 L652.5,2663.0078 L652.5,2646.0078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="569.3281" style="stroke:#000000;stroke-width:2.0;" width="1499" x="652.5" y="2646.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="667.5" y="2659.0747">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="405" x="731.5" y="2658.2183">[Заголовки, чек-суми контенту або атрибути не співпадають]</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="2699.4063" y2="2699.4063"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="2699.4063" y2="2712.4063"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="2712.4063" y2="2712.4063"/><polygon fill="#2688D4" points="1176,2708.4063,1166,2712.4063,1176,2716.4063,1172,2712.4063" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="364" x="1172" y="2679.2075">Побудова зміненого запису шаблону для збереження</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1172" y="2694.3403">на базі тіла запиту</text><path d="M1044,2727.4063 L1108,2727.4063 L1108,2734.4063 L1098,2744.4063 L1044,2744.4063 L1044,2727.4063 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="394.9922" style="stroke:#000000;stroke-width:2.0;" width="949.5" x="1044" y="2727.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1059" y="2740.4731">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="1123" y="2739.6167">[channel=diia]</text><polygon fill="#2688D4" points="1540,2761.6719,1550,2765.6719,1540,2769.6719,1544,2765.6719" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1546" y1="2765.6719" y2="2765.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1172" y="2760.606">Аутентифікація партнера</text><polygon fill="#2688D4" points="1867,2805.9375,1877,2809.9375,1867,2813.9375,1871,2809.9375" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1552" x2="1873" y1="2809.9375" y2="2809.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="1559" y="2789.7388">Аутентифікація партнера:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="303" x="1559" y="2804.8716">GET /api/v1/auth/partner/{partnerToken}</text><polygon fill="#2688D4" points="1563,2835.0703,1553,2839.0703,1563,2843.0703,1559,2839.0703" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1557" x2="1878" y1="2839.0703" y2="2839.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1569" y="2834.0044">Токен доступу</text><polygon fill="#2688D4" points="1176,2864.2031,1166,2868.2031,1176,2872.2031,1172,2868.2031" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1170" x2="1551" y1="2868.2031" y2="2868.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1182" y="2863.1372">Токен доступу</text><polygon fill="#2688D4" points="1540,2893.3359,1550,2897.3359,1540,2901.3359,1544,2897.3359" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1546" y1="2897.3359" y2="2897.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1172" y="2892.27">Створення шаблону</text><polygon fill="#2688D4" points="1867,2937.6016,1877,2941.6016,1867,2945.6016,1871,2941.6016" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1552" x2="1873" y1="2941.6016" y2="2941.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1559" y="2921.4028">Створення шаблону</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="253" x="1559" y="2936.5356">POST /api/v1/notification/template</text><polygon fill="#2688D4" points="1563,2966.7344,1553,2970.7344,1563,2974.7344,1559,2970.7344" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1557" x2="1878" y1="2970.7344" y2="2970.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1569" y="2965.6685">Ідентифікатор шаблона</text><polygon fill="#2688D4" points="1176,2995.8672,1166,2999.8672,1176,3003.8672,1172,2999.8672" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1170" x2="1878" y1="2999.8672" y2="2999.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1182" y="2994.8013">Ідентифікатор шаблона</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="3044.1328" y2="3044.1328"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="3044.1328" y2="3057.1328"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="3057.1328" y2="3057.1328"/><polygon fill="#2688D4" points="1176,3053.1328,1166,3057.1328,1176,3061.1328,1172,3057.1328" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1172" y="3023.9341">Встановлення значення</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1172" y="3039.0669">'externalTemplateId' для запису</text><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="1207" y1="3101.3984" y2="3101.3984"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1207" x2="1207" y1="3101.3984" y2="3114.3984"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1166" x2="1207" y1="3114.3984" y2="3114.3984"/><polygon fill="#2688D4" points="1176,3110.3984,1166,3114.3984,1176,3118.3984,1172,3114.3984" style="stroke:#2688D4;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1172" y="3081.1997">Встановлення значення</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="1172" y="3096.3325">'externallyPublishedAt' для запису</text><polygon fill="#2688D4" points="2055.5,3146.5313,2065.5,3150.5313,2055.5,3154.5313,2059.5,3150.5313" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;" x1="1165" x2="2061.5" y1="3150.5313" y2="3150.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="1172" y="3145.4653">Збереження зміненого запису шаблону</text><polygon fill="#2688D4" points="1176,3160.5313,1166,3164.5313,1176,3168.5313,1172,3164.5313" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1170" x2="2066.5" y1="3164.5313" y2="3164.5313"/><polygon fill="#2688D4" points="812,3174.5313,802,3178.5313,812,3182.5313,808,3178.5313" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="806" x2="1154" y1="3178.5313" y2="3178.5313"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="652.5" x2="2151.5" y1="3187.5313" y2="3187.5313"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="375" x="657.5" y="3197.7417">[Заголовки, чек-суми контенту та атрибути співпадають]</text><polygon fill="#2688D4" points="812,3203.3359,802,3207.3359,812,3211.3359,808,3207.3359" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="806" x2="1154" y1="3207.3359" y2="3207.3359"/><polygon fill="#2688D4" points="563.5,3253.4688,553.5,3257.4688,563.5,3261.4688,559.5,3257.4688" style="stroke:#2688D4;stroke-width:1.0;"/><line style="stroke:#2688D4;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="557.5" x2="795" y1="3257.4688" y2="3257.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="569.5" y="3252.4028">Шаблони опубліковано</text><!--MD5=[437c678f22fef93fed7b044ad716fdc0]
@startuml
skinparam shadowing false
skinparam DatabaseBackgroundColor white
skinparam DatabaseBorderColor #2688d4
skinparam QueueBackgroundColor white
skinparam QueueBorderColor #2688d4
skinparam NoteBackgroundColor white
skinparam NoteBorderColor #2688d4
skinparam ActorBackgroundColor white
skinparam ControlBackgroundColor white
skinparam ControlBorderColor #2688d4
skinparam sequence {
    ArrowColor #2688d4
    ActorBorderColor #2688d4
    LifeLineBorderColor #2688d4
    ParticipantBorderColor #2688d4
    ParticipantBackgroundColor white
    BoxBorderColor #2688d4
    BoxBackgroundColor white
}

actor "Адміністратор \nрегламенту" as registry_admin
participant "Сервіс перегляду \nта інспекції змін \nрегламенту \n(**gerrit**)" as gerrit
database "Репозиторій \nрегламенту \n(**git**)" as regulation_repository
box Registry Jenkins
control "Пайплайн \nпублікації змін регламенту" as publication_pipeline
end box
participant "Утиліта \nпублікації шаблонів \n(**notification-template-publisher**)" as template_publisher
participant "Сервіс відправки \nповідомлень користувачам\n(**notification-service**)" as notification_service
participant "Diia Notification \nTemplate Service" as diia_template_service
participant "Шлюз нотифікацій Дія\n(**diia-notification-service**)" as diia_notification_service
database "Сховище шаблонів \n(**citus**)" as template_database

registry_admin -> gerrit: Формування запиту \nна внесення змін \nдо шаблонів
activate gerrit
  gerrit -> gerrit: Інспекція змін
  gerrit -> regulation_repository: Інтеграція змін \nдо основної гілки
  regulation_repository - -> gerrit
  gerrit - -> registry_admin
deactivate gerrit

publication_pipeline -> regulation_repository: Відслідковування змін \n в '**/notifications/**'
activate publication_pipeline
  publication_pipeline -> publication_pipeline: Формування переліку \nнових/змінених шаблонів
  publication_pipeline -> template_publisher: Публікація \nнових/змінених шаблонів \n**[email|diia|inbox]**
  activate template_publisher
    loop Для кожного нового/зміненого шаблону
      template_publisher -> template_publisher: Завантаження мета-даних шаблону \n**<channel>/<template_name>/notification.yml**
      template_publisher -> template_publisher: Завантаження шаблону та пов'язаних ресурсів \nз директорії шаблону \n**<channel>/<template_name>**
      alt channel=email
        template_publisher -> template_publisher: Побудова об'єктної моделі \nHTML-документу шаблону \nна базі "template.ftlh" файлу
        template_publisher -> template_publisher: Інтеграція зовнішніх ресурсів зображень \nяк частини єдиного HTML-документу шаблону \n(data:image/jpeg;base64)
        template_publisher -> template_publisher: Інтеграція стилів (css/style.css) \nяк частини єдиного HTML-документу шаблону
        template_publisher -> template_publisher: Формування результуючого \nHTML-документу шаблону
      end
      template_publisher -> template_publisher: Побудова запиту в залежності \nвід наявності додаткових атрибутів шаблону,\nвказаних у "notification.yml" файлі

      template_publisher -> notification_service: Створення або зміна шаблону \n**PUT /api/notifications/{channel}:{name}**
      note left
        {
          "title": "{title}",
          "content": "{template content}",
          "attributes": // приклад секції для "diia" канала
            {
              "name": "actionType",
              "value": "message"
            },
            {
              "name": "templateType",
              "value": "attention"
            },
            {
              "name": "shortText",
              "value": "{shortText}"
            }
          ]
        }
      end note
      activate notification_service
        notification_service -> notification_service: Валідація запиту на створення/зміну шаблону

        alt Валідацію запиту не пройдено
          notification_service - -> template_publisher: 400 - Помилка валідації
        end

        notification_service -> notification_service: Калькуляція SHA-256 чек-суми \nна контент шаблону
        notification_service -> template_database: Отримання запису про шаблон \nза критеріями (**channel, name**)
        template_database - -> notification_service: Запис шаблону
        note left
          {
              "id": "{UUID}",
              "name": "{template_name}",
              "title": "{title}",
              "channel:": "{channel}",
              "content:": "{content}",
              "checksum": "{sha256-hash}",
              "createdAt": "{timestamp}",
              "updatedAt": "{timestamp}",
              "externalTemplateId": "{external_id}",
              "externallyPublishedAt": "{timestamp}",
              "attributes": [
                {
                  "name": "{attr_name}",
                  "name": "{attr_value}"
                }
              ]
          }
        end note
        alt Запис шаблону не знайдено
          notification_service -> notification_service: Побудова нового запису шаблону для збереження \nна базі тіла запиту

          alt channel=diia
            notification_service -> diia_template_service: Аутентифікація партнера
            diia_template_service -> diia_notification_service: Аутентифікація партнера: \n**GET /api/v1/auth/partner/{partnerToken}**
            diia_notification_service - -> diia_template_service: Токен доступу
            note right
              {
                "token": "<authorization token>"
              }
            end note
            diia_template_service - -> notification_service: Токен доступу
            notification_service -> diia_template_service: Створення шаблону
            diia_template_service -> diia_notification_service: Створення шаблону \n**POST /api/v1/notification/template**
            note left
              {
                "actionType": ""{attributes['actionType']}"",
                "templateType": ""{attributes['templateType']}"",
                "title" : "{content}",
                "shortText" : "{attributes['shortText']}",
                "fullText" : "{content}"
              }
            end note
            diia_notification_service - -> diia_template_service: Ідентифікатор шаблона
            note right
              {
                "templateId": "<external template id>"
              }
            end note
            diia_template_service - -> notification_service: Ідентифікатор шаблона
            notification_service -> notification_service: Встановлення значення \n'externalTemplateId' для запису
            notification_service -> notification_service: Встановлення значення \n'externallyPublishedAt' для запису
          end
          notification_service -> template_database: Збереження нового запису шаблону
          template_database - -> notification_service
          notification_service - -> template_publisher
        else Запис знайдено
          notification_service -> notification_service: Перевірка повного співпадіння заголовків \nіснуючого шаблону та отриманого з запиту
          notification_service -> notification_service: Перевірка співпадіння SHA-256 чек-сум \nіснуючого контенту шаблону та отриманого з запиту
          notification_service -> notification_service: Перевірка повного співпадіння набору атрибутів \nіснуючого шаблону та отриманого з запиту
          alt Заголовки, чек-суми контенту або атрибути не співпадають
            notification_service -> notification_service: Побудова зміненого запису шаблону для збереження \nна базі тіла запиту
            alt channel=diia
              notification_service -> diia_template_service: Аутентифікація партнера
              diia_template_service -> diia_notification_service: Аутентифікація партнера: \n**GET /api/v1/auth/partner/{partnerToken}**
              diia_notification_service - -> diia_template_service: Токен доступу
              diia_template_service - -> notification_service: Токен доступу
              notification_service -> diia_template_service: Створення шаблону
              diia_template_service -> diia_notification_service: Створення шаблону \n**POST /api/v1/notification/template**
              diia_notification_service - -> diia_template_service: Ідентифікатор шаблона
              diia_notification_service - -> notification_service: Ідентифікатор шаблона
              notification_service -> notification_service: Встановлення значення \n'externalTemplateId' для запису
              notification_service -> notification_service: Встановлення значення \n'externallyPublishedAt' для запису
            end
            notification_service -> template_database: Збереження зміненого запису шаблону
            template_database - -> notification_service
            notification_service - -> template_publisher
          else Заголовки, чек-суми контенту та атрибути співпадають
            notification_service - -> template_publisher
          end
        end
      end
    template_publisher - -> publication_pipeline: Шаблони опубліковано
  deactivate template_publisher
deactivate publication_pipeline
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>